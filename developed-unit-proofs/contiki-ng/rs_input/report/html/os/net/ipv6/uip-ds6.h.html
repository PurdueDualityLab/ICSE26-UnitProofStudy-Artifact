
<html>
<head>
<title>os/net/ipv6/uip-ds6.h</title>
<link rel="stylesheet" type="text/css" href="../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /**</div><div id="2" class="line none">    2  * \addtogroup uip</div><div id="3" class="line none">    3  * @{</div><div id="4" class="line none">    4  */</div><div id="5" class="line none">    5 </div><div id="6" class="line none">    6 /**</div><div id="7" class="line none">    7  * \file</div><div id="8" class="line none">    8  *    Header file for IPv6-related data structures</div><div id="9" class="line none">    9  * \author Mathilde Durvy &lt;mdurvy@cisco.com&gt;</div><div id="10" class="line none">   10  * \author Julien Abeille &lt;jabeille@cisco.com&gt;</div><div id="11" class="line none">   11  *</div><div id="12" class="line none">   12  */</div><div id="13" class="line none">   13 /*</div><div id="14" class="line none">   14  *</div><div id="15" class="line none">   15  * Redistribution and use in source and binary forms, with or without</div><div id="16" class="line none">   16  * modification, are permitted provided that the following conditions</div><div id="17" class="line none">   17  * are met:</div><div id="18" class="line none">   18  * 1. Redistributions of source code must retain the above copyright</div><div id="19" class="line none">   19  *    notice, this list of conditions and the following disclaimer.</div><div id="20" class="line none">   20  * 2. Redistributions in binary form must reproduce the above copyright</div><div id="21" class="line none">   21  *    notice, this list of conditions and the following disclaimer in the</div><div id="22" class="line none">   22  *    documentation and/or other materials provided with the distribution.</div><div id="23" class="line none">   23  * 3. Neither the name of the Institute nor the names of its contributors</div><div id="24" class="line none">   24  *    may be used to endorse or promote products derived from this software</div><div id="25" class="line none">   25  *    without specific prior written permission.</div><div id="26" class="line none">   26  *</div><div id="27" class="line none">   27  * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND</div><div id="28" class="line none">   28  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</div><div id="29" class="line none">   29  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</div><div id="30" class="line none">   30  * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE</div><div id="31" class="line none">   31  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</div><div id="32" class="line none">   32  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</div><div id="33" class="line none">   33  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</div><div id="34" class="line none">   34  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</div><div id="35" class="line none">   35  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</div><div id="36" class="line none">   36  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</div><div id="37" class="line none">   37  * SUCH DAMAGE.</div><div id="38" class="line none">   38  *</div><div id="39" class="line none">   39  *</div><div id="40" class="line none">   40  */</div><div id="41" class="line none">   41 </div><div id="42" class="line none">   42 #ifndef <a href="uip-ds6.h.html#43">UIP_DS6_H_</a></div><div id="43" class="line none">   43 #define <a href="uip-ds6.h.html#43">UIP_DS6_H_</a></div><div id="44" class="line none">   44 </div><div id="45" class="line none">   45 #include "net/ipv6/uip.h"</div><div id="46" class="line none">   46 #include "net/ipv6/multicast/uip-mcast6.h"</div><div id="47" class="line none">   47 #include "sys/stimer.h"</div><div id="48" class="line none">   48 /* The size of uip_ds6_addr_t depends on UIP_ND6_DEF_MAXDADNS. Include uip-nd6.h to define it. */</div><div id="49" class="line none">   49 #include "net/ipv6/uip-nd6.h"</div><div id="50" class="line none">   50 #include "net/ipv6/uip-ds6-nbr.h"</div><div id="51" class="line none">   51 #include "net/ipv6/uip-ds6-route.h"</div><div id="52" class="line none">   52 </div><div id="53" class="line none">   53 /*--------------------------------------------------*/</div><div id="54" class="line none">   54 /** Configuration. For all tables (Neighbor cache, Prefix List, Routing Table,</div><div id="55" class="line none">   55  * Default Router List, Unicast address list, multicast address list, anycast address list),</div><div id="56" class="line none">   56  * we define:</div><div id="57" class="line none">   57  * - the number of elements requested by the user in contiki configuration (name suffixed by _NBU)</div><div id="58" class="line none">   58  * - the number of elements assigned by the system (name suffixed by _NBS)</div><div id="59" class="line none">   59  * - the total number of elements is the sum (name suffixed by _NB)</div><div id="60" class="line none">   60  * The routing table definitions can be found in uip-ds6-route.h</div><div id="61" class="line none">   61  * The Neighbor cache definitions can be found in nbr-table.h</div><div id="62" class="line none">   62 */</div><div id="63" class="line none">   63 </div><div id="64" class="line none">   64 /* Default router list */</div><div id="65" class="line none">   65 #define <a href="uip-ds6.h.html#65">UIP_DS6_DEFRT_NBS</a> 0</div><div id="66" class="line none">   66 #ifndef UIP_CONF_DS6_DEFRT_NBU</div><div id="67" class="line none">   67 #define <a href="uip-ds6.h.html#67">UIP_DS6_DEFRT_NBU</a> 2</div><div id="68" class="line none">   68 #else</div><div id="69" class="line none">   69 #define <a href="uip-ds6.h.html#67">UIP_DS6_DEFRT_NBU</a> UIP_CONF_DS6_DEFRT_NBU</div><div id="70" class="line none">   70 #endif</div><div id="71" class="line none">   71 #define <a href="uip-ds6.h.html#71">UIP_DS6_DEFRT_NB</a> <a href="uip-ds6.h.html#65">UIP_DS6_DEFRT_NBS</a> + <a href="uip-ds6.h.html#67">UIP_DS6_DEFRT_NBU</a></div><div id="72" class="line none">   72 </div><div id="73" class="line none">   73 /* Default prefix */</div><div id="74" class="line none">   74 #ifdef UIP_CONF_DS6_DEFAULT_PREFIX</div><div id="75" class="line none">   75 #define <a href="uip-ds6.h.html#75">UIP_DS6_DEFAULT_PREFIX</a> UIP_CONF_DS6_DEFAULT_PREFIX</div><div id="76" class="line none">   76 #else</div><div id="77" class="line none">   77 /* From RFC4193, section 3.1:</div><div id="78" class="line none">   78  *  | 7 bits |1|  40 bits   |  16 bits  |          64 bits           |</div><div id="79" class="line none">   79  *  +--------+-+------------+-----------+----------------------------+</div><div id="80" class="line none">   80  *  | Prefix |L| Global ID  | Subnet ID |        Interface ID        |</div><div id="81" class="line none">   81  *  +--------+-+------------+-----------+----------------------------+</div><div id="82" class="line none">   82  *     Prefix            FC00::/7 prefix to identify Local IPv6 unicast</div><div id="83" class="line none">   83  *                       addresses.</div><div id="84" class="line none">   84  *     L                 Set to 1 if the prefix is locally assigned.</div><div id="85" class="line none">   85  *                       Set to 0 may be defined in the future.  See</div><div id="86" class="line none">   86  *                       Section 3.2 for additional information.</div><div id="87" class="line none">   87  *     Global ID         40-bit global identifier used to create a</div><div id="88" class="line none">   88  *                       globally unique prefix.  See Section 3.2 for</div><div id="89" class="line none">   89  *                       additional information.</div><div id="90" class="line none">   90  *</div><div id="91" class="line none">   91  * We set prefix to 0xfc00 and set the local bit, resulting in 0xfd00.</div><div id="92" class="line none">   92  * For high probability of network uniqueness, Global ID must be generated</div><div id="93" class="line none">   93  * pseudo-randomly. As this is a hard-coded default prefix, we simply use</div><div id="94" class="line none">   94  * a Global ID of 0. For real deployments, make sure to install a pseudo-random</div><div id="95" class="line none">   95  * Global ID, e.g. in a RPL network, by configuring it at the root.</div><div id="96" class="line none">   96  */</div><div id="97" class="line none">   97 #define <a href="uip-ds6.h.html#75">UIP_DS6_DEFAULT_PREFIX</a> 0xfd00</div><div id="98" class="line none">   98 #endif /* UIP_CONF_DS6_DEFAULT_PREFIX */</div><div id="99" class="line none">   99 </div><div id="100" class="line none">  100 #define <a href="uip-ds6.h.html#100">UIP_DS6_DEFAULT_PREFIX_0</a> ((<a href="uip-ds6.h.html#75">UIP_DS6_DEFAULT_PREFIX</a> &gt;&gt; 8) &amp; 0xff)</div><div id="101" class="line none">  101 #define <a href="uip-ds6.h.html#101">UIP_DS6_DEFAULT_PREFIX_1</a> (<a href="uip-ds6.h.html#75">UIP_DS6_DEFAULT_PREFIX</a> &amp; 0xff)</div><div id="102" class="line none">  102 </div><div id="103" class="line none">  103 /* Prefix list */</div><div id="104" class="line none">  104 #define <a href="uip-ds6.h.html#104">UIP_DS6_PREFIX_NBS</a>  1</div><div id="105" class="line none">  105 #ifndef UIP_CONF_DS6_PREFIX_NBU</div><div id="106" class="line none">  106 #define <a href="uip-ds6.h.html#106">UIP_DS6_PREFIX_NBU</a>  2</div><div id="107" class="line none">  107 #else</div><div id="108" class="line none">  108 #define <a href="uip-ds6.h.html#106">UIP_DS6_PREFIX_NBU</a> UIP_CONF_DS6_PREFIX_NBU</div><div id="109" class="line none">  109 #endif</div><div id="110" class="line none">  110 #define <a href="uip-ds6.h.html#110">UIP_DS6_PREFIX_NB</a> <a href="uip-ds6.h.html#104">UIP_DS6_PREFIX_NBS</a> + <a href="uip-ds6.h.html#106">UIP_DS6_PREFIX_NBU</a></div><div id="111" class="line none">  111 </div><div id="112" class="line none">  112 /* Unicast address list*/</div><div id="113" class="line none">  113 #define <a href="uip-ds6.h.html#113">UIP_DS6_ADDR_NBS</a> 1</div><div id="114" class="line none">  114 #ifndef UIP_CONF_DS6_ADDR_NBU</div><div id="115" class="line none">  115 #define <a href="uip-ds6.h.html#115">UIP_DS6_ADDR_NBU</a> 2</div><div id="116" class="line none">  116 #else</div><div id="117" class="line none">  117 #define <a href="uip-ds6.h.html#115">UIP_DS6_ADDR_NBU</a> UIP_CONF_DS6_ADDR_NBU</div><div id="118" class="line none">  118 #endif</div><div id="119" class="line none">  119 #define <a href="uip-ds6.h.html#119">UIP_DS6_ADDR_NB</a> <a href="uip-ds6.h.html#113">UIP_DS6_ADDR_NBS</a> + <a href="uip-ds6.h.html#115">UIP_DS6_ADDR_NBU</a></div><div id="120" class="line none">  120 </div><div id="121" class="line none">  121 /* Multicast address list */</div><div id="122" class="line none">  122 #if UIP_CONF_ROUTER</div><div id="123" class="line none">  123 #define <a href="uip-ds6.h.html#123">UIP_DS6_MADDR_NBS</a> 2 + <a href="uip-ds6.h.html#119">UIP_DS6_ADDR_NB</a>   /* all routers + all nodes + one solicited per unicast */</div><div id="124" class="line none">  124 #else</div><div id="125" class="line none">  125 #define <a href="uip-ds6.h.html#123">UIP_DS6_MADDR_NBS</a> 1 + <a href="uip-ds6.h.html#119">UIP_DS6_ADDR_NB</a>   /* all nodes + one solicited per unicast */</div><div id="126" class="line none">  126 #endif</div><div id="127" class="line none">  127 #ifndef UIP_CONF_DS6_MADDR_NBU</div><div id="128" class="line none">  128 #define <a href="uip-ds6.h.html#128">UIP_DS6_MADDR_NBU</a> 0</div><div id="129" class="line none">  129 #else</div><div id="130" class="line none">  130 #define <a href="uip-ds6.h.html#128">UIP_DS6_MADDR_NBU</a> UIP_CONF_DS6_MADDR_NBU</div><div id="131" class="line none">  131 #endif</div><div id="132" class="line none">  132 #define <a href="uip-ds6.h.html#132">UIP_DS6_MADDR_NB</a> <a href="uip-ds6.h.html#123">UIP_DS6_MADDR_NBS</a> + <a href="uip-ds6.h.html#128">UIP_DS6_MADDR_NBU</a></div><div id="133" class="line none">  133 </div><div id="134" class="line none">  134 /* Anycast address list */</div><div id="135" class="line none">  135 #if UIP_CONF_ROUTER</div><div id="136" class="line none">  136 #define <a href="uip-ds6.h.html#136">UIP_DS6_AADDR_NBS</a> <a href="uip-ds6.h.html#110">UIP_DS6_PREFIX_NB</a> - 1 /* One per non link local prefix (subnet prefix anycast address) */</div><div id="137" class="line none">  137 #else</div><div id="138" class="line none">  138 #define <a href="uip-ds6.h.html#136">UIP_DS6_AADDR_NBS</a> 0</div><div id="139" class="line none">  139 #endif</div><div id="140" class="line none">  140 #ifndef UIP_CONF_DS6_AADDR_NBU</div><div id="141" class="line none">  141 #define <a href="uip-ds6.h.html#141">UIP_DS6_AADDR_NBU</a> 0</div><div id="142" class="line none">  142 #else</div><div id="143" class="line none">  143 #define <a href="uip-ds6.h.html#141">UIP_DS6_AADDR_NBU</a> UIP_CONF_DS6_AADDR_NBU</div><div id="144" class="line none">  144 #endif</div><div id="145" class="line none">  145 #define <a href="uip-ds6.h.html#145">UIP_DS6_AADDR_NB</a> <a href="uip-ds6.h.html#136">UIP_DS6_AADDR_NBS</a> + <a href="uip-ds6.h.html#141">UIP_DS6_AADDR_NBU</a></div><div id="146" class="line none">  146 </div><div id="147" class="line none">  147 /*--------------------------------------------------*/</div><div id="148" class="line none">  148 /* Should we use LinkLayer acks in NUD ?*/</div><div id="149" class="line none">  149 #ifndef UIP_CONF_DS6_LL_NUD</div><div id="150" class="line none">  150 #define <a href="uip-ds6.h.html#150">UIP_DS6_LL_NUD</a> 0</div><div id="151" class="line none">  151 #else</div><div id="152" class="line none">  152 #define <a href="uip-ds6.h.html#150">UIP_DS6_LL_NUD</a> UIP_CONF_DS6_LL_NUD</div><div id="153" class="line none">  153 #endif</div><div id="154" class="line none">  154 </div><div id="155" class="line none">  155 /** \brief Possible states for the an address  (RFC 4862) */</div><div id="156" class="line none">  156 #define <a href="uip-ds6.h.html#156">ADDR_TENTATIVE</a> 0</div><div id="157" class="line none">  157 #define <a href="uip-ds6.h.html#157">ADDR_PREFERRED</a> 1</div><div id="158" class="line none">  158 #define <a href="uip-ds6.h.html#158">ADDR_DEPRECATED</a> 2</div><div id="159" class="line none">  159 </div><div id="160" class="line none">  160 /** \brief How the address was acquired: Autoconf, DHCP or manually */</div><div id="161" class="line none">  161 #define  <a href="uip-ds6.h.html#161">ADDR_ANYTYPE</a> 0</div><div id="162" class="line none">  162 #define  <a href="uip-ds6.h.html#162">ADDR_AUTOCONF</a> 1</div><div id="163" class="line none">  163 #define  <a href="uip-ds6.h.html#163">ADDR_DHCP</a> 2</div><div id="164" class="line none">  164 #define  <a href="uip-ds6.h.html#164">ADDR_MANUAL</a> 3</div><div id="165" class="line none">  165 </div><div id="166" class="line none">  166 /** \brief General DS6 definitions */</div><div id="167" class="line none">  167 /** Period for uip-ds6 periodic task*/</div><div id="168" class="line none">  168 #ifndef UIP_DS6_CONF_PERIOD</div><div id="169" class="line none">  169 #define <a href="uip-ds6.h.html#169">UIP_DS6_PERIOD</a>   (60 * <a href="../../sys/clock.h.html#101">CLOCK_SECOND</a>)</div><div id="170" class="line none">  170 #else</div><div id="171" class="line none">  171 #define <a href="uip-ds6.h.html#169">UIP_DS6_PERIOD</a> UIP_DS6_CONF_PERIOD</div><div id="172" class="line none">  172 #endif</div><div id="173" class="line none">  173 </div><div id="174" class="line none">  174 #define <a href="uip-ds6.h.html#174">FOUND</a> 0</div><div id="175" class="line none">  175 #define <a href="uip-ds6.h.html#175">FREESPACE</a> 1</div><div id="176" class="line none">  176 #define <a href="uip-ds6.h.html#176">NOSPACE</a> 2</div><div id="177" class="line none">  177 /*--------------------------------------------------*/</div><div id="178" class="line none">  178 </div><div id="179" class="line none">  179 #if UIP_CONF_IPV6_QUEUE_PKT</div><div id="180" class="line none">  180 #include "net/ipv6/uip-packetqueue.h"</div><div id="181" class="line none">  181 #endif                          /*UIP_CONF_QUEUE_PKT */</div><div id="182" class="line none">  182 </div><div id="183" class="line none">  183 /** \brief A prefix list entry */</div><div id="184" class="line none">  184 #if UIP_CONF_ROUTER</div><div id="185" class="line none">  185 typedef struct <a href="uip-ds6.h.html#185">uip_ds6_prefix</a> {</div><div id="186" class="line none">  186   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="187" class="line none">  187   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="188" class="line none">  188   uint8_t <a href="uip-ds6.h.html#188">length</a>;</div><div id="189" class="line none">  189   uint8_t <a href="uip-ds6.h.html#189">advertise</a>;</div><div id="190" class="line none">  190   uint8_t <a href="uip-ds6.h.html#190">l_a_reserved</a>; /**&lt; on-link and autonomous flags + 6 reserved bits */</div><div id="191" class="line none">  191   uint32_t <a href="uip-ds6.h.html#191">vlifetime</a>;</div><div id="192" class="line none">  192   uint32_t <a href="uip-ds6.h.html#192">plifetime</a>;</div><div id="193" class="line none">  193 } <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a>;</div><div id="194" class="line none">  194 #else /* UIP_CONF_ROUTER */</div><div id="195" class="line none">  195 typedef struct <a href="uip-ds6.h.html#185">uip_ds6_prefix</a> {</div><div id="196" class="line none">  196   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="197" class="line none">  197   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="198" class="line none">  198   uint8_t <a href="uip-ds6.h.html#188">length</a>;</div><div id="199" class="line none">  199   uint8_t <a href="uip-ds6.h.html#199">isinfinite</a>;</div><div id="200" class="line none">  200   struct <a href="../../sys/stimer.h.html#83">stimer</a> <a href="uip-ds6.h.html#191">vlifetime</a>;</div><div id="201" class="line none">  201 } <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a>;</div><div id="202" class="line none">  202 #endif /*UIP_CONF_ROUTER */</div><div id="203" class="line none">  203 </div><div id="204" class="line none">  204 /** * \brief Unicast address structure */</div><div id="205" class="line none">  205 typedef struct <a href="uip-ds6.h.html#205">uip_ds6_addr</a> {</div><div id="206" class="line none">  206   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="207" class="line none">  207   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="208" class="line none">  208   uint8_t <a href="uip-ds6-nbr.h.html#112">state</a>;</div><div id="209" class="line none">  209   uint8_t <a href="uip-ds6.h.html#209">type</a>;</div><div id="210" class="line none">  210   uint8_t <a href="uip-ds6.h.html#199">isinfinite</a>;</div><div id="211" class="line none">  211   struct <a href="../../sys/stimer.h.html#83">stimer</a> <a href="uip-ds6.h.html#191">vlifetime</a>;</div><div id="212" class="line none">  212 #if <a href="uip-nd6.h.html#142">UIP_ND6_DEF_MAXDADNS</a> &gt; 0</div><div id="213" class="line none">  213   struct <a href="../../sys/timer.h.html#84">timer</a> <a href="uip-ds6.h.html#213">dadtimer</a>;</div><div id="214" class="line none">  214   uint8_t <a href="uip-ds6.h.html#214">dadnscount</a>;</div><div id="215" class="line none">  215 #endif /* UIP_ND6_DEF_MAXDADNS &gt; 0 */</div><div id="216" class="line none">  216 } <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a>;</div><div id="217" class="line none">  217 </div><div id="218" class="line none">  218 /** \brief Anycast address  */</div><div id="219" class="line none">  219 typedef struct <a href="uip-ds6.h.html#219">uip_ds6_aaddr</a> {</div><div id="220" class="line none">  220   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="221" class="line none">  221   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="222" class="line none">  222 } <a href="uip-ds6.h.html#222">uip_ds6_aaddr_t</a>;</div><div id="223" class="line none">  223 </div><div id="224" class="line none">  224 /** \brief A multicast address */</div><div id="225" class="line none">  225 typedef struct <a href="uip-ds6.h.html#225">uip_ds6_maddr</a> {</div><div id="226" class="line none">  226   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="227" class="line none">  227   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="228" class="line none">  228 } <a href="uip-ds6.h.html#228">uip_ds6_maddr_t</a>;</div><div id="229" class="line none">  229 </div><div id="230" class="line none">  230 /** \brief  Interface structure (contains all the interface variables) */</div><div id="231" class="line none">  231 typedef struct <a href="uip-ds6.h.html#231">uip_ds6_netif</a> {</div><div id="232" class="line none">  232   uint32_t <a href="uip-ds6.h.html#232">link_mtu</a>;</div><div id="233" class="line none">  233   uint32_t <a href="uip-ds6.h.html#233">base_reachable_time</a>; /* in msec */</div><div id="234" class="line none">  234   uint32_t <a href="uip-ds6.h.html#234">reachable_time</a>;      /* in msec */</div><div id="235" class="line none">  235   uint32_t <a href="uip-ds6.h.html#235">retrans_timer</a>;       /* in msec */</div><div id="236" class="line none">  236 #if <a href="uip-ds6.h.html#119">UIP_DS6_ADDR_NB</a></div><div id="237" class="line none">  237   <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> <a href="uip-ds6.h.html#237">addr_list</a>[<a href="uip-ds6.h.html#119">UIP_DS6_ADDR_NB</a>];</div><div id="238" class="line none">  238 #endif /* UIP_DS6_ADDR_NB */</div><div id="239" class="line none">  239 #if <a href="uip-ds6.h.html#145">UIP_DS6_AADDR_NB</a></div><div id="240" class="line none">  240   <a href="uip-ds6.h.html#222">uip_ds6_aaddr_t</a> <a href="uip-ds6.h.html#240">aaddr_list</a>[<a href="uip-ds6.h.html#145">UIP_DS6_AADDR_NB</a>];</div><div id="241" class="line none">  241 #endif /* UIP_DS6_AADDR_NB */</div><div id="242" class="line none">  242 #if <a href="uip-ds6.h.html#132">UIP_DS6_MADDR_NB</a></div><div id="243" class="line none">  243   <a href="uip-ds6.h.html#228">uip_ds6_maddr_t</a> <a href="uip-ds6.h.html#243">maddr_list</a>[<a href="uip-ds6.h.html#132">UIP_DS6_MADDR_NB</a>];</div><div id="244" class="line none">  244 #endif /* UIP_DS6_MADDR_NB */</div><div id="245" class="line none">  245   uint8_t <a href="uip-ds6.h.html#245">cur_hop_limit</a>;</div><div id="246" class="line none">  246   uint8_t <a href="uip-ds6.h.html#246">maxdadns</a>;</div><div id="247" class="line none">  247 } <a href="uip-ds6.h.html#247">uip_ds6_netif_t</a>;</div><div id="248" class="line none">  248 </div><div id="249" class="line none">  249 /** \brief Generic type for a DS6, to use a common loop though all DS */</div><div id="250" class="line none">  250 typedef struct <a href="uip-ds6.h.html#250">uip_ds6_element</a> {</div><div id="251" class="line none">  251   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip-ds6-nbr.h.html#110">ipaddr</a>;</div><div id="252" class="line none">  252   uint8_t <a href="uip-ds6.h.html#187">isused</a>;</div><div id="253" class="line none">  253 } <a href="uip-ds6.h.html#253">uip_ds6_element_t</a>;</div><div id="254" class="line none">  254 </div><div id="255" class="line none">  255 </div><div id="256" class="line none">  256 /*---------------------------------------------------------------------------*/</div><div id="257" class="line none">  257 extern <a href="uip-ds6.h.html#247">uip_ds6_netif_t</a> <a href="uip-ds6.h.html#257">uip_ds6_if</a>;</div><div id="258" class="line none">  258 extern struct <a href="../../sys/etimer.h.html#79">etimer</a> uip_ds6_timer_periodic;</div><div id="259" class="line none">  259 </div><div id="260" class="line none">  260 #if UIP_CONF_ROUTER</div><div id="261" class="line none">  261 extern <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a> <a href="uip-ds6.h.html#261">uip_ds6_prefix_list</a>[<a href="uip-ds6.h.html#110">UIP_DS6_PREFIX_NB</a>];</div><div id="262" class="line none">  262 #else /* UIP_CONF_ROUTER */</div><div id="263" class="line none">  263 extern struct <a href="../../sys/etimer.h.html#79">etimer</a> uip_ds6_timer_rs;</div><div id="264" class="line none">  264 #endif /* UIP_CONF_ROUTER */</div><div id="265" class="line none">  265 </div><div id="266" class="line none">  266 </div><div id="267" class="line none">  267 /*---------------------------------------------------------------------------*/</div><div id="268" class="line none">  268 /** \brief Initialize data structures */</div><div id="269" class="line none">  269 void uip_ds6_init(void);</div><div id="270" class="line none">  270 </div><div id="271" class="line none">  271 /** \brief Periodic processing of data structures */</div><div id="272" class="line none">  272 void uip_ds6_periodic(void);</div><div id="273" class="line none">  273 </div><div id="274" class="line none">  274 /** \brief Generic loop routine on an abstract data structure, which generalizes</div><div id="275" class="line none">  275  * all data structures used in DS6 */</div><div id="276" class="line none">  276 uint8_t uip_ds6_list_loop(<a href="uip-ds6.h.html#253">uip_ds6_element_t</a> *list, uint8_t size,</div><div id="277" class="line none">  277                           uint16_t elementsize, <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>,</div><div id="278" class="line none">  278                           uint8_t ipaddrlen,</div><div id="279" class="line none">  279                           <a href="uip-ds6.h.html#253">uip_ds6_element_t</a> **out_element);</div><div id="280" class="line none">  280 </div><div id="281" class="line none">  281 /** @} */</div><div id="282" class="line none">  282 </div><div id="283" class="line none">  283 </div><div id="284" class="line none">  284 /** \name Prefix list basic routines */</div><div id="285" class="line none">  285 /** @{ */</div><div id="286" class="line none">  286 #if UIP_CONF_ROUTER</div><div id="287" class="line none">  287 <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a> *uip_ds6_prefix_add(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>, uint8_t <a href="uip-ds6.h.html#188">length</a>,</div><div id="288" class="line none">  288                                      uint8_t <a href="uip-ds6.h.html#189">advertise</a>, uint8_t <a href="uip.h.html#1630">flags</a>,</div><div id="289" class="line none">  289                                      unsigned long vtime,</div><div id="290" class="line none">  290                                      unsigned long ptime);</div><div id="291" class="line none">  291 #else /* UIP_CONF_ROUTER */</div><div id="292" class="line none">  292 <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a> *uip_ds6_prefix_add(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>, uint8_t <a href="uip-ds6.h.html#188">length</a>,</div><div id="293" class="line none">  293                                      unsigned long <a href="../../sys/stimer.h.html#85">interval</a>);</div><div id="294" class="line none">  294 #endif /* UIP_CONF_ROUTER */</div><div id="295" class="line none">  295 void uip_ds6_prefix_rm(<a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a> *<a href="uip-nd6.c.html#119">prefix</a>);</div><div id="296" class="line none">  296 <a href="uip-ds6.h.html#193">uip_ds6_prefix_t</a> *uip_ds6_prefix_lookup(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>,</div><div id="297" class="line none">  297                                         uint8_t ipaddrlen);</div><div id="298" class="line none">  298 uint8_t uip_ds6_is_addr_onlink(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="299" class="line none">  299 </div><div id="300" class="line none">  300 /**</div><div id="301" class="line none">  301  * \brief Retrieve the Default IPv6 prefix</div><div id="302" class="line none">  302  * \retval A pointer to the default prefix</div><div id="303" class="line none">  303  */</div><div id="304" class="line none">  304 const <a href="uip.h.html#100">uip_ip6addr_t</a> *uip_ds6_default_prefix(void);</div><div id="305" class="line none">  305 </div><div id="306" class="line none">  306 /**</div><div id="307" class="line none">  307  * \brief Set the Default IPv6 prefix</div><div id="308" class="line none">  308  * \param prefix A pointer to the new default prefix</div><div id="309" class="line none">  309  *</div><div id="310" class="line none">  310  * uip_ds6_init() will set the default prefix to UIP_DS6_DEFAULT_PREFIX</div><div id="311" class="line none">  311  * unless this function here has been called beforehand to set a new default</div><div id="312" class="line none">  312  * prefix.</div><div id="313" class="line none">  313  */</div><div id="314" class="line none">  314 void uip_ds6_set_default_prefix(const <a href="uip.h.html#100">uip_ip6addr_t</a> *<a href="uip-nd6.c.html#119">prefix</a>);</div><div id="315" class="line none">  315 </div><div id="316" class="line none">  316 /** @} */</div><div id="317" class="line none">  317 </div><div id="318" class="line none">  318 /** \name Unicast address list basic routines */</div><div id="319" class="line none">  319 /** @{ */</div><div id="320" class="line none">  320 /** \brief Add a unicast address to the interface */</div><div id="321" class="line none">  321 <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *uip_ds6_addr_add(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>,</div><div id="322" class="line none">  322                                  unsigned long <a href="uip-ds6.h.html#191">vlifetime</a>, uint8_t <a href="uip-ds6.h.html#209">type</a>);</div><div id="323" class="line none">  323 void uip_ds6_addr_rm(<a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *<a href="uip-nd6.c.html#107">addr</a>);</div><div id="324" class="line none">  324 <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *<a href="uip-ds6.h.html#324">uip_ds6_addr_lookup</a>(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="325" class="line none">  325 <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *uip_ds6_get_link_local(int8_t <a href="uip-ds6-nbr.h.html#112">state</a>);</div><div id="326" class="line none">  326 <a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *uip_ds6_get_global(int8_t <a href="uip-ds6-nbr.h.html#112">state</a>);</div><div id="327" class="line none">  327 </div><div id="328" class="line none">  328 /** @} */</div><div id="329" class="line none">  329 </div><div id="330" class="line none">  330 /** \name Multicast address list basic routines */</div><div id="331" class="line none">  331 /** @{ */</div><div id="332" class="line none">  332 <a href="uip-ds6.h.html#228">uip_ds6_maddr_t</a> *uip_ds6_maddr_add(const <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="333" class="line none">  333 void uip_ds6_maddr_rm(<a href="uip-ds6.h.html#228">uip_ds6_maddr_t</a> *maddr);</div><div id="334" class="line none">  334 <a href="uip-ds6.h.html#228">uip_ds6_maddr_t</a> *uip_ds6_maddr_lookup(const <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="335" class="line none">  335 </div><div id="336" class="line none">  336 /** @} */</div><div id="337" class="line none">  337 </div><div id="338" class="line none">  338 /** \name Anycast address list basic routines */</div><div id="339" class="line none">  339 /** @{ */</div><div id="340" class="line none">  340 <a href="uip-ds6.h.html#222">uip_ds6_aaddr_t</a> *uip_ds6_aaddr_add(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="341" class="line none">  341 void uip_ds6_aaddr_rm(<a href="uip-ds6.h.html#222">uip_ds6_aaddr_t</a> *aaddr);</div><div id="342" class="line none">  342 <a href="uip-ds6.h.html#222">uip_ds6_aaddr_t</a> *uip_ds6_aaddr_lookup(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="343" class="line none">  343 </div><div id="344" class="line none">  344 /** @} */</div><div id="345" class="line none">  345 </div><div id="346" class="line none">  346 </div><div id="347" class="line none">  347 /** \brief set the last 64 bits of an IP address based on the MAC address */</div><div id="348" class="line none">  348 void uip_ds6_set_addr_iid(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>, const <a href="uip.h.html#138">uip_lladdr_t</a> *<a href="../nbr-table.h.html#93">lladdr</a>);</div><div id="349" class="line none">  349 </div><div id="350" class="line none">  350 /** \brief Build a link-layer address from an IPv6 address based on its UUID64 */</div><div id="351" class="line none">  351 void uip_ds6_set_lladdr_from_iid(<a href="uip.h.html#138">uip_lladdr_t</a> *<a href="../nbr-table.h.html#93">lladdr</a>, const <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="352" class="line none">  352 </div><div id="353" class="line none">  353 /** \brief Get the number of matching bits of two addresses */</div><div id="354" class="line none">  354 uint8_t get_match_length(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip.h.html#1428">src</a>, <a href="uip.h.html#105">uip_ipaddr_t</a> *dst);</div><div id="355" class="line none">  355 </div><div id="356" class="line none">  356 #if <a href="uip-nd6.h.html#142">UIP_ND6_DEF_MAXDADNS</a> &gt;0</div><div id="357" class="line none">  357 /** \brief Perform Duplicate Address Selection on one address */</div><div id="358" class="line none">  358 void uip_ds6_dad(<a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *ifaddr);</div><div id="359" class="line none">  359 </div><div id="360" class="line none">  360 /** \brief Callback when DAD failed */</div><div id="361" class="line none">  361 int uip_ds6_dad_failed(<a href="uip-ds6.h.html#216">uip_ds6_addr_t</a> *ifaddr);</div><div id="362" class="line none">  362 #endif /* UIP_ND6_DEF_MAXDADNS */</div><div id="363" class="line none">  363 </div><div id="364" class="line none">  364 /** \brief Source address selection, see RFC 3484 */</div><div id="365" class="line none">  365 void <a href="uip-ds6.h.html#365">uip_ds6_select_src</a>(<a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip.h.html#1428">src</a>, <a href="uip.h.html#105">uip_ipaddr_t</a> *dst);</div><div id="366" class="line none">  366 </div><div id="367" class="line none">  367 #if UIP_CONF_ROUTER</div><div id="368" class="line none">  368 #if <a href="uip-nd6.h.html#85">UIP_ND6_SEND_RA</a></div><div id="369" class="line none">  369 /** \brief Send a RA as an asnwer to a RS */</div><div id="370" class="line none">  370 void <a href="uip-ds6.h.html#370">uip_ds6_send_ra_sollicited</a>(void);</div><div id="371" class="line none">  371 </div><div id="372" class="line none">  372 /** \brief Send a periodic RA */</div><div id="373" class="line none">  373 void uip_ds6_send_ra_periodic(void);</div><div id="374" class="line none">  374 #endif /* UIP_ND6_SEND_RA */</div><div id="375" class="line none">  375 #else /* UIP_CONF_ROUTER */</div><div id="376" class="line none">  376 /** \brief Send periodic RS to find router */</div><div id="377" class="line none">  377 void uip_ds6_send_rs(void);</div><div id="378" class="line none">  378 #endif /* UIP_CONF_ROUTER */</div><div id="379" class="line none">  379 </div><div id="380" class="line none">  380 /** \brief Compute the reachable time based on base reachable time, see RFC 4861*/</div><div id="381" class="line none">  381 uint32_t uip_ds6_compute_reachable_time(void); /** \brief compute random reachable timer */</div><div id="382" class="line none">  382 </div><div id="383" class="line none">  383 /** \name Macros to check if an IP address (unicast, multicast or anycast) is mine */</div><div id="384" class="line none">  384 /** @{ */</div><div id="385" class="line none">  385 #define <a href="uip-ds6.h.html#385">uip_ds6_is_my_addr</a>(<a href="uip-nd6.c.html#107">addr</a>)  (<a href="uip-ds6.h.html#324">uip_ds6_addr_lookup</a>(<a href="uip-nd6.c.html#107">addr</a>) != NULL)</div><div id="386" class="line none">  386 #define <a href="uip-ds6.h.html#386">uip_ds6_is_my_maddr</a>(<a href="uip-nd6.c.html#107">addr</a>) (uip_ds6_maddr_lookup(<a href="uip-nd6.c.html#107">addr</a>) != NULL)</div><div id="387" class="line none">  387 #define <a href="uip-ds6.h.html#387">uip_ds6_is_my_aaddr</a>(<a href="uip-nd6.c.html#107">addr</a>) (uip_ds6_aaddr_lookup(<a href="uip-nd6.c.html#107">addr</a>) != NULL)</div><div id="388" class="line none">  388 /** @} */</div><div id="389" class="line none">  389 </div><div id="390" class="line none">  390 #endif /* UIP_DS6_H_ */</div>
</div>
</body>
</html>
