
<html>
<head>
<title>os/net/routing/rpl-classic/rpl.h</title>
<link rel="stylesheet" type="text/css" href="../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * Copyright (c) 2010, Swedish Institute of Computer Science.</div><div id="3" class="line none">    3  * All rights reserved.</div><div id="4" class="line none">    4  *</div><div id="5" class="line none">    5  * Redistribution and use in source and binary forms, with or without</div><div id="6" class="line none">    6  * modification, are permitted provided that the following conditions</div><div id="7" class="line none">    7  * are met:</div><div id="8" class="line none">    8  * 1. Redistributions of source code must retain the above copyright</div><div id="9" class="line none">    9  *    notice, this list of conditions and the following disclaimer.</div><div id="10" class="line none">   10  * 2. Redistributions in binary form must reproduce the above copyright</div><div id="11" class="line none">   11  *    notice, this list of conditions and the following disclaimer in the</div><div id="12" class="line none">   12  *    documentation and/or other materials provided with the distribution.</div><div id="13" class="line none">   13  * 3. Neither the name of the Institute nor the names of its contributors</div><div id="14" class="line none">   14  *    may be used to endorse or promote products derived from this software</div><div id="15" class="line none">   15  *    without specific prior written permission.</div><div id="16" class="line none">   16  *</div><div id="17" class="line none">   17  * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND</div><div id="18" class="line none">   18  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</div><div id="19" class="line none">   19  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</div><div id="20" class="line none">   20  * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE</div><div id="21" class="line none">   21  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</div><div id="22" class="line none">   22  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</div><div id="23" class="line none">   23  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</div><div id="24" class="line none">   24  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</div><div id="25" class="line none">   25  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</div><div id="26" class="line none">   26  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</div><div id="27" class="line none">   27  * SUCH DAMAGE.</div><div id="28" class="line none">   28  */</div><div id="29" class="line none">   29 </div><div id="30" class="line none">   30 /*</div><div id="31" class="line none">   31  * \file</div><div id="32" class="line none">   32  *      Public API declarations for ContikiRPL.</div><div id="33" class="line none">   33  * \author</div><div id="34" class="line none">   34  *      Joakim Eriksson &lt;joakime@sics.se&gt; &amp; Nicolas Tsiftes &lt;nvt@sics.se&gt;</div><div id="35" class="line none">   35  */</div><div id="36" class="line none">   36 </div><div id="37" class="line none">   37 #ifndef <a href="rpl.h.html#38">RPL_H</a></div><div id="38" class="line none">   38 #define <a href="rpl.h.html#38">RPL_H</a></div><div id="39" class="line none">   39 </div><div id="40" class="line none">   40 #include "net/routing/rpl-classic/rpl-conf.h"</div><div id="41" class="line none">   41 </div><div id="42" class="line none">   42 #include "lib/list.h"</div><div id="43" class="line none">   43 #include "net/ipv6/uip.h"</div><div id="44" class="line none">   44 #include "net/ipv6/uip-ds6.h"</div><div id="45" class="line none">   45 #include "sys/ctimer.h"</div><div id="46" class="line none">   46 </div><div id="47" class="line none">   47 /*---------------------------------------------------------------------------*/</div><div id="48" class="line none">   48 typedef uint16_t <a href="rpl.h.html#48">rpl_rank_t</a>;</div><div id="49" class="line none">   49 typedef uint16_t <a href="rpl.h.html#49">rpl_ocp_t</a>;</div><div id="50" class="line none">   50 /*---------------------------------------------------------------------------*/</div><div id="51" class="line none">   51 /* IANA Routing Metric/Constraint Type as defined in RFC6551. */</div><div id="52" class="line none">   52 #define <a href="rpl.h.html#52">RPL_DAG_MC_NONE</a>                 0 /* Local identifier for empty MC */</div><div id="53" class="line none">   53 #define <a href="rpl.h.html#53">RPL_DAG_MC_NSA</a>                  1 /* Node State and Attributes */</div><div id="54" class="line none">   54 #define <a href="rpl.h.html#54">RPL_DAG_MC_ENERGY</a>               2 /* Node Energy */</div><div id="55" class="line none">   55 #define <a href="rpl.h.html#55">RPL_DAG_MC_HOPCOUNT</a>             3 /* Hop Count */</div><div id="56" class="line none">   56 #define <a href="rpl.h.html#56">RPL_DAG_MC_THROUGHPUT</a>           4 /* Throughput */</div><div id="57" class="line none">   57 #define <a href="rpl.h.html#57">RPL_DAG_MC_LATENCY</a>              5 /* Latency */</div><div id="58" class="line none">   58 #define <a href="rpl.h.html#58">RPL_DAG_MC_LQL</a>                  6 /* Link Quality Level */</div><div id="59" class="line none">   59 #define <a href="rpl.h.html#59">RPL_DAG_MC_ETX</a>                  7 /* Expected Transmission Count */</div><div id="60" class="line none">   60 #define <a href="rpl.h.html#60">RPL_DAG_MC_LC</a>                   8 /* Link Color */</div><div id="61" class="line none">   61 </div><div id="62" class="line none">   62 /* IANA Routing Metric/Constraint Common Header Flag field as defined</div><div id="63" class="line none">   63    in RFC6551. (bit indexes) */</div><div id="64" class="line none">   64 #define <a href="rpl.h.html#64">RPL_DAG_MC_FLAG_P</a>               5</div><div id="65" class="line none">   65 #define <a href="rpl.h.html#65">RPL_DAG_MC_FLAG_C</a>               6</div><div id="66" class="line none">   66 #define <a href="rpl.h.html#66">RPL_DAG_MC_FLAG_O</a>               7</div><div id="67" class="line none">   67 #define <a href="rpl.h.html#67">RPL_DAG_MC_FLAG_R</a>               8</div><div id="68" class="line none">   68 </div><div id="69" class="line none">   69 /* IANA Routing Metric/Constraint Common Header A Field as defined in</div><div id="70" class="line none">   70    RFC6551. */</div><div id="71" class="line none">   71 #define <a href="rpl.h.html#71">RPL_DAG_MC_AGGR_ADDITIVE</a>        0</div><div id="72" class="line none">   72 #define <a href="rpl.h.html#72">RPL_DAG_MC_AGGR_MAXIMUM</a>         1</div><div id="73" class="line none">   73 #define <a href="rpl.h.html#73">RPL_DAG_MC_AGGR_MINIMUM</a>         2</div><div id="74" class="line none">   74 #define <a href="rpl.h.html#74">RPL_DAG_MC_AGGR_MULTIPLICATIVE</a>  3</div><div id="75" class="line none">   75 </div><div id="76" class="line none">   76 /* The bit index within the flags field of the</div><div id="77" class="line none">   77    rpl_metric_object_energy structure. */</div><div id="78" class="line none">   78 #define <a href="rpl.h.html#78">RPL_DAG_MC_ENERGY_INCLUDED</a>      3</div><div id="79" class="line none">   79 #define <a href="rpl.h.html#79">RPL_DAG_MC_ENERGY_TYPE</a>          1</div><div id="80" class="line none">   80 #define <a href="rpl.h.html#80">RPL_DAG_MC_ENERGY_ESTIMATION</a>    0</div><div id="81" class="line none">   81 </div><div id="82" class="line none">   82 /* IANA Node Type Field as defined in RFC6551. */</div><div id="83" class="line none">   83 #define <a href="rpl.h.html#83">RPL_DAG_MC_ENERGY_TYPE_MAINS</a>      0</div><div id="84" class="line none">   84 #define <a href="rpl.h.html#84">RPL_DAG_MC_ENERGY_TYPE_BATTERY</a>    1</div><div id="85" class="line none">   85 #define <a href="rpl.h.html#85">RPL_DAG_MC_ENERGY_TYPE_SCAVENGING</a> 2</div><div id="86" class="line none">   86 </div><div id="87" class="line none">   87 /* IANA Objective Code Point as defined in RFC6550. */</div><div id="88" class="line none">   88 #define <a href="rpl.h.html#88">RPL_OCP_OF0</a>     0</div><div id="89" class="line none">   89 #define <a href="rpl.h.html#89">RPL_OCP_MRHOF</a>   1</div><div id="90" class="line none">   90 </div><div id="91" class="line none">   91 struct <a href="rpl.h.html#91">rpl_metric_object_energy</a> {</div><div id="92" class="line none">   92   uint8_t <a href="../../ipv6/uip.h.html#1630">flags</a>;</div><div id="93" class="line none">   93   uint8_t <a href="rpl.h.html#93">energy_est</a>;</div><div id="94" class="line none">   94 };</div><div id="95" class="line none">   95 </div><div id="96" class="line none">   96 /* Logical representation of a DAG Metric Container. */</div><div id="97" class="line none">   97 struct <a href="rpl.h.html#97">rpl_metric_container</a> {</div><div id="98" class="line none">   98   uint8_t <a href="../../ipv6/uip-ds6.h.html#209">type</a>;</div><div id="99" class="line none">   99   uint8_t <a href="../../ipv6/uip.h.html#1630">flags</a>;</div><div id="100" class="line none">  100   uint8_t <a href="rpl.h.html#100">aggr</a>;</div><div id="101" class="line none">  101   uint8_t <a href="rpl.h.html#101">prec</a>;</div><div id="102" class="line none">  102   uint8_t <a href="../../ipv6/uip-ds6-route.h.html#183">length</a>;</div><div id="103" class="line none">  103   union <a href="rpl.h.html#103">metric_object</a> {</div><div id="104" class="line none">  104     struct <a href="rpl.h.html#91">rpl_metric_object_energy</a> <a href="rpl.h.html#104">energy</a>;</div><div id="105" class="line none">  105     uint16_t <a href="rpl.h.html#105">etx</a>;</div><div id="106" class="line none">  106   } <a href="rpl.h.html#106">obj</a>;</div><div id="107" class="line none">  107 };</div><div id="108" class="line none">  108 typedef struct <a href="rpl.h.html#97">rpl_metric_container</a> <a href="rpl.h.html#108">rpl_metric_container_t</a>;</div><div id="109" class="line none">  109 /*---------------------------------------------------------------------------*/</div><div id="110" class="line none">  110 struct <a href="rpl.h.html#110">rpl_instance</a>;</div><div id="111" class="line none">  111 struct <a href="../../ipv6/uip-ds6-route.h.html#154">rpl_dag</a>;</div><div id="112" class="line none">  112 /*---------------------------------------------------------------------------*/</div><div id="113" class="line none">  113 #define <a href="rpl.h.html#113">RPL_PARENT_FLAG_UPDATED</a>           0x1</div><div id="114" class="line none">  114 #define <a href="rpl.h.html#114">RPL_PARENT_FLAG_LINK_METRIC_VALID</a> 0x2</div><div id="115" class="line none">  115 </div><div id="116" class="line none">  116 struct <a href="rpl.h.html#116">rpl_parent</a> {</div><div id="117" class="line none">  117   struct <a href="../../ipv6/uip-ds6-route.h.html#154">rpl_dag</a> *<a href="../../ipv6/uip-ds6-route.h.html#157">dag</a>;</div><div id="118" class="line none">  118 #if RPL_WITH_MC</div><div id="119" class="line none">  119   <a href="rpl.h.html#108">rpl_metric_container_t</a> <a href="rpl-private.h.html#247">mc</a>;</div><div id="120" class="line none">  120 #endif /* RPL_WITH_MC */</div><div id="121" class="line none">  121   <a href="rpl.h.html#48">rpl_rank_t</a> <a href="rpl-private.h.html#231">rank</a>;</div><div id="122" class="line none">  122   uint8_t <a href="rpl-private.h.html#237">dtsn</a>;</div><div id="123" class="line none">  123   uint8_t <a href="../../ipv6/uip.h.html#1630">flags</a>;</div><div id="124" class="line none">  124 };</div><div id="125" class="line none">  125 typedef struct <a href="rpl.h.html#116">rpl_parent</a> <a href="rpl.h.html#125">rpl_parent_t</a>;</div><div id="126" class="line none">  126 /*---------------------------------------------------------------------------*/</div><div id="127" class="line none">  127 /* RPL DIO prefix suboption. */</div><div id="128" class="line none">  128 struct <a href="rpl.h.html#128">rpl_prefix</a> {</div><div id="129" class="line none">  129   <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> <a href="rpl.h.html#129">prefix</a>;</div><div id="130" class="line none">  130   uint32_t <a href="../../ipv6/uip-ds6-route.h.html#156">lifetime</a>;</div><div id="131" class="line none">  131   uint8_t <a href="../../ipv6/uip-ds6-route.h.html#183">length</a>;</div><div id="132" class="line none">  132   uint8_t <a href="../../ipv6/uip.h.html#1630">flags</a>;</div><div id="133" class="line none">  133 };</div><div id="134" class="line none">  134 typedef struct <a href="rpl.h.html#128">rpl_prefix</a> <a href="rpl.h.html#134">rpl_prefix_t</a>;</div><div id="135" class="line none">  135 /*---------------------------------------------------------------------------*/</div><div id="136" class="line none">  136 /* Destination-Oriented Directed Acyclic Graph (DODAG). This name is</div><div id="137" class="line none">  137    typically shortened to "DAG" within the ContikiRPL implementation. */</div><div id="138" class="line none">  138 struct <a href="../../ipv6/uip-ds6-route.h.html#154">rpl_dag</a> {</div><div id="139" class="line none">  139   <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> <a href="rpl-private.h.html#229">dag_id</a>;</div><div id="140" class="line none">  140   <a href="rpl.h.html#48">rpl_rank_t</a> <a href="rpl.h.html#140">min_rank</a>; /* should be reset per DAG iteration! */</div><div id="141" class="line none">  141   uint8_t <a href="rpl-private.h.html#235">version</a>;</div><div id="142" class="line none">  142   uint8_t <a href="rpl-private.h.html#232">grounded</a>;</div><div id="143" class="line none">  143   uint8_t <a href="rpl-private.h.html#234">preference</a>;</div><div id="144" class="line none">  144   uint8_t <a href="rpl.h.html#144">used</a>;</div><div id="145" class="line none">  145   /* live data for the DAG */</div><div id="146" class="line none">  146   uint8_t <a href="rpl.h.html#146">joined</a>;</div><div id="147" class="line none">  147   <a href="rpl.h.html#125">rpl_parent_t</a> *<a href="rpl.h.html#147">preferred_parent</a>;</div><div id="148" class="line none">  148   <a href="rpl.h.html#48">rpl_rank_t</a> <a href="rpl-private.h.html#231">rank</a>;</div><div id="149" class="line none">  149   struct <a href="rpl.h.html#110">rpl_instance</a> *<a href="../../ipv6/uip.h.html#1631">instance</a>;</div><div id="150" class="line none">  150   <a href="rpl.h.html#134">rpl_prefix_t</a> <a href="rpl-private.h.html#246">prefix_info</a>;</div><div id="151" class="line none">  151   uint32_t <a href="../../ipv6/uip-ds6-route.h.html#156">lifetime</a>;</div><div id="152" class="line none">  152 };</div><div id="153" class="line none">  153 typedef struct <a href="../../ipv6/uip-ds6-route.h.html#154">rpl_dag</a> <a href="rpl.h.html#153">rpl_dag_t</a>;</div><div id="154" class="line none">  154 typedef struct <a href="rpl.h.html#110">rpl_instance</a> <a href="rpl.h.html#154">rpl_instance_t</a>;</div><div id="155" class="line none">  155 /*---------------------------------------------------------------------------*/</div><div id="156" class="line none">  156 /*</div><div id="157" class="line none">  157  * API for RPL objective functions (OF)</div><div id="158" class="line none">  158  *</div><div id="159" class="line none">  159  * reset(dag)</div><div id="160" class="line none">  160  *</div><div id="161" class="line none">  161  *  Resets the objective function state for a specific DAG. This function is</div><div id="162" class="line none">  162  *  called when doing a global repair on the DAG.</div><div id="163" class="line none">  163  *</div><div id="164" class="line none">  164  * parent_link_metric(parent)</div><div id="165" class="line none">  165  *</div><div id="166" class="line none">  166  *  Returns the link metric of a parent.</div><div id="167" class="line none">  167  *</div><div id="168" class="line none">  168  * parent_has_usable_link(parent)</div><div id="169" class="line none">  169  *</div><div id="170" class="line none">  170  *  Returns 1 iff we have a usable link to this parent.</div><div id="171" class="line none">  171  *</div><div id="172" class="line none">  172  * parent_path_cost(parent)</div><div id="173" class="line none">  173  *</div><div id="174" class="line none">  174  *  Returns the path cost of a parent.</div><div id="175" class="line none">  175  *</div><div id="176" class="line none">  176  * rank_via_parent(parent)</div><div id="177" class="line none">  177  *</div><div id="178" class="line none">  178  *  Returns our rank if we select a given parent as preferred parent.</div><div id="179" class="line none">  179  *</div><div id="180" class="line none">  180  * parent_is_acceptable</div><div id="181" class="line none">  181  *</div><div id="182" class="line none">  182  *  Returns 1 if a parent is usable as preferred parent, 0 otherwise.</div><div id="183" class="line none">  183  *</div><div id="184" class="line none">  184  * best_parent(parent1, parent2)</div><div id="185" class="line none">  185  *</div><div id="186" class="line none">  186  *  Compares two parents and returns the best one, according to the OF.</div><div id="187" class="line none">  187  *</div><div id="188" class="line none">  188  * best_dag(dag1, dag2)</div><div id="189" class="line none">  189  *</div><div id="190" class="line none">  190  *  Compares two DAGs and returns the best one, according to the OF.</div><div id="191" class="line none">  191  *</div><div id="192" class="line none">  192  * update_metric_container(dag)</div><div id="193" class="line none">  193  *</div><div id="194" class="line none">  194  *  Updates the metric container for outgoing DIOs in a certain DAG.</div><div id="195" class="line none">  195  *  If the objective function of the DAG does not use metric containers,</div><div id="196" class="line none">  196  *  the function should set the object type to RPL_DAG_MC_NONE.</div><div id="197" class="line none">  197  *</div><div id="198" class="line none">  198  * dao_ack_callback(parent, status)</div><div id="199" class="line none">  199  *</div><div id="200" class="line none">  200  * A callback on the result of the DAO ACK. Similar to the neighbor link</div><div id="201" class="line none">  201  * callback. A failed DAO_ACK (NACK) can be used for switching to another</div><div id="202" class="line none">  202  * parent via changed link metric or other mechanisms.</div><div id="203" class="line none">  203  */</div><div id="204" class="line none">  204 struct <a href="rpl.h.html#204">rpl_of</a> {</div><div id="205" class="line none">  205   void (*<a href="rpl.h.html#205">reset</a>)(struct <a href="../../ipv6/uip-ds6-route.h.html#154">rpl_dag</a> *);</div><div id="206" class="line none">  206 #if RPL_WITH_DAO_ACK</div><div id="207" class="line none">  207   void (*<a href="rpl.h.html#207">dao_ack_callback</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *, int status);</div><div id="208" class="line none">  208 #endif</div><div id="209" class="line none">  209   uint16_t (*<a href="rpl.h.html#209">parent_link_metric</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *);</div><div id="210" class="line none">  210   int (*<a href="rpl.h.html#210">parent_has_usable_link</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *);</div><div id="211" class="line none">  211   uint16_t (*<a href="rpl.h.html#211">parent_path_cost</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *);</div><div id="212" class="line none">  212   <a href="rpl.h.html#48">rpl_rank_t</a> (*<a href="rpl.h.html#212">rank_via_parent</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *);</div><div id="213" class="line none">  213   <a href="rpl.h.html#125">rpl_parent_t</a> *(*<a href="rpl.h.html#213">best_parent</a>)(<a href="rpl.h.html#125">rpl_parent_t</a> *, <a href="rpl.h.html#125">rpl_parent_t</a> *);</div><div id="214" class="line none">  214   <a href="rpl.h.html#153">rpl_dag_t</a> *(*<a href="rpl.h.html#214">best_dag</a>)(<a href="rpl.h.html#153">rpl_dag_t</a> *, <a href="rpl.h.html#153">rpl_dag_t</a> *);</div><div id="215" class="line none">  215   void (*<a href="rpl.h.html#215">update_metric_container</a>)( <a href="rpl.h.html#154">rpl_instance_t</a> *);</div><div id="216" class="line none">  216   <a href="rpl.h.html#49">rpl_ocp_t</a> <a href="rpl-private.h.html#230">ocp</a>;</div><div id="217" class="line none">  217 };</div><div id="218" class="line none">  218 typedef struct <a href="rpl.h.html#204">rpl_of</a> <a href="rpl.h.html#218">rpl_of_t</a>;</div><div id="219" class="line none">  219 </div><div id="220" class="line none">  220 /*---------------------------------------------------------------------------*/</div><div id="221" class="line none">  221 /* RPL Instance. */</div><div id="222" class="line none">  222 struct <a href="rpl.h.html#110">rpl_instance</a> {</div><div id="223" class="line none">  223   /* DAG configuration. */</div><div id="224" class="line none">  224   <a href="rpl.h.html#108">rpl_metric_container_t</a> <a href="rpl-private.h.html#247">mc</a>;</div><div id="225" class="line none">  225   <a href="rpl.h.html#218">rpl_of_t</a> *<a href="rpl.h.html#225">of</a>;</div><div id="226" class="line none">  226   <a href="rpl.h.html#153">rpl_dag_t</a> *<a href="rpl.h.html#226">current_dag</a>;</div><div id="227" class="line none">  227   <a href="rpl.h.html#153">rpl_dag_t</a> <a href="rpl.h.html#227">dag_table</a>[RPL_MAX_DAG_PER_INSTANCE];</div><div id="228" class="line none">  228   /* The current default router -- used for routing "upwards". */</div><div id="229" class="line none">  229   <a href="../../ipv6/uip-ds6-route.h.html#199">uip_ds6_defrt_t</a> *<a href="rpl.h.html#229">def_route</a>;</div><div id="230" class="line none">  230   uint8_t <a href="rpl-private.h.html#236">instance_id</a>;</div><div id="231" class="line none">  231   uint8_t <a href="rpl.h.html#144">used</a>;</div><div id="232" class="line none">  232   uint8_t <a href="rpl.h.html#232">dtsn_out</a>;</div><div id="233" class="line none">  233   uint8_t <a href="rpl-private.h.html#233">mop</a>;</div><div id="234" class="line none">  234   uint8_t <a href="rpl.h.html#234">dio_intdoubl</a>;</div><div id="235" class="line none">  235   uint8_t <a href="rpl.h.html#235">dio_intmin</a>;</div><div id="236" class="line none">  236   uint8_t <a href="rpl.h.html#236">dio_redundancy</a>;</div><div id="237" class="line none">  237   uint8_t <a href="rpl-private.h.html#241">default_lifetime</a>;</div><div id="238" class="line none">  238   uint8_t <a href="rpl.h.html#238">dio_intcurrent</a>;</div><div id="239" class="line none">  239   uint8_t <a href="rpl.h.html#239">dio_send</a>; /* For keeping track of which mode the timer is in. */</div><div id="240" class="line none">  240   uint8_t <a href="rpl.h.html#240">dio_counter</a>;</div><div id="241" class="line none">  241   /* My last registered DAO that I might be waiting for an ACK on. */</div><div id="242" class="line none">  242   uint8_t <a href="rpl.h.html#242">my_dao_seqno</a>;</div><div id="243" class="line none">  243   uint8_t <a href="rpl.h.html#243">my_dao_transmissions</a>;</div><div id="244" class="line none">  244   /* this is intended to keep track if this instance have a route downward */</div><div id="245" class="line none">  245   uint8_t <a href="rpl.h.html#245">has_downward_route</a>;</div><div id="246" class="line none">  246   <a href="rpl.h.html#48">rpl_rank_t</a> <a href="rpl.h.html#246">max_rankinc</a>;</div><div id="247" class="line none">  247   <a href="rpl.h.html#48">rpl_rank_t</a> <a href="rpl.h.html#247">min_hoprankinc</a>;</div><div id="248" class="line none">  248   uint16_t <a href="rpl-private.h.html#242">lifetime_unit</a>; /* Lifetime in seconds = l_u * d_l. */</div><div id="249" class="line none">  249 #if RPL_CONF_STATS</div><div id="250" class="line none">  250   uint16_t <a href="rpl.h.html#250">dio_totint</a>;</div><div id="251" class="line none">  251   uint16_t <a href="rpl.h.html#251">dio_totsend</a>;</div><div id="252" class="line none">  252   uint16_t <a href="rpl.h.html#252">dio_totrecv</a>;</div><div id="253" class="line none">  253 #endif /* RPL_CONF_STATS */</div><div id="254" class="line none">  254   <a href="../../../sys/clock.h.html#87">clock_time_t</a> <a href="rpl.h.html#254">dio_next_delay</a>; /* Delay for completion of the DIO interval. */</div><div id="255" class="line none">  255 #if RPL_WITH_PROBING</div><div id="256" class="line none">  256   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#256">probing_timer</a>;</div><div id="257" class="line none">  257   <a href="rpl.h.html#125">rpl_parent_t</a> *<a href="rpl.h.html#257">urgent_probing_target</a>;</div><div id="258" class="line none">  258   int <a href="rpl.h.html#258">last_dag</a>;</div><div id="259" class="line none">  259 #endif /* RPL_WITH_PROBING */</div><div id="260" class="line none">  260   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#260">dio_timer</a>;</div><div id="261" class="line none">  261   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#261">dao_timer</a>;</div><div id="262" class="line none">  262   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#262">dao_lifetime_timer</a>;</div><div id="263" class="line none">  263   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#263">unicast_dio_timer</a>;</div><div id="264" class="line none">  264   <a href="rpl.h.html#125">rpl_parent_t</a> *<a href="rpl.h.html#264">unicast_dio_target</a>;</div><div id="265" class="line none">  265 #if RPL_WITH_DAO_ACK</div><div id="266" class="line none">  266   struct <a href="../../../sys/ctimer.h.html#63">ctimer</a> <a href="rpl.h.html#266">dao_retransmit_timer</a>;</div><div id="267" class="line none">  267 #endif /* RPL_WITH_DAO_ACK */</div><div id="268" class="line none">  268 };</div><div id="269" class="line none">  269 </div><div id="270" class="line none">  270 /*---------------------------------------------------------------------------*/</div><div id="271" class="line none">  271 /* Public RPL functions. */</div><div id="272" class="line none">  272 void uip_rpl_input(void);</div><div id="273" class="line none">  273 <a href="rpl.h.html#153">rpl_dag_t</a> *rpl_set_root(uint8_t <a href="rpl-private.h.html#236">instance_id</a>, <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *<a href="rpl-private.h.html#229">dag_id</a>);</div><div id="274" class="line none">  274 int rpl_set_prefix(<a href="rpl.h.html#153">rpl_dag_t</a> *<a href="../../ipv6/uip-ds6-route.h.html#157">dag</a>, <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *<a href="rpl.h.html#129">prefix</a>, unsigned <a href="../../ipv6/uip.h.html#1268">len</a>);</div><div id="275" class="line none">  275 int rpl_repair_root(uint8_t <a href="rpl-private.h.html#236">instance_id</a>);</div><div id="276" class="line none">  276 int rpl_set_default_route(<a href="rpl.h.html#154">rpl_instance_t</a> *<a href="../../ipv6/uip.h.html#1631">instance</a>, <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *from);</div><div id="277" class="line none">  277 <a href="rpl.h.html#153">rpl_dag_t</a> *rpl_get_dag(const <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *<a href="../../ipv6/uip.h.html#113">addr</a>);</div><div id="278" class="line none">  278 <a href="rpl.h.html#153">rpl_dag_t</a> *<a href="rpl.h.html#278">rpl_get_any_dag</a>(void);</div><div id="279" class="line none">  279 <a href="rpl.h.html#154">rpl_instance_t</a> *<a href="rpl.h.html#279">rpl_get_instance</a>(uint8_t <a href="rpl-private.h.html#236">instance_id</a>);</div><div id="280" class="line none">  280 int rpl_ext_header_update(void);</div><div id="281" class="line none">  281 int rpl_ext_header_hbh_update(uint8_t *, int);</div><div id="282" class="line none">  282 void rpl_insert_header(void);</div><div id="283" class="line none">  283 bool rpl_ext_header_remove(void);</div><div id="284" class="line none">  284 const struct link_stats *rpl_get_parent_link_stats(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="285" class="line none">  285 int rpl_parent_is_fresh(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="286" class="line none">  286 int rpl_parent_is_reachable(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="287" class="line none">  287 uint16_t rpl_get_parent_link_metric(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="288" class="line none">  288 <a href="rpl.h.html#48">rpl_rank_t</a> rpl_rank_via_parent(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="289" class="line none">  289 const <a href="../../linkaddr.h.html#71">linkaddr_t</a> *rpl_get_parent_lladdr(<a href="rpl.h.html#125">rpl_parent_t</a> *<a href="../../../sys/ctimer.h.html#66">p</a>);</div><div id="290" class="line none">  290 <a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *<a href="rpl.h.html#290">rpl_parent_get_ipaddr</a>(<a href="rpl.h.html#125">rpl_parent_t</a> *nbr);</div><div id="291" class="line none">  291 <a href="rpl.h.html#125">rpl_parent_t</a> *rpl_get_parent(const <a href="../../ipv6/uip.h.html#138">uip_lladdr_t</a> *<a href="../../ipv6/uip.h.html#113">addr</a>);</div><div id="292" class="line none">  292 <a href="rpl.h.html#48">rpl_rank_t</a> rpl_get_parent_rank(<a href="../../ipv6/uip.h.html#138">uip_lladdr_t</a> *<a href="../../ipv6/uip.h.html#113">addr</a>);</div><div id="293" class="line none">  293 void rpl_dag_init(void);</div><div id="294" class="line none">  294 <a href="../../ipv6/uip-ds6-nbr.h.html#122">uip_ds6_nbr_t</a> *rpl_get_nbr(<a href="rpl.h.html#125">rpl_parent_t</a> *parent);</div><div id="295" class="line none">  295 void rpl_print_neighbor_list(void);</div><div id="296" class="line none">  296 int rpl_ext_header_srh_update(void);</div><div id="297" class="line none">  297 int rpl_ext_header_srh_get_next_hop(<a href="../../ipv6/uip.h.html#105">uip_ipaddr_t</a> *<a href="../../ipv6/uip-ds6-nbr.h.html#110">ipaddr</a>);</div><div id="298" class="line none">  298 void rpl_link_callback(const <a href="../../linkaddr.h.html#71">linkaddr_t</a> *<a href="../../ipv6/uip.h.html#113">addr</a>, int status, int numtx);</div><div id="299" class="line none">  299 /* Per-parent RPL information */</div><div id="300" class="line none">  300 <a href="../../nbr-table.h.html#109">NBR_TABLE_DECLARE</a>(rpl_parents);</div><div id="301" class="line none">  301 </div><div id="302" class="line none">  302 /**</div><div id="303" class="line none">  303  * RPL modes</div><div id="304" class="line none">  304  *</div><div id="305" class="line none">  305  * The RPL module can be in either of three modes: mesh mode</div><div id="306" class="line none">  306  * (RPL_MODE_MESH), feater mode (RPL_MODE_FEATHER), and leaf mode</div><div id="307" class="line none">  307  * (RPL_MODE_LEAF). In mesh mode, nodes forward data for other nodes,</div><div id="308" class="line none">  308  * and are reachable by others. In feather mode, nodes can forward</div><div id="309" class="line none">  309  * data for other nodes, but are not reachable themselves. In leaf</div><div id="310" class="line none">  310  * mode, nodes do not forward data for others, but are reachable by</div><div id="311" class="line none">  311  * others. */</div><div id="312" class="line none">  312 enum <a href="rpl.h.html#312">rpl_mode</a> {</div><div id="313" class="line none">  313   <a href="rpl.h.html#313">RPL_MODE_MESH</a> = 0,</div><div id="314" class="line none">  314   <a href="rpl.h.html#314">RPL_MODE_FEATHER</a> = 1,</div><div id="315" class="line none">  315   <a href="rpl.h.html#315">RPL_MODE_LEAF</a> = 2,</div><div id="316" class="line none">  316 };</div><div id="317" class="line none">  317 </div><div id="318" class="line none">  318 /**</div><div id="319" class="line none">  319  * Set the RPL mode.</div><div id="320" class="line none">  320  *</div><div id="321" class="line none">  321  * \param mode The new RPL mode.</div><div id="322" class="line none">  322  * \retval The previous RPL mode.</div><div id="323" class="line none">  323  */</div><div id="324" class="line none">  324 enum <a href="rpl.h.html#312">rpl_mode</a> rpl_set_mode(enum <a href="rpl.h.html#312">rpl_mode</a> mode);</div><div id="325" class="line none">  325 </div><div id="326" class="line none">  326 /**</div><div id="327" class="line none">  327  * Get the RPL mode.</div><div id="328" class="line none">  328  *</div><div id="329" class="line none">  329  * \retval The RPL mode.</div><div id="330" class="line none">  330  */</div><div id="331" class="line none">  331 enum <a href="rpl.h.html#312">rpl_mode</a> <a href="rpl.h.html#331">rpl_get_mode</a>(void);</div><div id="332" class="line none">  332 </div><div id="333" class="line none">  333 /**</div><div id="334" class="line none">  334  * Tells whether the node has joined a network or not.</div><div id="335" class="line none">  335  *</div><div id="336" class="line none">  336  * \retval 1 if we have joined a network, 0 if not.</div><div id="337" class="line none">  337  */</div><div id="338" class="line none">  338 int rpl_has_joined(void);</div><div id="339" class="line none">  339 </div><div id="340" class="line none">  340 /**</div><div id="341" class="line none">  341  * Get the RPL's best guess on if we have downward route or not.</div><div id="342" class="line none">  342  *</div><div id="343" class="line none">  343  * \retval 1 if we have a downward route from RPL Root, 0 if not.</div><div id="344" class="line none">  344  */</div><div id="345" class="line none">  345 int rpl_has_downward_route(void);</div><div id="346" class="line none">  346 </div><div id="347" class="line none">  347 /**</div><div id="348" class="line none">  348  * Tells whether the protocol is in leaf mode.</div><div id="349" class="line none">  349  *</div><div id="350" class="line none">  350  * \retval 1 if the protocol is in leaf mode, 0 if not.</div><div id="351" class="line none">  351  */</div><div id="352" class="line none">  352 uint8_t rpl_is_in_leaf_mode(void);</div><div id="353" class="line none">  353 </div><div id="354" class="line none">  354 /*---------------------------------------------------------------------------*/</div><div id="355" class="line none">  355 #endif /* RPL_H */</div>
</div>
</body>
</html>
