
<html>
<head>
<title>os/net/ipv6/uip.h</title>
<link rel="stylesheet" type="text/css" href="../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * Copyright (c) 2001-2003, Adam Dunkels.</div><div id="3" class="line none">    3  * All rights reserved.</div><div id="4" class="line none">    4  *</div><div id="5" class="line none">    5  * Redistribution and use in source and binary forms, with or without</div><div id="6" class="line none">    6  * modification, are permitted provided that the following conditions</div><div id="7" class="line none">    7  * are met:</div><div id="8" class="line none">    8  * 1. Redistributions of source code must retain the above copyright</div><div id="9" class="line none">    9  *    notice, this list of conditions and the following disclaimer.</div><div id="10" class="line none">   10  * 2. Redistributions in binary form must reproduce the above copyright</div><div id="11" class="line none">   11  *    notice, this list of conditions and the following disclaimer in the</div><div id="12" class="line none">   12  *    documentation and/or other materials provided with the distribution.</div><div id="13" class="line none">   13  * 3. The name of the author may not be used to endorse or promote</div><div id="14" class="line none">   14  *    products derived from this software without specific prior</div><div id="15" class="line none">   15  *    written permission.</div><div id="16" class="line none">   16  *</div><div id="17" class="line none">   17  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS</div><div id="18" class="line none">   18  * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED</div><div id="19" class="line none">   19  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</div><div id="20" class="line none">   20  * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY</div><div id="21" class="line none">   21  * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</div><div id="22" class="line none">   22  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE</div><div id="23" class="line none">   23  * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</div><div id="24" class="line none">   24  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</div><div id="25" class="line none">   25  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</div><div id="26" class="line none">   26  * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</div><div id="27" class="line none">   27  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</div><div id="28" class="line none">   28  *</div><div id="29" class="line none">   29  * This file is part of the uIP TCP/IP stack.</div><div id="30" class="line none">   30  *</div><div id="31" class="line none">   31  *</div><div id="32" class="line none">   32  */</div><div id="33" class="line none">   33 </div><div id="34" class="line none">   34 /**</div><div id="35" class="line none">   35  * \addtogroup uip</div><div id="36" class="line none">   36  * @{</div><div id="37" class="line none">   37  */</div><div id="38" class="line none">   38 </div><div id="39" class="line none">   39 /**</div><div id="40" class="line none">   40  * \file</div><div id="41" class="line none">   41  * Header file for the uIP TCP/IP stack.</div><div id="42" class="line none">   42  * \author  Adam Dunkels &lt;adam@dunkels.com&gt;</div><div id="43" class="line none">   43  * \author  Julien Abeille &lt;jabeille@cisco.com&gt; (IPv6 related code)</div><div id="44" class="line none">   44  * \author  Mathilde Durvy &lt;mdurvy@cisco.com&gt; (IPv6 related code)</div><div id="45" class="line none">   45  *</div><div id="46" class="line none">   46  * The uIP TCP/IP stack header file contains definitions for a number</div><div id="47" class="line none">   47  * of C macros that are used by uIP programs as well as internal uIP</div><div id="48" class="line none">   48  * structures, TCP/IP header structures and function declarations.</div><div id="49" class="line none">   49  *</div><div id="50" class="line none">   50  */</div><div id="51" class="line none">   51 </div><div id="52" class="line none">   52 #ifndef <a href="uip.h.html#53">UIP_H_</a></div><div id="53" class="line none">   53 #define <a href="uip.h.html#53">UIP_H_</a></div><div id="54" class="line none">   54 </div><div id="55" class="line none">   55 /* Header sizes. */</div><div id="56" class="line none">   56 #define <a href="uip.h.html#56">UIP_IPH_LEN</a>    40</div><div id="57" class="line none">   57 #define <a href="uip.h.html#57">UIP_FRAGH_LEN</a>  8</div><div id="58" class="line none">   58 </div><div id="59" class="line none">   59 #define <a href="uip.h.html#59">UIP_UDPH_LEN</a>    8    /* Size of UDP header */</div><div id="60" class="line none">   60 #define <a href="uip.h.html#60">UIP_TCPH_LEN</a>   20    /* Size of TCP header */</div><div id="61" class="line none">   61 #define <a href="uip.h.html#61">UIP_ICMPH_LEN</a>   4    /* Size of ICMP header */</div><div id="62" class="line none">   62 </div><div id="63" class="line none">   63 #define <a href="uip.h.html#63">UIP_IPUDPH_LEN</a> (<a href="uip.h.html#59">UIP_UDPH_LEN</a> + <a href="uip.h.html#56">UIP_IPH_LEN</a>)   /* Size of IP + UDP header */</div><div id="64" class="line none">   64 #define <a href="uip.h.html#64">UIP_IPTCPH_LEN</a> (<a href="uip.h.html#60">UIP_TCPH_LEN</a> + <a href="uip.h.html#56">UIP_IPH_LEN</a>)   /* Size of IP + TCP header */</div><div id="65" class="line none">   65 </div><div id="66" class="line none">   66 #define <a href="uip.h.html#66">uip_l3_icmp_hdr_len</a> (<a href="uip.h.html#56">UIP_IPH_LEN</a> + <a href="uip.h.html#1237">uip_ext_len</a> + <a href="uip.h.html#61">UIP_ICMPH_LEN</a>)</div><div id="67" class="line none">   67 </div><div id="68" class="line none">   68 /**</div><div id="69" class="line none">   69  * Direct access to IPv6 header</div><div id="70" class="line none">   70  */</div><div id="71" class="line none">   71 #define <a href="uip.h.html#71">UIP_IP_BUF</a>                             ((struct <a href="uipbuf.h.html#37">uip_ip_hdr</a> *)<a href="uip.h.html#465">uip_buf</a>)</div><div id="72" class="line none">   72 #define <a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(ext)                        ((unsigned char *)<a href="uip.h.html#465">uip_buf</a> + <a href="uip.h.html#56">UIP_IPH_LEN</a> + (ext))</div><div id="73" class="line none">   73 </div><div id="74" class="line none">   74 /**</div><div id="75" class="line none">   75  * Direct access to ICMP, UDP, and TCP headers and payload, with implicit ext header offset (global uip_ext_len)</div><div id="76" class="line none">   76  */</div><div id="77" class="line none">   77 #define <a href="uip.h.html#77">UIP_ICMP_BUF</a>                         ((struct <a href="uip.h.html#1650">uip_icmp_hdr</a> *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>))</div><div id="78" class="line none">   78 #define <a href="uip.h.html#78">UIP_ICMP_PAYLOAD</a>                           ((unsigned char *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>) + <a href="uip.h.html#61">UIP_ICMPH_LEN</a>)</div><div id="79" class="line none">   79 #define <a href="uip.h.html#79">UIP_UDP_BUF</a>                           ((struct <a href="uip.h.html#1657">uip_udp_hdr</a> *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>))</div><div id="80" class="line none">   80 #define <a href="uip.h.html#80">UIP_UDP_PAYLOAD</a>                            ((unsigned char *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>) + <a href="uip.h.html#59">UIP_UDPH_LEN</a>)</div><div id="81" class="line none">   81 #define <a href="uip.h.html#81">UIP_TCP_BUF</a>                           ((struct <a href="uip.h.html#1636">uip_tcp_hdr</a> *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>))</div><div id="82" class="line none">   82 #define <a href="uip.h.html#82">UIP_TCP_PAYLOAD</a>                            ((unsigned char *)<a href="uip.h.html#72">UIP_IP_PAYLOAD</a>(<a href="uip.h.html#1237">uip_ext_len</a>) + <a href="uip.h.html#60">UIP_TCPH_LEN</a>)</div><div id="83" class="line none">   83 </div><div id="84" class="line none">   84 #include "net/ipv6/uipopt.h"</div><div id="85" class="line none">   85 #include "net/ipv6/uipbuf.h"</div><div id="86" class="line none">   86 #include "net/linkaddr.h"</div><div id="87" class="line none">   87 </div><div id="88" class="line none">   88 /* For memcmp */</div><div id="89" class="line none">   89 #include &lt;string.h&gt;</div><div id="90" class="line none">   90 </div><div id="91" class="line none">   91 /**</div><div id="92" class="line none">   92  * Representation of an IP address.</div><div id="93" class="line none">   93  *</div><div id="94" class="line none">   94  */</div><div id="95" class="line none">   95 typedef union <a href="uip.h.html#95">uip_ip4addr_t</a> {</div><div id="96" class="line none">   96   uint8_t  <a href="uip.h.html#96">u8</a>[4];                       /* Initializer, must come first. */</div><div id="97" class="line none">   97   uint16_t <a href="uip.h.html#97">u16</a>[2];</div><div id="98" class="line none">   98 } <a href="uip.h.html#95">uip_ip4addr_t</a>;</div><div id="99" class="line none">   99 </div><div id="100" class="line none">  100 typedef union <a href="uip.h.html#100">uip_ip6addr_t</a> {</div><div id="101" class="line none">  101   uint8_t  <a href="uip.h.html#96">u8</a>[16];                      /* Initializer, must come first. */</div><div id="102" class="line none">  102   uint16_t <a href="uip.h.html#97">u16</a>[8];</div><div id="103" class="line none">  103 } <a href="uip.h.html#100">uip_ip6addr_t</a>;</div><div id="104" class="line none">  104 </div><div id="105" class="line none">  105 typedef <a href="uip.h.html#100">uip_ip6addr_t</a> <a href="uip.h.html#105">uip_ipaddr_t</a>;</div><div id="106" class="line none">  106 </div><div id="107" class="line none">  107 /*---------------------------------------------------------------------------*/</div><div id="108" class="line none">  108 #define <a href="uip.h.html#108">UIP_802154_SHORTADDR_LEN</a> 2</div><div id="109" class="line none">  109 #define <a href="uip.h.html#109">UIP_802154_LONGADDR_LEN</a>  8</div><div id="110" class="line none">  110 </div><div id="111" class="line none">  111 /** \brief 16 bit 802.15.4 address */</div><div id="112" class="line none">  112 typedef struct <a href="uip.h.html#112">uip_802154_shortaddr</a> {</div><div id="113" class="line none">  113   uint8_t <a href="uip.h.html#113">addr</a>[<a href="uip.h.html#108">UIP_802154_SHORTADDR_LEN</a>];</div><div id="114" class="line none">  114 } <a href="uip.h.html#112">uip_802154_shortaddr</a>;</div><div id="115" class="line none">  115 /** \brief 64 bit 802.15.4 address */</div><div id="116" class="line none">  116 typedef struct <a href="uip.h.html#116">uip_802154_longaddr</a> {</div><div id="117" class="line none">  117   uint8_t <a href="uip.h.html#113">addr</a>[<a href="uip.h.html#109">UIP_802154_LONGADDR_LEN</a>];</div><div id="118" class="line none">  118 } <a href="uip.h.html#116">uip_802154_longaddr</a>;</div><div id="119" class="line none">  119 </div><div id="120" class="line none">  120 /** \brief 802.11 address */</div><div id="121" class="line none">  121 typedef struct <a href="uip.h.html#121">uip_80211_addr</a> {</div><div id="122" class="line none">  122   uint8_t <a href="uip.h.html#113">addr</a>[6];</div><div id="123" class="line none">  123 } <a href="uip.h.html#121">uip_80211_addr</a>;</div><div id="124" class="line none">  124 </div><div id="125" class="line none">  125 /** \brief 802.3 address */</div><div id="126" class="line none">  126 typedef struct <a href="uip.h.html#126">uip_eth_addr</a> {</div><div id="127" class="line none">  127   uint8_t <a href="uip.h.html#113">addr</a>[6];</div><div id="128" class="line none">  128 } <a href="uip.h.html#126">uip_eth_addr</a>;</div><div id="129" class="line none">  129 </div><div id="130" class="line none">  130 </div><div id="131" class="line none">  131 #ifndef <a href="uip.h.html#132">UIP_CONF_LL_802154</a></div><div id="132" class="line none">  132 #define <a href="uip.h.html#132">UIP_CONF_LL_802154</a> 1</div><div id="133" class="line none">  133 #endif /* UIP_CONF_LL_802154 */</div><div id="134" class="line none">  134 </div><div id="135" class="line none">  135 #if <a href="uip.h.html#132">UIP_CONF_LL_802154</a></div><div id="136" class="line none">  136 /** \brief 802.15.4 address */</div><div id="137" class="line none">  137 #if <a href="../linkaddr.h.html#59">LINKADDR_SIZE</a> == <a href="uip.h.html#109">UIP_802154_LONGADDR_LEN</a></div><div id="138" class="line none">  138 typedef <a href="uip.h.html#116">uip_802154_longaddr</a> <a href="uip.h.html#138">uip_lladdr_t</a>;</div><div id="139" class="line none">  139 #elif <a href="../linkaddr.h.html#59">LINKADDR_SIZE</a> == <a href="uip.h.html#108">UIP_802154_SHORTADDR_LEN</a></div><div id="140" class="line none">  140 typedef <a href="uip.h.html#112">uip_802154_shortaddr</a> <a href="uip.h.html#138">uip_lladdr_t</a>;</div><div id="141" class="line none">  141 #else /* LINKADDR_SIZE == 8 */</div><div id="142" class="line none">  142 #error unsupported configuration <a href="../routing/rpl-classic/rpl.h.html#225">of</a> <a href="../linkaddr.h.html#59">LINKADDR_SIZE</a></div><div id="143" class="line none">  143 #endif /* LINKADDR_SIZE == 8 */</div><div id="144" class="line none">  144 /** \brief Link layer address length */</div><div id="145" class="line none">  145 #define <a href="uip.h.html#145">UIP_LLADDR_LEN</a> <a href="../linkaddr.h.html#59">LINKADDR_SIZE</a></div><div id="146" class="line none">  146 #else /*UIP_CONF_LL_802154*/</div><div id="147" class="line none">  147 #if UIP_CONF_LL_80211</div><div id="148" class="line none">  148 /** \brief 802.11 address */</div><div id="149" class="line none">  149 typedef <a href="uip.h.html#121">uip_80211_addr</a> <a href="uip.h.html#138">uip_lladdr_t</a>;</div><div id="150" class="line none">  150 /** \brief Link layer address length */</div><div id="151" class="line none">  151 #define <a href="uip.h.html#145">UIP_LLADDR_LEN</a> 6</div><div id="152" class="line none">  152 #else /*UIP_CONF_LL_80211*/</div><div id="153" class="line none">  153 /** \brief Ethernet address */</div><div id="154" class="line none">  154 typedef <a href="uip.h.html#126">uip_eth_addr</a> <a href="uip.h.html#138">uip_lladdr_t</a>;</div><div id="155" class="line none">  155 /** \brief Link layer address length */</div><div id="156" class="line none">  156 #define <a href="uip.h.html#145">UIP_LLADDR_LEN</a> 6</div><div id="157" class="line none">  157 #endif /*UIP_CONF_LL_80211*/</div><div id="158" class="line none">  158 #endif /*UIP_CONF_LL_802154*/</div><div id="159" class="line none">  159 </div><div id="160" class="line none">  160 #include "net/ipv6/tcpip.h"</div><div id="161" class="line none">  161 </div><div id="162" class="line none">  162 /*---------------------------------------------------------------------------*/</div><div id="163" class="line none">  163 /* First, the functions that should be called from the</div><div id="164" class="line none">  164  * system. Initialization, the periodic timer, and incoming packets are</div><div id="165" class="line none">  165  * handled by the following three functions.</div><div id="166" class="line none">  166  */</div><div id="167" class="line none">  167 /**</div><div id="168" class="line none">  168  * \defgroup uipconffunc uIP configuration functions</div><div id="169" class="line none">  169  * @{</div><div id="170" class="line none">  170  *</div><div id="171" class="line none">  171  * The uIP configuration functions are used for setting run-time</div><div id="172" class="line none">  172  * parameters in uIP such as IP addresses.</div><div id="173" class="line none">  173  */</div><div id="174" class="line none">  174 </div><div id="175" class="line none">  175 /**</div><div id="176" class="line none">  176  * Set the IP address of this host.</div><div id="177" class="line none">  177  *</div><div id="178" class="line none">  178  * The IP address is represented as a 4-byte array where the first</div><div id="179" class="line none">  179  * octet of the IP address is put in the first member of the 4-byte</div><div id="180" class="line none">  180  * array.</div><div id="181" class="line none">  181  *</div><div id="182" class="line none">  182  * Example:</div><div id="183" class="line none">  183  \code</div><div id="184" class="line none">  184 </div><div id="185" class="line none">  185  uip_ipaddr_t addr;</div><div id="186" class="line none">  186 </div><div id="187" class="line none">  187  uip_ipaddr(&amp;addr, 192,168,1,2);</div><div id="188" class="line none">  188  uip_sethostaddr(&amp;addr);</div><div id="189" class="line none">  189 </div><div id="190" class="line none">  190  \endcode</div><div id="191" class="line none">  191  * \param addr A pointer to an IP address of type uip_ipaddr_t;</div><div id="192" class="line none">  192  *</div><div id="193" class="line none">  193  * \sa uip_ipaddr()</div><div id="194" class="line none">  194  *</div><div id="195" class="line none">  195  * \hideinitializer</div><div id="196" class="line none">  196  */</div><div id="197" class="line none">  197 #define <a href="uip.h.html#197">uip_sethostaddr</a>(<a href="uip.h.html#113">addr</a>) <a href="uip.h.html#969">uip_ipaddr_copy</a>(&amp;uip_hostaddr, (<a href="uip.h.html#113">addr</a>))</div><div id="198" class="line none">  198 </div><div id="199" class="line none">  199 /**</div><div id="200" class="line none">  200  * Get the IP address of this host.</div><div id="201" class="line none">  201  *</div><div id="202" class="line none">  202  * The IP address is represented as a 4-byte array where the first</div><div id="203" class="line none">  203  * octet of the IP address is put in the first member of the 4-byte</div><div id="204" class="line none">  204  * array.</div><div id="205" class="line none">  205  *</div><div id="206" class="line none">  206  * Example:</div><div id="207" class="line none">  207  \code</div><div id="208" class="line none">  208  uip_ipaddr_t hostaddr;</div><div id="209" class="line none">  209 </div><div id="210" class="line none">  210  uip_gethostaddr(&amp;hostaddr);</div><div id="211" class="line none">  211  \endcode</div><div id="212" class="line none">  212  * \param addr A pointer to a uip_ipaddr_t variable that will be</div><div id="213" class="line none">  213  * filled in with the currently configured IP address.</div><div id="214" class="line none">  214  *</div><div id="215" class="line none">  215  * \hideinitializer</div><div id="216" class="line none">  216  */</div><div id="217" class="line none">  217 #define <a href="uip.h.html#217">uip_gethostaddr</a>(<a href="uip.h.html#113">addr</a>) <a href="uip.h.html#969">uip_ipaddr_copy</a>((<a href="uip.h.html#113">addr</a>), &amp;uip_hostaddr)</div><div id="218" class="line none">  218 </div><div id="219" class="line none">  219 /** @} */</div><div id="220" class="line none">  220 </div><div id="221" class="line none">  221 /**</div><div id="222" class="line none">  222  * \defgroup uipinit uIP initialization functions</div><div id="223" class="line none">  223  * @{</div><div id="224" class="line none">  224  *</div><div id="225" class="line none">  225  * The uIP initialization functions are used for booting uIP.</div><div id="226" class="line none">  226  */</div><div id="227" class="line none">  227 </div><div id="228" class="line none">  228 /**</div><div id="229" class="line none">  229  * uIP initialization function.</div><div id="230" class="line none">  230  *</div><div id="231" class="line none">  231  * This function should be called at boot up to initilize the uIP</div><div id="232" class="line none">  232  * TCP/IP stack.</div><div id="233" class="line none">  233  */</div><div id="234" class="line none">  234 void uip_init(void);</div><div id="235" class="line none">  235 </div><div id="236" class="line none">  236 /**</div><div id="237" class="line none">  237  * uIP initialization function.</div><div id="238" class="line none">  238  *</div><div id="239" class="line none">  239  * This function may be used at boot time to set the initial ip_id.</div><div id="240" class="line none">  240  */</div><div id="241" class="line none">  241 void uip_setipid(uint16_t <a href="uip.h.html#1608">id</a>);</div><div id="242" class="line none">  242 </div><div id="243" class="line none">  243 /** @} */</div><div id="244" class="line none">  244 </div><div id="245" class="line none">  245 /**</div><div id="246" class="line none">  246  * \defgroup uipdevfunc uIP device driver functions</div><div id="247" class="line none">  247  * @{</div><div id="248" class="line none">  248  *</div><div id="249" class="line none">  249  * These functions are used by a network device driver for interacting</div><div id="250" class="line none">  250  * with uIP.</div><div id="251" class="line none">  251  */</div><div id="252" class="line none">  252 </div><div id="253" class="line none">  253 /**</div><div id="254" class="line none">  254  * Process an incoming packet.</div><div id="255" class="line none">  255  *</div><div id="256" class="line none">  256  * This function should be called when the device driver has received</div><div id="257" class="line none">  257  * a packet from the network. The packet from the device driver must</div><div id="258" class="line none">  258  * be present in the uip_buf buffer, and the length of the packet</div><div id="259" class="line none">  259  * should be placed in the uip_len variable.</div><div id="260" class="line none">  260  *</div><div id="261" class="line none">  261  * When the function returns, there may be an outbound packet placed</div><div id="262" class="line none">  262  * in the uip_buf packet buffer. If so, the uip_len variable is set to</div><div id="263" class="line none">  263  * the length of the packet. If no packet is to be sent out, the</div><div id="264" class="line none">  264  * uip_len variable is set to 0.</div><div id="265" class="line none">  265  *</div><div id="266" class="line none">  266  * The usual way of calling the function is presented by the source</div><div id="267" class="line none">  267  * code below.</div><div id="268" class="line none">  268  \code</div><div id="269" class="line none">  269  uip_len = devicedriver_poll();</div><div id="270" class="line none">  270  if(uip_len &gt; 0) {</div><div id="271" class="line none">  271  uip_input();</div><div id="272" class="line none">  272  if(uip_len &gt; 0) {</div><div id="273" class="line none">  273  devicedriver_send();</div><div id="274" class="line none">  274  }</div><div id="275" class="line none">  275  }</div><div id="276" class="line none">  276  \endcode</div><div id="277" class="line none">  277  *</div><div id="278" class="line none">  278  * \note If you are writing a uIP device driver that needs ARP</div><div id="279" class="line none">  279  * (Address Resolution Protocol), e.g., when running uIP over</div><div id="280" class="line none">  280  * Ethernet, you will need to call the uIP ARP code before calling</div><div id="281" class="line none">  281  * this function:</div><div id="282" class="line none">  282  \code</div><div id="283" class="line none">  283  #define BUF ((struct uip_eth_hdr *)&amp;uip_buf[0])</div><div id="284" class="line none">  284  uip_len = ethernet_devicedrver_poll();</div><div id="285" class="line none">  285  if(uip_len &gt; 0) {</div><div id="286" class="line none">  286  if(BUF-&gt;type == UIP_HTONS(UIP_ETHTYPE_IP)) {</div><div id="287" class="line none">  287  uip_arp_ipin();</div><div id="288" class="line none">  288  uip_input();</div><div id="289" class="line none">  289  if(uip_len &gt; 0) {</div><div id="290" class="line none">  290  uip_arp_out();</div><div id="291" class="line none">  291  ethernet_devicedriver_send();</div><div id="292" class="line none">  292  }</div><div id="293" class="line none">  293  } else if(BUF-&gt;type == UIP_HTONS(UIP_ETHTYPE_ARP)) {</div><div id="294" class="line none">  294  uip_arp_arpin();</div><div id="295" class="line none">  295  if(uip_len &gt; 0) {</div><div id="296" class="line none">  296  ethernet_devicedriver_send();</div><div id="297" class="line none">  297  }</div><div id="298" class="line none">  298  }</div><div id="299" class="line none">  299  \endcode</div><div id="300" class="line none">  300  *</div><div id="301" class="line none">  301  * \hideinitializer</div><div id="302" class="line none">  302  */</div><div id="303" class="line none">  303 #define <a href="uip.h.html#303">uip_input</a>()        uip_process(<a href="uip.h.html#1494">UIP_DATA</a>)</div><div id="304" class="line none">  304 </div><div id="305" class="line none">  305 </div><div id="306" class="line none">  306 /**</div><div id="307" class="line none">  307  * Periodic processing for a connection identified by its number.</div><div id="308" class="line none">  308  *</div><div id="309" class="line none">  309  * This function does the necessary periodic processing (timers,</div><div id="310" class="line none">  310  * polling) for a uIP TCP connection, and should be called when the</div><div id="311" class="line none">  311  * periodic uIP timer goes off. It should be called for every</div><div id="312" class="line none">  312  * connection, regardless of whether they are open of closed.</div><div id="313" class="line none">  313  *</div><div id="314" class="line none">  314  * When the function returns, it may have an outbound packet waiting</div><div id="315" class="line none">  315  * for service in the uIP packet buffer, and if so the uip_len</div><div id="316" class="line none">  316  * variable is set to a value larger than zero. The device driver</div><div id="317" class="line none">  317  * should be called to send out the packet.</div><div id="318" class="line none">  318  *</div><div id="319" class="line none">  319  * The usual way of calling the function is through a for() loop like</div><div id="320" class="line none">  320  * this:</div><div id="321" class="line none">  321  \code</div><div id="322" class="line none">  322  for(i = 0; i &lt; UIP_TCP_CONNS; ++i) {</div><div id="323" class="line none">  323  uip_periodic(i);</div><div id="324" class="line none">  324  if(uip_len &gt; 0) {</div><div id="325" class="line none">  325  devicedriver_send();</div><div id="326" class="line none">  326  }</div><div id="327" class="line none">  327  }</div><div id="328" class="line none">  328  \endcode</div><div id="329" class="line none">  329  *</div><div id="330" class="line none">  330  * \note If you are writing a uIP device driver that needs ARP</div><div id="331" class="line none">  331  * (Address Resolution Protocol), e.g., when running uIP over</div><div id="332" class="line none">  332  * Ethernet, you will need to call the uip_arp_out() function before</div><div id="333" class="line none">  333  * calling the device driver:</div><div id="334" class="line none">  334  \code</div><div id="335" class="line none">  335  for(i = 0; i &lt; UIP_TCP_CONNS; ++i) {</div><div id="336" class="line none">  336  uip_periodic(i);</div><div id="337" class="line none">  337  if(uip_len &gt; 0) {</div><div id="338" class="line none">  338  uip_arp_out();</div><div id="339" class="line none">  339  ethernet_devicedriver_send();</div><div id="340" class="line none">  340  }</div><div id="341" class="line none">  341  }</div><div id="342" class="line none">  342  \endcode</div><div id="343" class="line none">  343  *</div><div id="344" class="line none">  344  * \param conn The number of the connection which is to be periodically polled.</div><div id="345" class="line none">  345  *</div><div id="346" class="line none">  346  * \hideinitializer</div><div id="347" class="line none">  347  */</div><div id="348" class="line none">  348 #if UIP_TCP</div><div id="349" class="line none">  349 #define <a href="uip.h.html#349">uip_periodic</a>(conn) do { <a href="uip.h.html#1258">uip_conn</a> = &amp;uip_conns[conn];    \</div><div id="350" class="line none">  350     uip_process(<a href="uip.h.html#1498">UIP_TIMER</a>); } while (0)</div><div id="351" class="line none">  351 </div><div id="352" class="line none">  352 /**</div><div id="353" class="line none">  353  * Macro to determine whether a specific uIP connection is active</div><div id="354" class="line none">  354  *</div><div id="355" class="line none">  355  * \param conn The connection's number</div><div id="356" class="line none">  356  * \retval 0 Connection closed</div><div id="357" class="line none">  357  */</div><div id="358" class="line none">  358 #define <a href="uip.h.html#358">uip_conn_active</a>(conn) (uip_conns[conn].<a href="uip.h.html#1274">tcpstateflags</a> != <a href="uip.h.html#1510">UIP_CLOSED</a>)</div><div id="359" class="line none">  359 </div><div id="360" class="line none">  360 /**</div><div id="361" class="line none">  361  * Perform periodic processing for a connection identified by a pointer</div><div id="362" class="line none">  362  * to its structure.</div><div id="363" class="line none">  363  *</div><div id="364" class="line none">  364  * Same as uip_periodic() but takes a pointer to the actual uip_conn</div><div id="365" class="line none">  365  * struct instead of an integer as its argument. This function can be</div><div id="366" class="line none">  366  * used to force periodic processing of a specific connection.</div><div id="367" class="line none">  367  *</div><div id="368" class="line none">  368  * \param conn A pointer to the uip_conn struct for the connection to</div><div id="369" class="line none">  369  * be processed.</div><div id="370" class="line none">  370  *</div><div id="371" class="line none">  371  * \hideinitializer</div><div id="372" class="line none">  372  */</div><div id="373" class="line none">  373 #define <a href="uip.h.html#373">uip_periodic_conn</a>(conn) do { <a href="uip.h.html#1258">uip_conn</a> = conn;   \</div><div id="374" class="line none">  374     uip_process(<a href="uip.h.html#1498">UIP_TIMER</a>); } while (0)</div><div id="375" class="line none">  375 </div><div id="376" class="line none">  376 /**</div><div id="377" class="line none">  377  * Request that a particular connection should be polled.</div><div id="378" class="line none">  378  *</div><div id="379" class="line none">  379  * Similar to uip_periodic_conn() but does not perform any timer</div><div id="380" class="line none">  380  * processing. The application is polled for new data.</div><div id="381" class="line none">  381  *</div><div id="382" class="line none">  382  * \param conn A pointer to the uip_conn struct for the connection to</div><div id="383" class="line none">  383  * be processed.</div><div id="384" class="line none">  384  *</div><div id="385" class="line none">  385  * \hideinitializer</div><div id="386" class="line none">  386  */</div><div id="387" class="line none">  387 #define <a href="uip.h.html#387">uip_poll_conn</a>(conn) do { <a href="uip.h.html#1258">uip_conn</a> = conn;       \</div><div id="388" class="line none">  388     uip_process(<a href="uip.h.html#1500">UIP_POLL_REQUEST</a>); } while (0)</div><div id="389" class="line none">  389 </div><div id="390" class="line none">  390 #endif /* UIP_TCP */</div><div id="391" class="line none">  391 </div><div id="392" class="line none">  392 #if UIP_UDP</div><div id="393" class="line none">  393 /**</div><div id="394" class="line none">  394  * Periodic processing for a UDP connection identified by its number.</div><div id="395" class="line none">  395  *</div><div id="396" class="line none">  396  * This function is essentially the same as uip_periodic(), but for</div><div id="397" class="line none">  397  * UDP connections. It is called in a similar fashion as the</div><div id="398" class="line none">  398  * uip_periodic() function:</div><div id="399" class="line none">  399  \code</div><div id="400" class="line none">  400  for(i = 0; i &lt; UIP_UDP_CONNS; i++) {</div><div id="401" class="line none">  401  uip_udp_periodic(i);</div><div id="402" class="line none">  402  if(uip_len &gt; 0) {</div><div id="403" class="line none">  403  devicedriver_send();</div><div id="404" class="line none">  404  }</div><div id="405" class="line none">  405  }</div><div id="406" class="line none">  406  \endcode</div><div id="407" class="line none">  407  *</div><div id="408" class="line none">  408  * \note As for the uip_periodic() function, special care has to be</div><div id="409" class="line none">  409  * taken when using uIP together with ARP and Ethernet:</div><div id="410" class="line none">  410  \code</div><div id="411" class="line none">  411  for(i = 0; i &lt; UIP_UDP_CONNS; i++) {</div><div id="412" class="line none">  412  uip_udp_periodic(i);</div><div id="413" class="line none">  413  if(uip_len &gt; 0) {</div><div id="414" class="line none">  414  uip_arp_out();</div><div id="415" class="line none">  415  ethernet_devicedriver_send();</div><div id="416" class="line none">  416  }</div><div id="417" class="line none">  417  }</div><div id="418" class="line none">  418  \endcode</div><div id="419" class="line none">  419  *</div><div id="420" class="line none">  420  * \param conn The number of the UDP connection to be processed.</div><div id="421" class="line none">  421  *</div><div id="422" class="line none">  422  * \hideinitializer</div><div id="423" class="line none">  423  */</div><div id="424" class="line none">  424 #define <a href="uip.h.html#424">uip_udp_periodic</a>(conn) do { <a href="uip.h.html#1309">uip_udp_conn</a> = &amp;uip_udp_conns[conn]; \</div><div id="425" class="line none">  425     uip_process(<a href="uip.h.html#1506">UIP_UDP_TIMER</a>); } while(0)</div><div id="426" class="line none">  426 </div><div id="427" class="line none">  427 /**</div><div id="428" class="line none">  428  * Periodic processing for a UDP connection identified by a pointer to</div><div id="429" class="line none">  429  * its structure.</div><div id="430" class="line none">  430  *</div><div id="431" class="line none">  431  * Same as uip_udp_periodic() but takes a pointer to the actual</div><div id="432" class="line none">  432  * uip_conn struct instead of an integer as its argument. This</div><div id="433" class="line none">  433  * function can be used to force periodic processing of a specific</div><div id="434" class="line none">  434  * connection.</div><div id="435" class="line none">  435  *</div><div id="436" class="line none">  436  * \param conn A pointer to the uip_udp_conn struct for the connection</div><div id="437" class="line none">  437  * to be processed.</div><div id="438" class="line none">  438  *</div><div id="439" class="line none">  439  * \hideinitializer</div><div id="440" class="line none">  440  */</div><div id="441" class="line none">  441 #define <a href="uip.h.html#441">uip_udp_periodic_conn</a>(conn) do { <a href="uip.h.html#1309">uip_udp_conn</a> = conn;   \</div><div id="442" class="line none">  442     uip_process(<a href="uip.h.html#1506">UIP_UDP_TIMER</a>); } while(0)</div><div id="443" class="line none">  443 #endif /* UIP_UDP */</div><div id="444" class="line none">  444 </div><div id="445" class="line none">  445 /** \brief Abandon the reassembly of the current packet */</div><div id="446" class="line none">  446 void uip_reass_over(void);</div><div id="447" class="line none">  447 </div><div id="448" class="line none">  448 /**</div><div id="449" class="line none">  449  * The uIP packet buffer.</div><div id="450" class="line none">  450  *</div><div id="451" class="line none">  451  * The uip_aligned_buf array is used to hold incoming and outgoing</div><div id="452" class="line none">  452  * packets. The device driver should place incoming data into this</div><div id="453" class="line none">  453  * buffer. When sending data, the device driver should read the</div><div id="454" class="line none">  454  * outgoing data from this buffer.</div><div id="455" class="line none">  455 */</div><div id="456" class="line none">  456 </div><div id="457" class="line none">  457 typedef union {</div><div id="458" class="line none">  458   uint32_t <a href="uip.h.html#458">u32</a>[(UIP_BUFSIZE + 3) / 4];</div><div id="459" class="line none">  459   uint8_t <a href="uip.h.html#96">u8</a>[UIP_BUFSIZE];</div><div id="460" class="line none">  460 } <a href="uip.h.html#460">uip_buf_t</a>;</div><div id="461" class="line none">  461 </div><div id="462" class="line none">  462 extern <a href="uip.h.html#460">uip_buf_t</a> <a href="uip.h.html#462">uip_aligned_buf</a>;</div><div id="463" class="line none">  463 </div><div id="464" class="line none">  464 /** Macro to access uip_aligned_buf as an array of bytes */</div><div id="465" class="line none">  465 #define <a href="uip.h.html#465">uip_buf</a> (<a href="uip.h.html#462">uip_aligned_buf</a>.<a href="uip.h.html#96">u8</a>)</div><div id="466" class="line none">  466 </div><div id="467" class="line none">  467 </div><div id="468" class="line none">  468 /** @} */</div><div id="469" class="line none">  469 </div><div id="470" class="line none">  470 /*---------------------------------------------------------------------------*/</div><div id="471" class="line none">  471 /* Functions that are used by the uIP application program. Opening and</div><div id="472" class="line none">  472  * closing connections, sending and receiving data, etc. is all</div><div id="473" class="line none">  473  * handled by the functions below.</div><div id="474" class="line none">  474  */</div><div id="475" class="line none">  475 /**</div><div id="476" class="line none">  476  * \defgroup uipappfunc uIP application functions</div><div id="477" class="line none">  477  * @{</div><div id="478" class="line none">  478  *</div><div id="479" class="line none">  479  * Functions used by an application running on top of uIP.</div><div id="480" class="line none">  480  */</div><div id="481" class="line none">  481 </div><div id="482" class="line none">  482 /**</div><div id="483" class="line none">  483  * Start listening to the specified port.</div><div id="484" class="line none">  484  *</div><div id="485" class="line none">  485  * \note Since this function expects the port number in network byte</div><div id="486" class="line none">  486  * order, a conversion using UIP_HTONS() or uip_htons() is necessary.</div><div id="487" class="line none">  487  *</div><div id="488" class="line none">  488  \code</div><div id="489" class="line none">  489  uip_listen(UIP_HTONS(80));</div><div id="490" class="line none">  490  \endcode</div><div id="491" class="line none">  491  *</div><div id="492" class="line none">  492  * \param port A 16-bit port number in network byte order.</div><div id="493" class="line none">  493  */</div><div id="494" class="line none">  494 void uip_listen(uint16_t port);</div><div id="495" class="line none">  495 </div><div id="496" class="line none">  496 /**</div><div id="497" class="line none">  497  * Stop listening to the specified port.</div><div id="498" class="line none">  498  *</div><div id="499" class="line none">  499  * \note Since this function expects the port number in network byte</div><div id="500" class="line none">  500  * order, a conversion using UIP_HTONS() or uip_htons() is necessary.</div><div id="501" class="line none">  501  *</div><div id="502" class="line none">  502  \code</div><div id="503" class="line none">  503  uip_unlisten(UIP_HTONS(80));</div><div id="504" class="line none">  504  \endcode</div><div id="505" class="line none">  505  *</div><div id="506" class="line none">  506  * \param port A 16-bit port number in network byte order.</div><div id="507" class="line none">  507  */</div><div id="508" class="line none">  508 void uip_unlisten(uint16_t port);</div><div id="509" class="line none">  509 </div><div id="510" class="line none">  510 /**</div><div id="511" class="line none">  511  * Connect to a remote host using TCP.</div><div id="512" class="line none">  512  *</div><div id="513" class="line none">  513  * This function is used to start a new connection to the specified</div><div id="514" class="line none">  514  * port on the specified host. It allocates a new connection identifier,</div><div id="515" class="line none">  515  * sets the connection to the SYN_SENT state and sets the</div><div id="516" class="line none">  516  * retransmission timer to 0. This will cause a TCP SYN segment to be</div><div id="517" class="line none">  517  * sent out the next time this connection is periodically processed,</div><div id="518" class="line none">  518  * which usually is done within 0.5 seconds after the call to</div><div id="519" class="line none">  519  * uip_connect().</div><div id="520" class="line none">  520  *</div><div id="521" class="line none">  521  * \note This function is available only if support for active open</div><div id="522" class="line none">  522  * has been configured by defining UIP_ACTIVE_OPEN to 1 in uipopt.h.</div><div id="523" class="line none">  523  *</div><div id="524" class="line none">  524  * \note Since this function requires the port number to be in network</div><div id="525" class="line none">  525  * byte order, a conversion using UIP_HTONS() or uip_htons() is necessary.</div><div id="526" class="line none">  526  *</div><div id="527" class="line none">  527  \code</div><div id="528" class="line none">  528  uip_ipaddr_t ipaddr;</div><div id="529" class="line none">  529 </div><div id="530" class="line none">  530  uip_ipaddr(&amp;ipaddr, 192,168,1,2);</div><div id="531" class="line none">  531  uip_connect(&amp;ipaddr, UIP_HTONS(80));</div><div id="532" class="line none">  532  \endcode</div><div id="533" class="line none">  533  *</div><div id="534" class="line none">  534  * \param ripaddr The IP address of the remote host.</div><div id="535" class="line none">  535  *</div><div id="536" class="line none">  536  * \param port A 16-bit port number in network byte order.</div><div id="537" class="line none">  537  *</div><div id="538" class="line none">  538  * \return A pointer to the uIP connection identifier for the new connection,</div><div id="539" class="line none">  539  * or NULL if no connection could be allocated.</div><div id="540" class="line none">  540  *</div><div id="541" class="line none">  541  */</div><div id="542" class="line none">  542 struct <a href="uip.h.html#1258">uip_conn</a> *uip_connect(const <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip.h.html#1259">ripaddr</a>, uint16_t port);</div><div id="543" class="line none">  543 </div><div id="544" class="line none">  544 </div><div id="545" class="line none">  545 </div><div id="546" class="line none">  546 /**</div><div id="547" class="line none">  547  * \internal</div><div id="548" class="line none">  548  *</div><div id="549" class="line none">  549  * Check if a connection has outstanding (i.e., unacknowledged) data.</div><div id="550" class="line none">  550  *</div><div id="551" class="line none">  551  * \param conn A pointer to the uip_conn structure for the connection.</div><div id="552" class="line none">  552  *</div><div id="553" class="line none">  553  * \hideinitializer</div><div id="554" class="line none">  554  */</div><div id="555" class="line none">  555 #define <a href="uip.h.html#555">uip_outstanding</a>(conn) ((conn)-&gt;<a href="uip.h.html#1268">len</a>)</div><div id="556" class="line none">  556 </div><div id="557" class="line none">  557 /**</div><div id="558" class="line none">  558  * Send data on the current connection.</div><div id="559" class="line none">  559  *</div><div id="560" class="line none">  560  * This function is used to send out a single segment of TCP</div><div id="561" class="line none">  561  * data. Only applications that have been invoked by uIP for event</div><div id="562" class="line none">  562  * processing can send data.</div><div id="563" class="line none">  563  *</div><div id="564" class="line none">  564  * The amount of data that actually is sent out after a call to this</div><div id="565" class="line none">  565  * function is determined by the maximum amount of data TCP allows. uIP</div><div id="566" class="line none">  566  * will automatically crop the data so that only the appropriate</div><div id="567" class="line none">  567  * amount of data is sent. The function uip_mss() can be used to query</div><div id="568" class="line none">  568  * uIP for the amount of data that actually will be sent.</div><div id="569" class="line none">  569  *</div><div id="570" class="line none">  570  * \note This function does not guarantee that the sent data will</div><div id="571" class="line none">  571  * arrive at the destination. If the data is lost in the network, the</div><div id="572" class="line none">  572  * application will be invoked with the uip_rexmit() event being</div><div id="573" class="line none">  573  * set. The application will then have to resend the data using this</div><div id="574" class="line none">  574  * function.</div><div id="575" class="line none">  575  *</div><div id="576" class="line none">  576  * \param data A pointer to the data which is to be sent.</div><div id="577" class="line none">  577  *</div><div id="578" class="line none">  578  * \param len The maximum amount of data bytes to be sent.</div><div id="579" class="line none">  579  *</div><div id="580" class="line none">  580  * \hideinitializer</div><div id="581" class="line none">  581  */</div><div id="582" class="line none">  582 void uip_send(const void *<a href="../nbr-table.h.html#87">data</a>, int <a href="uip.h.html#1268">len</a>);</div><div id="583" class="line none">  583 </div><div id="584" class="line none">  584 /**</div><div id="585" class="line none">  585  * The length of any incoming data that is currently available (if available)</div><div id="586" class="line none">  586  * in the uip_appdata buffer.</div><div id="587" class="line none">  587  *</div><div id="588" class="line none">  588  * The test function uip_data() must first be used to check if there</div><div id="589" class="line none">  589  * is any data available at all.</div><div id="590" class="line none">  590  *</div><div id="591" class="line none">  591  * \hideinitializer</div><div id="592" class="line none">  592  */</div><div id="593" class="line none">  593 #define <a href="uip.h.html#593">uip_datalen</a>()       <a href="uip.h.html#1232">uip_len</a></div><div id="594" class="line none">  594 </div><div id="595" class="line none">  595 /**</div><div id="596" class="line none">  596  * The length of any out-of-band data (urgent data) that has arrived</div><div id="597" class="line none">  597  * on the connection.</div><div id="598" class="line none">  598  *</div><div id="599" class="line none">  599  * \note The configuration parameter UIP_URGDATA must be set for this</div><div id="600" class="line none">  600  * function to be enabled.</div><div id="601" class="line none">  601  *</div><div id="602" class="line none">  602  * \hideinitializer</div><div id="603" class="line none">  603  */</div><div id="604" class="line none">  604 #define <a href="uip.h.html#604">uip_urgdatalen</a>()    uip_urglen</div><div id="605" class="line none">  605 </div><div id="606" class="line none">  606 /**</div><div id="607" class="line none">  607  * Close the current connection.</div><div id="608" class="line none">  608  *</div><div id="609" class="line none">  609  * This function will close the current connection in a nice way.</div><div id="610" class="line none">  610  *</div><div id="611" class="line none">  611  * \hideinitializer</div><div id="612" class="line none">  612  */</div><div id="613" class="line none">  613 #define <a href="uip.h.html#613">uip_close</a>()         (uip_flags = <a href="uip.h.html#1462">UIP_CLOSE</a>)</div><div id="614" class="line none">  614 </div><div id="615" class="line none">  615 /**</div><div id="616" class="line none">  616  * Abort the current connection.</div><div id="617" class="line none">  617  *</div><div id="618" class="line none">  618  * This function will abort (reset) the current connection, and is</div><div id="619" class="line none">  619  * usually used when an error has occurred that prevents using the</div><div id="620" class="line none">  620  * uip_close() function.</div><div id="621" class="line none">  621  *</div><div id="622" class="line none">  622  * \hideinitializer</div><div id="623" class="line none">  623  */</div><div id="624" class="line none">  624 #define <a href="uip.h.html#624">uip_abort</a>()         (uip_flags = <a href="uip.h.html#1467">UIP_ABORT</a>)</div><div id="625" class="line none">  625 </div><div id="626" class="line none">  626 /**</div><div id="627" class="line none">  627  * Tell the sending host to stop sending data.</div><div id="628" class="line none">  628  *</div><div id="629" class="line none">  629  * This function will close our receiver's window so that we stop</div><div id="630" class="line none">  630  * receiving data for the current connection.</div><div id="631" class="line none">  631  *</div><div id="632" class="line none">  632  * \hideinitializer</div><div id="633" class="line none">  633  */</div><div id="634" class="line none">  634 #define <a href="uip.h.html#634">uip_stop</a>()          (<a href="uip.h.html#1258">uip_conn</a>-&gt;<a href="uip.h.html#1274">tcpstateflags</a> |= <a href="uip.h.html#1521">UIP_STOPPED</a>)</div><div id="635" class="line none">  635 </div><div id="636" class="line none">  636 /**</div><div id="637" class="line none">  637  * Find out if the current connection has been previously stopped with</div><div id="638" class="line none">  638  * uip_stop().</div><div id="639" class="line none">  639  *</div><div id="640" class="line none">  640  * \hideinitializer</div><div id="641" class="line none">  641  */</div><div id="642" class="line none">  642 #define <a href="uip.h.html#642">uip_stopped</a>(conn)   ((conn)-&gt;<a href="uip.h.html#1274">tcpstateflags</a> &amp; <a href="uip.h.html#1521">UIP_STOPPED</a>)</div><div id="643" class="line none">  643 </div><div id="644" class="line none">  644 /**</div><div id="645" class="line none">  645  * Restart the current connection, if is has previously been stopped</div><div id="646" class="line none">  646  * with uip_stop().</div><div id="647" class="line none">  647  *</div><div id="648" class="line none">  648  * This function will open the receiver's window again so that we</div><div id="649" class="line none">  649  * start receiving data for the current connection.</div><div id="650" class="line none">  650  *</div><div id="651" class="line none">  651  * \hideinitializer</div><div id="652" class="line none">  652  */</div><div id="653" class="line none">  653 #define <a href="uip.h.html#653">uip_restart</a>()         do { uip_flags |= <a href="uip.h.html#1455">UIP_NEWDATA</a>;    \</div><div id="654" class="line none">  654     <a href="uip.h.html#1258">uip_conn</a>-&gt;<a href="uip.h.html#1274">tcpstateflags</a> &amp;= ~<a href="uip.h.html#1521">UIP_STOPPED</a>;                    \</div><div id="655" class="line none">  655   } while(0)</div><div id="656" class="line none">  656 </div><div id="657" class="line none">  657 </div><div id="658" class="line none">  658 /* uIP tests that can be made to determine in what state the current</div><div id="659" class="line none">  659    connection is, and what the application function should do. */</div><div id="660" class="line none">  660 </div><div id="661" class="line none">  661 /**</div><div id="662" class="line none">  662  * Is the current connection a UDP connection?</div><div id="663" class="line none">  663  *</div><div id="664" class="line none">  664  * This function checks whether the current connection is a UDP connection.</div><div id="665" class="line none">  665  *</div><div id="666" class="line none">  666  * \hideinitializer</div><div id="667" class="line none">  667  *</div><div id="668" class="line none">  668  */</div><div id="669" class="line none">  669 #define <a href="uip.h.html#669">uip_udpconnection</a>() (<a href="uip.h.html#1258">uip_conn</a> == NULL)</div><div id="670" class="line none">  670 </div><div id="671" class="line none">  671 /**</div><div id="672" class="line none">  672  * Is new incoming data available?</div><div id="673" class="line none">  673  *</div><div id="674" class="line none">  674  * Will reduce to non-zero if there is new data for the application</div><div id="675" class="line none">  675  * present at the uip_appdata pointer. The size of the data is</div><div id="676" class="line none">  676  * available through the uip_len variable.</div><div id="677" class="line none">  677  *</div><div id="678" class="line none">  678  * \hideinitializer</div><div id="679" class="line none">  679  */</div><div id="680" class="line none">  680 #define <a href="uip.h.html#680">uip_newdata</a>()   (uip_flags &amp; <a href="uip.h.html#1455">UIP_NEWDATA</a>)</div><div id="681" class="line none">  681 </div><div id="682" class="line none">  682 /**</div><div id="683" class="line none">  683  * Has previously sent data been acknowledged?</div><div id="684" class="line none">  684  *</div><div id="685" class="line none">  685  * Will reduce to non-zero if the previously sent data has been</div><div id="686" class="line none">  686  * acknowledged by the remote host. This means that the application</div><div id="687" class="line none">  687  * can send new data.</div><div id="688" class="line none">  688  *</div><div id="689" class="line none">  689  * \hideinitializer</div><div id="690" class="line none">  690  */</div><div id="691" class="line none">  691 #define <a href="uip.h.html#691">uip_acked</a>()   (uip_flags &amp; <a href="uip.h.html#1451">UIP_ACKDATA</a>)</div><div id="692" class="line none">  692 </div><div id="693" class="line none">  693 /**</div><div id="694" class="line none">  694  * Has the connection just been connected?</div><div id="695" class="line none">  695  *</div><div id="696" class="line none">  696  * Reduces to non-zero if the current connection has been connected to</div><div id="697" class="line none">  697  * a remote host. This will happen both if the connection has been</div><div id="698" class="line none">  698  * actively opened (with uip_connect()) or passively opened (with</div><div id="699" class="line none">  699  * uip_listen()).</div><div id="700" class="line none">  700  *</div><div id="701" class="line none">  701  * \hideinitializer</div><div id="702" class="line none">  702  */</div><div id="703" class="line none">  703 #define <a href="uip.h.html#703">uip_connected</a>() (uip_flags &amp; <a href="uip.h.html#1472">UIP_CONNECTED</a>)</div><div id="704" class="line none">  704 </div><div id="705" class="line none">  705 /**</div><div id="706" class="line none">  706  * Has the connection been closed by the other end?</div><div id="707" class="line none">  707  *</div><div id="708" class="line none">  708  * Is non-zero if the connection has been closed by the remote</div><div id="709" class="line none">  709  * host. The application may then do the necessary clean-ups.</div><div id="710" class="line none">  710  *</div><div id="711" class="line none">  711  * \hideinitializer</div><div id="712" class="line none">  712  */</div><div id="713" class="line none">  713 #define <a href="uip.h.html#713">uip_closed</a>()    (uip_flags &amp; <a href="uip.h.html#1462">UIP_CLOSE</a>)</div><div id="714" class="line none">  714 </div><div id="715" class="line none">  715 /**</div><div id="716" class="line none">  716  * Has the connection been aborted by the other end?</div><div id="717" class="line none">  717  *</div><div id="718" class="line none">  718  * Non-zero if the current connection has been aborted (reset) by the</div><div id="719" class="line none">  719  * remote host.</div><div id="720" class="line none">  720  *</div><div id="721" class="line none">  721  * \hideinitializer</div><div id="722" class="line none">  722  */</div><div id="723" class="line none">  723 #define <a href="uip.h.html#723">uip_aborted</a>()    (uip_flags &amp; <a href="uip.h.html#1467">UIP_ABORT</a>)</div><div id="724" class="line none">  724 </div><div id="725" class="line none">  725 /**</div><div id="726" class="line none">  726  * Has the connection timed out?</div><div id="727" class="line none">  727  *</div><div id="728" class="line none">  728  * Non-zero if the current connection has been aborted due to too many</div><div id="729" class="line none">  729  * retransmissions.</div><div id="730" class="line none">  730  *</div><div id="731" class="line none">  731  * \hideinitializer</div><div id="732" class="line none">  732  */</div><div id="733" class="line none">  733 #define <a href="uip.h.html#733">uip_timedout</a>()    (uip_flags &amp; <a href="uip.h.html#1477">UIP_TIMEDOUT</a>)</div><div id="734" class="line none">  734 </div><div id="735" class="line none">  735 /**</div><div id="736" class="line none">  736  * Do we need to retransmit previously data?</div><div id="737" class="line none">  737  *</div><div id="738" class="line none">  738  * Reduces to non-zero if the previously sent data has been lost in</div><div id="739" class="line none">  739  * the network, and the application should retransmit it. The</div><div id="740" class="line none">  740  * application should send the exact same data as it did the last</div><div id="741" class="line none">  741  * time, using the uip_send() function.</div><div id="742" class="line none">  742  *</div><div id="743" class="line none">  743  * \hideinitializer</div><div id="744" class="line none">  744  */</div><div id="745" class="line none">  745 #define <a href="uip.h.html#745">uip_rexmit</a>()     (uip_flags &amp; <a href="uip.h.html#1457">UIP_REXMIT</a>)</div><div id="746" class="line none">  746 </div><div id="747" class="line none">  747 /**</div><div id="748" class="line none">  748  * Is the connection being polled by uIP?</div><div id="749" class="line none">  749  *</div><div id="750" class="line none">  750  * Is non-zero if the reason the application is invoked is that the</div><div id="751" class="line none">  751  * current connection has been idle for a while and should be</div><div id="752" class="line none">  752  * polled.</div><div id="753" class="line none">  753  *</div><div id="754" class="line none">  754  * The polling event can be used for sending data without having to</div><div id="755" class="line none">  755  * wait for the remote host to send data.</div><div id="756" class="line none">  756  *</div><div id="757" class="line none">  757  * \hideinitializer</div><div id="758" class="line none">  758  */</div><div id="759" class="line none">  759 #define <a href="uip.h.html#759">uip_poll</a>()       (uip_flags &amp; <a href="uip.h.html#1459">UIP_POLL</a>)</div><div id="760" class="line none">  760 </div><div id="761" class="line none">  761 /**</div><div id="762" class="line none">  762  * Get the initial maximum segment size (MSS) of the current</div><div id="763" class="line none">  763  * connection.</div><div id="764" class="line none">  764  *</div><div id="765" class="line none">  765  * \hideinitializer</div><div id="766" class="line none">  766  */</div><div id="767" class="line none">  767 #define <a href="uip.h.html#767">uip_initialmss</a>()             (<a href="uip.h.html#1258">uip_conn</a>-&gt;<a href="uip.h.html#1270">initialmss</a>)</div><div id="768" class="line none">  768 </div><div id="769" class="line none">  769 /**</div><div id="770" class="line none">  770  * Get the current maximum segment size that can be sent on the current</div><div id="771" class="line none">  771  * connection.</div><div id="772" class="line none">  772  *</div><div id="773" class="line none">  773  * The current maximum segment size that can be sent on the</div><div id="774" class="line none">  774  * connection is computed from the receiver's window and the MSS of</div><div id="775" class="line none">  775  * the connection (which also is available by calling</div><div id="776" class="line none">  776  * uip_initialmss()).</div><div id="777" class="line none">  777  *</div><div id="778" class="line none">  778  * \hideinitializer</div><div id="779" class="line none">  779  */</div><div id="780" class="line none">  780 #define <a href="uip.h.html#780">uip_mss</a>()             (<a href="uip.h.html#1258">uip_conn</a>-&gt;<a href="uip.h.html#1269">mss</a>)</div><div id="781" class="line none">  781 </div><div id="782" class="line none">  782 /**</div><div id="783" class="line none">  783  * Set up a new UDP connection.</div><div id="784" class="line none">  784  *</div><div id="785" class="line none">  785  * This function sets up a new UDP connection. The function will</div><div id="786" class="line none">  786  * automatically allocate an unused local port for the new</div><div id="787" class="line none">  787  * connection. However, another port can be chosen by using the</div><div id="788" class="line none">  788  * uip_udp_bind() call, after the uip_udp_new() function has been</div><div id="789" class="line none">  789  * called.</div><div id="790" class="line none">  790  *</div><div id="791" class="line none">  791  * Example:</div><div id="792" class="line none">  792  \code</div><div id="793" class="line none">  793  uip_ipaddr_t addr;</div><div id="794" class="line none">  794  struct uip_udp_conn *c;</div><div id="795" class="line none">  795 </div><div id="796" class="line none">  796  uip_ipaddr(&amp;addr, 192,168,2,1);</div><div id="797" class="line none">  797  c = uip_udp_new(&amp;addr, UIP_HTONS(12345));</div><div id="798" class="line none">  798  if(c != NULL) {</div><div id="799" class="line none">  799  uip_udp_bind(c, UIP_HTONS(12344));</div><div id="800" class="line none">  800  }</div><div id="801" class="line none">  801  \endcode</div><div id="802" class="line none">  802  * \param ripaddr The IP address of the remote host.</div><div id="803" class="line none">  803  *</div><div id="804" class="line none">  804  * \param rport The remote port number in network byte order.</div><div id="805" class="line none">  805  *</div><div id="806" class="line none">  806  * \return The uip_udp_conn structure for the new connection, or NULL</div><div id="807" class="line none">  807  * if no connection could be allocated.</div><div id="808" class="line none">  808  */</div><div id="809" class="line none">  809 struct <a href="uip.h.html#1309">uip_udp_conn</a> *uip_udp_new(const <a href="uip.h.html#105">uip_ipaddr_t</a> *<a href="uip.h.html#1259">ripaddr</a>, uint16_t <a href="uip.h.html#1262">rport</a>);</div><div id="810" class="line none">  810 </div><div id="811" class="line none">  811 /**</div><div id="812" class="line none">  812  * Remove a UDP connection.</div><div id="813" class="line none">  813  *</div><div id="814" class="line none">  814  * \param conn A pointer to the uip_udp_conn structure for the connection.</div><div id="815" class="line none">  815  *</div><div id="816" class="line none">  816  * \hideinitializer</div><div id="817" class="line none">  817  */</div><div id="818" class="line none">  818 #define <a href="uip.h.html#818">uip_udp_remove</a>(conn) (conn)-&gt;<a href="uip.h.html#1261">lport</a> = 0</div><div id="819" class="line none">  819 </div><div id="820" class="line none">  820 /**</div><div id="821" class="line none">  821  * Bind a UDP connection to a local port.</div><div id="822" class="line none">  822  *</div><div id="823" class="line none">  823  * \param conn A pointer to the uip_udp_conn structure for the</div><div id="824" class="line none">  824  * connection.</div><div id="825" class="line none">  825  *</div><div id="826" class="line none">  826  * \param port The local port number, in network byte order.</div><div id="827" class="line none">  827  *</div><div id="828" class="line none">  828  * \hideinitializer</div><div id="829" class="line none">  829  */</div><div id="830" class="line none">  830 #define <a href="uip.h.html#830">uip_udp_bind</a>(conn, port) (conn)-&gt;<a href="uip.h.html#1261">lport</a> = port</div><div id="831" class="line none">  831 </div><div id="832" class="line none">  832 /**</div><div id="833" class="line none">  833  * Send a UDP datagram of length len on the current connection.</div><div id="834" class="line none">  834  *</div><div id="835" class="line none">  835  * This function can only be called in response to a UDP event (poll</div><div id="836" class="line none">  836  * or newdata). The data must be present in the uip_buf buffer, at the</div><div id="837" class="line none">  837  * place pointed to by the uip_appdata pointer.</div><div id="838" class="line none">  838  *</div><div id="839" class="line none">  839  * \param len The length of the data in the uip_buf buffer.</div><div id="840" class="line none">  840  *</div><div id="841" class="line none">  841  * \hideinitializer</div><div id="842" class="line none">  842  */</div><div id="843" class="line none">  843 #define <a href="uip.h.html#843">uip_udp_send</a>(<a href="uip.h.html#1268">len</a>) uip_send((char *)uip_appdata, <a href="uip.h.html#1268">len</a>)</div><div id="844" class="line none">  844 </div><div id="845" class="line none">  845 </div><div id="846" class="line none">  846 /** @} */</div><div id="847" class="line none">  847 </div><div id="848" class="line none">  848 /* uIP convenience and converting functions. */</div><div id="849" class="line none">  849 </div><div id="850" class="line none">  850 /**</div><div id="851" class="line none">  851  * \defgroup uipconvfunc uIP conversion functions</div><div id="852" class="line none">  852  * @{</div><div id="853" class="line none">  853  *</div><div id="854" class="line none">  854  * These functions can be used for converting between different data</div><div id="855" class="line none">  855  * formats used by uIP.</div><div id="856" class="line none">  856  */</div><div id="857" class="line none">  857 </div><div id="858" class="line none">  858 /**</div><div id="859" class="line none">  859  * Convert an IP address to four bytes separated by commas.</div><div id="860" class="line none">  860  *</div><div id="861" class="line none">  861  * Example:</div><div id="862" class="line none">  862  \code</div><div id="863" class="line none">  863  uip_ipaddr_t ipaddr;</div><div id="864" class="line none">  864  printf("ipaddr=%d.%d.%d.%d\n", uip_ipaddr_to_quad(&amp;ipaddr));</div><div id="865" class="line none">  865  \endcode</div><div id="866" class="line none">  866  *</div><div id="867" class="line none">  867  * \param a A pointer to a uip_ipaddr_t.</div><div id="868" class="line none">  868  * \hideinitializer</div><div id="869" class="line none">  869  */</div><div id="870" class="line none">  870 #define <a href="uip.h.html#870">uip_ipaddr_to_quad</a>(a) (a)-&gt;<a href="uip.h.html#96">u8</a>[0],(a)-&gt;<a href="uip.h.html#96">u8</a>[1],(a)-&gt;<a href="uip.h.html#96">u8</a>[2],(a)-&gt;<a href="uip.h.html#96">u8</a>[3]</div><div id="871" class="line none">  871 </div><div id="872" class="line none">  872 /**</div><div id="873" class="line none">  873  * Construct an IP address from four bytes.</div><div id="874" class="line none">  874  *</div><div id="875" class="line none">  875  * This function constructs an IP address of the type that uIP handles</div><div id="876" class="line none">  876  * internally from four bytes. The function is handy for specifying IP</div><div id="877" class="line none">  877  * addresses to use with e.g. the uip_connect() function.</div><div id="878" class="line none">  878  *</div><div id="879" class="line none">  879  * Example:</div><div id="880" class="line none">  880  \code</div><div id="881" class="line none">  881  uip_ipaddr_t ipaddr;</div><div id="882" class="line none">  882  struct uip_conn *c;</div><div id="883" class="line none">  883 </div><div id="884" class="line none">  884  uip_ipaddr(&amp;ipaddr, 192,168,1,2);</div><div id="885" class="line none">  885  c = uip_connect(&amp;ipaddr, UIP_HTONS(80));</div><div id="886" class="line none">  886  \endcode</div><div id="887" class="line none">  887  *</div><div id="888" class="line none">  888  * \param addr A pointer to a uip_ipaddr_t variable that will be</div><div id="889" class="line none">  889  * filled in with the IP address.</div><div id="890" class="line none">  890  *</div><div id="891" class="line none">  891  * \param addr0 The first octet of the IP address.</div><div id="892" class="line none">  892  * \param addr1 The second octet of the IP address.</div><div id="893" class="line none">  893  * \param addr2 The third octet of the IP address.</div><div id="894" class="line none">  894  * \param addr3 The forth octet of the IP address.</div><div id="895" class="line none">  895  *</div><div id="896" class="line none">  896  * \hideinitializer</div><div id="897" class="line none">  897  */</div><div id="898" class="line none">  898 #define <a href="uip.h.html#898">uip_ipaddr</a>(<a href="uip.h.html#113">addr</a>, addr0,addr1,addr2,addr3) do {  \</div><div id="899" class="line none">  899     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[0] = addr0;                              \</div><div id="900" class="line none">  900     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[1] = addr1;                              \</div><div id="901" class="line none">  901     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[2] = addr2;                              \</div><div id="902" class="line none">  902     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[3] = addr3;                              \</div><div id="903" class="line none">  903   } while(0)</div><div id="904" class="line none">  904 </div><div id="905" class="line none">  905 /**</div><div id="906" class="line none">  906  * Construct an IPv6 address from eight 16-bit words.</div><div id="907" class="line none">  907  *</div><div id="908" class="line none">  908  * This function constructs an IPv6 address.</div><div id="909" class="line none">  909  *</div><div id="910" class="line none">  910  * \hideinitializer</div><div id="911" class="line none">  911  */</div><div id="912" class="line none">  912 #define <a href="uip.h.html#912">uip_ip6addr</a>(<a href="uip.h.html#113">addr</a>, addr0,addr1,addr2,addr3,addr4,addr5,addr6,addr7) do { \</div><div id="913" class="line none">  913     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[0] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr0);                                      \</div><div id="914" class="line none">  914     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[1] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr1);                                      \</div><div id="915" class="line none">  915     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[2] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr2);                                      \</div><div id="916" class="line none">  916     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[3] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr3);                                      \</div><div id="917" class="line none">  917     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[4] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr4);                                      \</div><div id="918" class="line none">  918     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[5] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr5);                                      \</div><div id="919" class="line none">  919     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[6] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr6);                                      \</div><div id="920" class="line none">  920     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[7] = <a href="uip.h.html#1157">UIP_HTONS</a>(addr7);                                      \</div><div id="921" class="line none">  921   } while(0)</div><div id="922" class="line none">  922 </div><div id="923" class="line none">  923 /**</div><div id="924" class="line none">  924  * Construct an IPv6 address from sixteen 8-bit words.</div><div id="925" class="line none">  925  *</div><div id="926" class="line none">  926  * This function constructs an IPv6 address.</div><div id="927" class="line none">  927  *</div><div id="928" class="line none">  928  * \hideinitializer</div><div id="929" class="line none">  929  */</div><div id="930" class="line none">  930 #define <a href="uip.h.html#930">uip_ip6addr_u8</a>(<a href="uip.h.html#113">addr</a>, addr0,addr1,addr2,addr3,addr4,addr5,addr6,addr7,addr8,addr9,addr10,addr11,addr12,addr13,addr14,addr15) do { \</div><div id="931" class="line none">  931     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[0] = addr0;                                       \</div><div id="932" class="line none">  932     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[1] = addr1;                                       \</div><div id="933" class="line none">  933     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[2] = addr2;                                       \</div><div id="934" class="line none">  934     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[3] = addr3;                                       \</div><div id="935" class="line none">  935     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[4] = addr4;                                       \</div><div id="936" class="line none">  936     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[5] = addr5;                                       \</div><div id="937" class="line none">  937     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[6] = addr6;                                       \</div><div id="938" class="line none">  938     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[7] = addr7;                                       \</div><div id="939" class="line none">  939     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[8] = addr8;                                       \</div><div id="940" class="line none">  940     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[9] = addr9;                                       \</div><div id="941" class="line none">  941     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[10] = addr10;                                     \</div><div id="942" class="line none">  942     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[11] = addr11;                                     \</div><div id="943" class="line none">  943     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[12] = addr12;                                     \</div><div id="944" class="line none">  944     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[13] = addr13;                                     \</div><div id="945" class="line none">  945     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[14] = addr14;                                     \</div><div id="946" class="line none">  946     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[15] = addr15;                                     \</div><div id="947" class="line none">  947   } while(0)</div><div id="948" class="line none">  948 </div><div id="949" class="line none">  949 </div><div id="950" class="line none">  950 /**</div><div id="951" class="line none">  951  * Copy an IP address from one place to another.</div><div id="952" class="line none">  952  *</div><div id="953" class="line none">  953  * Copies an IP address from one place to another.</div><div id="954" class="line none">  954  *</div><div id="955" class="line none">  955  * Example:</div><div id="956" class="line none">  956  \code</div><div id="957" class="line none">  957  uip_ipaddr_t ipaddr1, ipaddr2;</div><div id="958" class="line none">  958 </div><div id="959" class="line none">  959  uip_ipaddr(&amp;ipaddr1, 192,16,1,2);</div><div id="960" class="line none">  960  uip_ipaddr_copy(&amp;ipaddr2, &amp;ipaddr1);</div><div id="961" class="line none">  961  \endcode</div><div id="962" class="line none">  962  *</div><div id="963" class="line none">  963  * \param dest The destination for the copy.</div><div id="964" class="line none">  964  * \param src The source from where to copy.</div><div id="965" class="line none">  965  *</div><div id="966" class="line none">  966  * \hideinitializer</div><div id="967" class="line none">  967  */</div><div id="968" class="line none">  968 #ifndef <a href="uip.h.html#969">uip_ipaddr_copy</a></div><div id="969" class="line none">  969 #define <a href="uip.h.html#969">uip_ipaddr_copy</a>(<a href="uip.h.html#1427">dest</a>, <a href="uip.h.html#1428">src</a>) (*(<a href="uip.h.html#1427">dest</a>) = *(<a href="uip.h.html#1428">src</a>))</div><div id="970" class="line none">  970 #endif</div><div id="971" class="line none">  971 #ifndef <a href="uip.h.html#972">uip_ip4addr_copy</a></div><div id="972" class="line none">  972 #define <a href="uip.h.html#972">uip_ip4addr_copy</a>(<a href="uip.h.html#1427">dest</a>, <a href="uip.h.html#1428">src</a>) (*((<a href="uip.h.html#95">uip_ip4addr_t</a> *)<a href="uip.h.html#1427">dest</a>) = *((<a href="uip.h.html#95">uip_ip4addr_t</a> *)<a href="uip.h.html#1428">src</a>))</div><div id="973" class="line none">  973 #endif</div><div id="974" class="line none">  974 #ifndef <a href="uip.h.html#975">uip_ip6addr_copy</a></div><div id="975" class="line none">  975 #define <a href="uip.h.html#975">uip_ip6addr_copy</a>(<a href="uip.h.html#1427">dest</a>, <a href="uip.h.html#1428">src</a>) (*((<a href="uip.h.html#100">uip_ip6addr_t</a> *)<a href="uip.h.html#1427">dest</a>) = *((<a href="uip.h.html#100">uip_ip6addr_t</a> *)<a href="uip.h.html#1428">src</a>))</div><div id="976" class="line none">  976 #endif</div><div id="977" class="line none">  977 </div><div id="978" class="line none">  978 /**</div><div id="979" class="line none">  979  * Compare two IP addresses</div><div id="980" class="line none">  980  *</div><div id="981" class="line none">  981  * Compares two IP addresses.</div><div id="982" class="line none">  982  *</div><div id="983" class="line none">  983  * Example:</div><div id="984" class="line none">  984  \code</div><div id="985" class="line none">  985  uip_ipaddr_t ipaddr1, ipaddr2;</div><div id="986" class="line none">  986 </div><div id="987" class="line none">  987  uip_ipaddr(&amp;ipaddr1, 192,16,1,2);</div><div id="988" class="line none">  988  if(uip_ipaddr_cmp(&amp;ipaddr2, &amp;ipaddr1)) {</div><div id="989" class="line none">  989   printf("They are the same");</div><div id="990" class="line none">  990  }</div><div id="991" class="line none">  991  \endcode</div><div id="992" class="line none">  992  *</div><div id="993" class="line none">  993  * \param addr1 The first IP address.</div><div id="994" class="line none">  994  * \param addr2 The second IP address.</div><div id="995" class="line none">  995  *</div><div id="996" class="line none">  996  * \hideinitializer</div><div id="997" class="line none">  997  */</div><div id="998" class="line none">  998 #define <a href="uip.h.html#998">uip_ip4addr_cmp</a>(addr1, addr2) ((addr1)-&gt;<a href="uip.h.html#97">u16</a>[0] == (addr2)-&gt;<a href="uip.h.html#97">u16</a>[0] &amp;&amp; \</div><div id="999" class="line none">  999                                        (addr1)-&gt;<a href="uip.h.html#97">u16</a>[1] == (addr2)-&gt;<a href="uip.h.html#97">u16</a>[1])</div><div id="1000" class="line none"> 1000 #define <a href="uip.h.html#1000">uip_ip6addr_cmp</a>(addr1, addr2) (memcmp(addr1, addr2, sizeof(<a href="uip.h.html#100">uip_ip6addr_t</a>)) == 0)</div><div id="1001" class="line none"> 1001 </div><div id="1002" class="line none"> 1002 #define <a href="uip.h.html#1002">uip_ipaddr_cmp</a>(addr1, addr2) <a href="uip.h.html#1000">uip_ip6addr_cmp</a>(addr1, addr2)</div><div id="1003" class="line none"> 1003 </div><div id="1004" class="line none"> 1004 /**</div><div id="1005" class="line none"> 1005  * Compare two IP addresses with netmasks</div><div id="1006" class="line none"> 1006  *</div><div id="1007" class="line none"> 1007  * Compares two IP addresses with netmasks. The masks are used to mask</div><div id="1008" class="line none"> 1008  * out the bits that are to be compared.</div><div id="1009" class="line none"> 1009  *</div><div id="1010" class="line none"> 1010  * Example:</div><div id="1011" class="line none"> 1011  \code</div><div id="1012" class="line none"> 1012  uip_ipaddr_t ipaddr1, ipaddr2, mask;</div><div id="1013" class="line none"> 1013 </div><div id="1014" class="line none"> 1014  uip_ipaddr(&amp;mask, 255,255,255,0);</div><div id="1015" class="line none"> 1015  uip_ipaddr(&amp;ipaddr1, 192,16,1,2);</div><div id="1016" class="line none"> 1016  uip_ipaddr(&amp;ipaddr2, 192,16,1,3);</div><div id="1017" class="line none"> 1017  if(uip_ipaddr_maskcmp(&amp;ipaddr1, &amp;ipaddr2, &amp;mask)) {</div><div id="1018" class="line none"> 1018  printf("They are the same");</div><div id="1019" class="line none"> 1019  }</div><div id="1020" class="line none"> 1020  \endcode</div><div id="1021" class="line none"> 1021  *</div><div id="1022" class="line none"> 1022  * \param addr1 The first IP address.</div><div id="1023" class="line none"> 1023  * \param addr2 The second IP address.</div><div id="1024" class="line none"> 1024  * \param mask The netmask.</div><div id="1025" class="line none"> 1025  *</div><div id="1026" class="line none"> 1026  * \hideinitializer</div><div id="1027" class="line none"> 1027  */</div><div id="1028" class="line none"> 1028 </div><div id="1029" class="line none"> 1029 #define <a href="uip.h.html#1029">uip_ipaddr_maskcmp</a>(addr1, addr2, mask)          \</div><div id="1030" class="line none"> 1030   (((((uint16_t *)addr1)[0] &amp; ((uint16_t *)mask)[0]) ==       \</div><div id="1031" class="line none"> 1031     (((uint16_t *)addr2)[0] &amp; ((uint16_t *)mask)[0])) &amp;&amp;      \</div><div id="1032" class="line none"> 1032    ((((uint16_t *)addr1)[1] &amp; ((uint16_t *)mask)[1]) ==       \</div><div id="1033" class="line none"> 1033     (((uint16_t *)addr2)[1] &amp; ((uint16_t *)mask)[1])))</div><div id="1034" class="line none"> 1034 </div><div id="1035" class="line none"> 1035 #define <a href="uip.h.html#1035">uip_ipaddr_prefixcmp</a>(addr1, addr2, <a href="uip-ds6-route.h.html#183">length</a>) (memcmp(addr1, addr2, <a href="uip-ds6-route.h.html#183">length</a>&gt;&gt;3) == 0)</div><div id="1036" class="line none"> 1036 </div><div id="1037" class="line none"> 1037 /**</div><div id="1038" class="line none"> 1038  * Mask out the network part of an IP address.</div><div id="1039" class="line none"> 1039  *</div><div id="1040" class="line none"> 1040  * Masks out the network part of an IP address, given the address and</div><div id="1041" class="line none"> 1041  * the netmask.</div><div id="1042" class="line none"> 1042  *</div><div id="1043" class="line none"> 1043  * Example:</div><div id="1044" class="line none"> 1044  \code</div><div id="1045" class="line none"> 1045  uip_ipaddr_t ipaddr1, ipaddr2, netmask;</div><div id="1046" class="line none"> 1046 </div><div id="1047" class="line none"> 1047  uip_ipaddr(&amp;ipaddr1, 192,16,1,2);</div><div id="1048" class="line none"> 1048  uip_ipaddr(&amp;netmask, 255,255,255,0);</div><div id="1049" class="line none"> 1049  uip_ipaddr_mask(&amp;ipaddr2, &amp;ipaddr1, &amp;netmask);</div><div id="1050" class="line none"> 1050  \endcode</div><div id="1051" class="line none"> 1051  *</div><div id="1052" class="line none"> 1052  * In the example above, the variable "ipaddr2" will contain the IP</div><div id="1053" class="line none"> 1053  * address 192.168.1.0.</div><div id="1054" class="line none"> 1054  *</div><div id="1055" class="line none"> 1055  * \param dest Where the result is to be placed.</div><div id="1056" class="line none"> 1056  * \param src The IP address.</div><div id="1057" class="line none"> 1057  * \param mask The netmask.</div><div id="1058" class="line none"> 1058  *</div><div id="1059" class="line none"> 1059  * \hideinitializer</div><div id="1060" class="line none"> 1060  */</div><div id="1061" class="line none"> 1061 #define <a href="uip.h.html#1061">uip_ipaddr_mask</a>(<a href="uip.h.html#1427">dest</a>, <a href="uip.h.html#1428">src</a>, mask) do {                           \</div><div id="1062" class="line none"> 1062     ((uint16_t *)<a href="uip.h.html#1427">dest</a>)[0] = ((uint16_t *)<a href="uip.h.html#1428">src</a>)[0] &amp; ((uint16_t *)mask)[0];        \</div><div id="1063" class="line none"> 1063     ((uint16_t *)<a href="uip.h.html#1427">dest</a>)[1] = ((uint16_t *)<a href="uip.h.html#1428">src</a>)[1] &amp; ((uint16_t *)mask)[1];        \</div><div id="1064" class="line none"> 1064   } while(0)</div><div id="1065" class="line none"> 1065 </div><div id="1066" class="line none"> 1066 /**</div><div id="1067" class="line none"> 1067  * Pick the first octet of an IP address.</div><div id="1068" class="line none"> 1068  *</div><div id="1069" class="line none"> 1069  * Picks out the first octet of an IP address.</div><div id="1070" class="line none"> 1070  *</div><div id="1071" class="line none"> 1071  * Example:</div><div id="1072" class="line none"> 1072  \code</div><div id="1073" class="line none"> 1073  uip_ipaddr_t ipaddr;</div><div id="1074" class="line none"> 1074  uint8_t octet;</div><div id="1075" class="line none"> 1075 </div><div id="1076" class="line none"> 1076  uip_ipaddr(&amp;ipaddr, 1,2,3,4);</div><div id="1077" class="line none"> 1077  octet = uip_ipaddr1(&amp;ipaddr);</div><div id="1078" class="line none"> 1078  \endcode</div><div id="1079" class="line none"> 1079  *</div><div id="1080" class="line none"> 1080  * In the example above, the variable "octet" will contain the value 1.</div><div id="1081" class="line none"> 1081  *</div><div id="1082" class="line none"> 1082  * \hideinitializer</div><div id="1083" class="line none"> 1083  */</div><div id="1084" class="line none"> 1084 #define <a href="uip.h.html#1084">uip_ipaddr1</a>(<a href="uip.h.html#113">addr</a>) ((<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[0])</div><div id="1085" class="line none"> 1085 </div><div id="1086" class="line none"> 1086 /**</div><div id="1087" class="line none"> 1087  * Pick the second octet of an IP address.</div><div id="1088" class="line none"> 1088  *</div><div id="1089" class="line none"> 1089  * Picks out the second octet of an IP address.</div><div id="1090" class="line none"> 1090  *</div><div id="1091" class="line none"> 1091  * Example:</div><div id="1092" class="line none"> 1092  \code</div><div id="1093" class="line none"> 1093  uip_ipaddr_t ipaddr;</div><div id="1094" class="line none"> 1094  uint8_t octet;</div><div id="1095" class="line none"> 1095 </div><div id="1096" class="line none"> 1096  uip_ipaddr(&amp;ipaddr, 1,2,3,4);</div><div id="1097" class="line none"> 1097  octet = uip_ipaddr2(&amp;ipaddr);</div><div id="1098" class="line none"> 1098  \endcode</div><div id="1099" class="line none"> 1099  *</div><div id="1100" class="line none"> 1100  * In the example above, the variable "octet" will contain the value 2.</div><div id="1101" class="line none"> 1101  *</div><div id="1102" class="line none"> 1102  * \hideinitializer</div><div id="1103" class="line none"> 1103  */</div><div id="1104" class="line none"> 1104 #define <a href="uip.h.html#1104">uip_ipaddr2</a>(<a href="uip.h.html#113">addr</a>) ((<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[1])</div><div id="1105" class="line none"> 1105 </div><div id="1106" class="line none"> 1106 /**</div><div id="1107" class="line none"> 1107  * Pick the third octet of an IP address.</div><div id="1108" class="line none"> 1108  *</div><div id="1109" class="line none"> 1109  * Picks out the third octet of an IP address.</div><div id="1110" class="line none"> 1110  *</div><div id="1111" class="line none"> 1111  * Example:</div><div id="1112" class="line none"> 1112  \code</div><div id="1113" class="line none"> 1113  uip_ipaddr_t ipaddr;</div><div id="1114" class="line none"> 1114  uint8_t octet;</div><div id="1115" class="line none"> 1115 </div><div id="1116" class="line none"> 1116  uip_ipaddr(&amp;ipaddr, 1,2,3,4);</div><div id="1117" class="line none"> 1117  octet = uip_ipaddr3(&amp;ipaddr);</div><div id="1118" class="line none"> 1118  \endcode</div><div id="1119" class="line none"> 1119  *</div><div id="1120" class="line none"> 1120  * In the example above, the variable "octet" will contain the value 3.</div><div id="1121" class="line none"> 1121  *</div><div id="1122" class="line none"> 1122  * \hideinitializer</div><div id="1123" class="line none"> 1123  */</div><div id="1124" class="line none"> 1124 #define <a href="uip.h.html#1124">uip_ipaddr3</a>(<a href="uip.h.html#113">addr</a>) ((<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[2])</div><div id="1125" class="line none"> 1125 </div><div id="1126" class="line none"> 1126 /**</div><div id="1127" class="line none"> 1127  * Pick the fourth octet of an IP address.</div><div id="1128" class="line none"> 1128  *</div><div id="1129" class="line none"> 1129  * Picks out the fourth octet of an IP address.</div><div id="1130" class="line none"> 1130  *</div><div id="1131" class="line none"> 1131  * Example:</div><div id="1132" class="line none"> 1132  \code</div><div id="1133" class="line none"> 1133  uip_ipaddr_t ipaddr;</div><div id="1134" class="line none"> 1134  uint8_t octet;</div><div id="1135" class="line none"> 1135 </div><div id="1136" class="line none"> 1136  uip_ipaddr(&amp;ipaddr, 1,2,3,4);</div><div id="1137" class="line none"> 1137  octet = uip_ipaddr4(&amp;ipaddr);</div><div id="1138" class="line none"> 1138  \endcode</div><div id="1139" class="line none"> 1139  *</div><div id="1140" class="line none"> 1140  * In the example above, the variable "octet" will contain the value 4.</div><div id="1141" class="line none"> 1141  *</div><div id="1142" class="line none"> 1142  * \hideinitializer</div><div id="1143" class="line none"> 1143  */</div><div id="1144" class="line none"> 1144 #define <a href="uip.h.html#1144">uip_ipaddr4</a>(<a href="uip.h.html#113">addr</a>) ((<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#96">u8</a>[3])</div><div id="1145" class="line none"> 1145 </div><div id="1146" class="line none"> 1146 /**</div><div id="1147" class="line none"> 1147  * Convert 16-bit quantity from host byte order to network byte order.</div><div id="1148" class="line none"> 1148  *</div><div id="1149" class="line none"> 1149  * This macro is primarily used for converting constants from host</div><div id="1150" class="line none"> 1150  * byte order to network byte order. For converting variables to</div><div id="1151" class="line none"> 1151  * network byte order, use the uip_htons() function instead.</div><div id="1152" class="line none"> 1152  *</div><div id="1153" class="line none"> 1153  * \hideinitializer</div><div id="1154" class="line none"> 1154  */</div><div id="1155" class="line none"> 1155 #ifndef <a href="uip.h.html#1157">UIP_HTONS</a></div><div id="1156" class="line none"> 1156 #   if UIP_BYTE_ORDER == UIP_BIG_ENDIAN</div><div id="1157" class="line none"> 1157 #      define <a href="uip.h.html#1157">UIP_HTONS</a>(n) (n)</div><div id="1158" class="line none"> 1158 #      define <a href="uip.h.html#1158">UIP_HTONL</a>(n) (n)</div><div id="1159" class="line none"> 1159 #   else /* UIP_BYTE_ORDER == UIP_BIG_ENDIAN */</div><div id="1160" class="line none"> 1160 #      define <a href="uip.h.html#1157">UIP_HTONS</a>(n) (uint16_t)((((uint16_t) (n)) &lt;&lt; 8) | (((uint16_t) (n)) &gt;&gt; 8))</div><div id="1161" class="line none"> 1161 #      define <a href="uip.h.html#1158">UIP_HTONL</a>(n) (((uint32_t)<a href="uip.h.html#1157">UIP_HTONS</a>(n) &lt;&lt; 16) | <a href="uip.h.html#1157">UIP_HTONS</a>((uint32_t)(n) &gt;&gt; 16))</div><div id="1162" class="line none"> 1162 #   endif /* UIP_BYTE_ORDER == UIP_BIG_ENDIAN */</div><div id="1163" class="line none"> 1163 #else</div><div id="1164" class="line none"> 1164 #error "UIP_HTONS already defined!"</div><div id="1165" class="line none"> 1165 #endif /* UIP_HTONS */</div><div id="1166" class="line none"> 1166 </div><div id="1167" class="line none"> 1167 /**</div><div id="1168" class="line none"> 1168  * Convert a 16-bit quantity from host byte order to network byte order.</div><div id="1169" class="line none"> 1169  *</div><div id="1170" class="line none"> 1170  * This function is primarily used for converting variables from host</div><div id="1171" class="line none"> 1171  * byte order to network byte order. For converting constants to</div><div id="1172" class="line none"> 1172  * network byte order, use the UIP_HTONS() macro instead.</div><div id="1173" class="line none"> 1173  */</div><div id="1174" class="line none"> 1174 #ifndef uip_htons</div><div id="1175" class="line none"> 1175 uint16_t uip_htons(uint16_t <a href="../packetbuf.h.html#200">val</a>);</div><div id="1176" class="line none"> 1176 #endif /* uip_htons */</div><div id="1177" class="line none"> 1177 #ifndef <a href="uip.h.html#1178">uip_ntohs</a></div><div id="1178" class="line none"> 1178 #define <a href="uip.h.html#1178">uip_ntohs</a> uip_htons</div><div id="1179" class="line none"> 1179 #endif</div><div id="1180" class="line none"> 1180 </div><div id="1181" class="line none"> 1181 #ifndef uip_htonl</div><div id="1182" class="line none"> 1182 uint32_t uip_htonl(uint32_t <a href="../packetbuf.h.html#200">val</a>);</div><div id="1183" class="line none"> 1183 #endif /* uip_htonl */</div><div id="1184" class="line none"> 1184 #ifndef <a href="uip.h.html#1185">uip_ntohl</a></div><div id="1185" class="line none"> 1185 #define <a href="uip.h.html#1185">uip_ntohl</a> uip_htonl</div><div id="1186" class="line none"> 1186 #endif</div><div id="1187" class="line none"> 1187 </div><div id="1188" class="line none"> 1188 /** @} */</div><div id="1189" class="line none"> 1189 </div><div id="1190" class="line none"> 1190 /**</div><div id="1191" class="line none"> 1191  * Pointer to the application data in the packet buffer.</div><div id="1192" class="line none"> 1192  *</div><div id="1193" class="line none"> 1193  * This pointer points to the application data when the application is</div><div id="1194" class="line none"> 1194  * called. If the application wishes to send data, the application may</div><div id="1195" class="line none"> 1195  * use this space to write the data into before calling uip_send().</div><div id="1196" class="line none"> 1196  */</div><div id="1197" class="line none"> 1197 extern void *uip_appdata;</div><div id="1198" class="line none"> 1198 </div><div id="1199" class="line none"> 1199 #if UIP_URGDATA &gt; 0</div><div id="1200" class="line none"> 1200 /* uint8_t *uip_urgdata:</div><div id="1201" class="line none"> 1201  *</div><div id="1202" class="line none"> 1202  * This pointer points to any urgent data that has been received. Only</div><div id="1203" class="line none"> 1203  * present if compiled with support for urgent data (UIP_URGDATA).</div><div id="1204" class="line none"> 1204  */</div><div id="1205" class="line none"> 1205 extern void *uip_urgdata;</div><div id="1206" class="line none"> 1206 #endif /* UIP_URGDATA &gt; 0 */</div><div id="1207" class="line none"> 1207 </div><div id="1208" class="line none"> 1208 </div><div id="1209" class="line none"> 1209 /**</div><div id="1210" class="line none"> 1210  * \defgroup uipdrivervars Variables used in uIP device drivers</div><div id="1211" class="line none"> 1211  * @{</div><div id="1212" class="line none"> 1212  *</div><div id="1213" class="line none"> 1213  * uIP has a few global variables that are used in device drivers for</div><div id="1214" class="line none"> 1214  * uIP.</div><div id="1215" class="line none"> 1215  */</div><div id="1216" class="line none"> 1216 </div><div id="1217" class="line none"> 1217 /**</div><div id="1218" class="line none"> 1218  * The length of the packet in the uip_buf buffer.</div><div id="1219" class="line none"> 1219  *</div><div id="1220" class="line none"> 1220  * The global variable uip_len holds the length of the packet in the</div><div id="1221" class="line none"> 1221  * uip_buf buffer.</div><div id="1222" class="line none"> 1222  *</div><div id="1223" class="line none"> 1223  * When the network device driver calls the uIP input function,</div><div id="1224" class="line none"> 1224  * uip_len should be set to the length of the packet in the uip_buf</div><div id="1225" class="line none"> 1225  * buffer.</div><div id="1226" class="line none"> 1226  *</div><div id="1227" class="line none"> 1227  * When sending packets, the device driver should use the contents of</div><div id="1228" class="line none"> 1228  * the uip_len variable to determine the length of the outgoing</div><div id="1229" class="line none"> 1229  * packet.</div><div id="1230" class="line none"> 1230  *</div><div id="1231" class="line none"> 1231  */</div><div id="1232" class="line none"> 1232 extern uint16_t <a href="uip.h.html#1232">uip_len</a>;</div><div id="1233" class="line none"> 1233 </div><div id="1234" class="line none"> 1234 /**</div><div id="1235" class="line none"> 1235  * The length of the extension headers</div><div id="1236" class="line none"> 1236  */</div><div id="1237" class="line none"> 1237 extern uint16_t <a href="uip.h.html#1237">uip_ext_len</a>;</div><div id="1238" class="line none"> 1238 </div><div id="1239" class="line none"> 1239 /** The final protocol after IPv6 extension headers:</div><div id="1240" class="line none"> 1240   * UIP_PROTO_TCP, UIP_PROTO_UDP or UIP_PROTO_ICMP6 */</div><div id="1241" class="line none"> 1241 extern uint8_t uip_last_proto;</div><div id="1242" class="line none"> 1242 /** @} */</div><div id="1243" class="line none"> 1243 </div><div id="1244" class="line none"> 1244 #if UIP_URGDATA &gt; 0</div><div id="1245" class="line none"> 1245 extern uint16_t uip_urglen, uip_surglen;</div><div id="1246" class="line none"> 1246 #endif /* UIP_URGDATA &gt; 0 */</div><div id="1247" class="line none"> 1247 </div><div id="1248" class="line none"> 1248 /**</div><div id="1249" class="line none"> 1249  * Representation of a uIP TCP connection.</div><div id="1250" class="line none"> 1250  *</div><div id="1251" class="line none"> 1251  * The uip_conn structure is used for identifying a connection. All</div><div id="1252" class="line none"> 1252  * but one field in the structure are to be considered read-only by an</div><div id="1253" class="line none"> 1253  * application. The only exception is the appstate field whose purpose</div><div id="1254" class="line none"> 1254  * is to let the application store application-specific state (e.g.,</div><div id="1255" class="line none"> 1255  * file pointers) for the connection. The type of this field is</div><div id="1256" class="line none"> 1256  * configured in the "uipopt.h" header file.</div><div id="1257" class="line none"> 1257  */</div><div id="1258" class="line none"> 1258 struct <a href="uip.h.html#1258">uip_conn</a> {</div><div id="1259" class="line none"> 1259   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip.h.html#1259">ripaddr</a>;   /**&lt; The IP address of the remote host. */</div><div id="1260" class="line none"> 1260 </div><div id="1261" class="line none"> 1261   uint16_t <a href="uip.h.html#1261">lport</a>;        /**&lt; The local TCP port, in network byte order. */</div><div id="1262" class="line none"> 1262   uint16_t <a href="uip.h.html#1262">rport</a>;        /**&lt; The local remote TCP port, in network byte</div><div id="1263" class="line none"> 1263                          order. */</div><div id="1264" class="line none"> 1264 </div><div id="1265" class="line none"> 1265   uint8_t <a href="uip.h.html#1265">rcv_nxt</a>[4];    /**&lt; The sequence number that we expect to</div><div id="1266" class="line none"> 1266                               receive next. */</div><div id="1267" class="line none"> 1267   uint8_t <a href="uip.h.html#1267">snd_nxt</a>[4];    /**&lt; The sequence number that was last sent by us. */</div><div id="1268" class="line none"> 1268   uint16_t <a href="uip.h.html#1268">len</a>;          /**&lt; Length of the data that was previously sent. */</div><div id="1269" class="line none"> 1269   uint16_t <a href="uip.h.html#1269">mss</a>;          /**&lt; Current maximum segment size for the connection. */</div><div id="1270" class="line none"> 1270   uint16_t <a href="uip.h.html#1270">initialmss</a>;   /**&lt; Initial maximum segment size for the connection. */</div><div id="1271" class="line none"> 1271   uint8_t <a href="uip.h.html#1271">sa</a>;            /**&lt; Retransmission time-out calculation state variable. */</div><div id="1272" class="line none"> 1272   uint8_t <a href="uip.h.html#1272">sv</a>;            /**&lt; Retransmission time-out calculation state variable. */</div><div id="1273" class="line none"> 1273   uint8_t <a href="uip.h.html#1273">rto</a>;           /**&lt; Retransmission time-out. */</div><div id="1274" class="line none"> 1274   uint8_t <a href="uip.h.html#1274">tcpstateflags</a>; /**&lt; TCP state and flags. */</div><div id="1275" class="line none"> 1275   uint8_t <a href="../../sys/timer.h.html#84">timer</a>;         /**&lt; The retransmission timer. */</div><div id="1276" class="line none"> 1276   uint8_t <a href="uip.h.html#1276">nrtx</a>;          /**&lt; The number of retransmissions for the last</div><div id="1277" class="line none"> 1277                               segment sent. */</div><div id="1278" class="line none"> 1278   uip_tcp_appstate_t <a href="uip.h.html#1278">appstate</a>; /** The application state. */</div><div id="1279" class="line none"> 1279 };</div><div id="1280" class="line none"> 1280 </div><div id="1281" class="line none"> 1281 </div><div id="1282" class="line none"> 1282 /**</div><div id="1283" class="line none"> 1283  * Pointer to the current TCP connection.</div><div id="1284" class="line none"> 1284  *</div><div id="1285" class="line none"> 1285  * The uip_conn pointer can be used to access the current TCP</div><div id="1286" class="line none"> 1286  * connection.</div><div id="1287" class="line none"> 1287  */</div><div id="1288" class="line none"> 1288 </div><div id="1289" class="line none"> 1289 extern struct <a href="uip.h.html#1258">uip_conn</a> *<a href="uip.h.html#1258">uip_conn</a>;</div><div id="1290" class="line none"> 1290 #if UIP_TCP</div><div id="1291" class="line none"> 1291 /* The array containing all uIP connections. */</div><div id="1292" class="line none"> 1292 extern struct <a href="uip.h.html#1258">uip_conn</a> uip_conns[UIP_TCP_CONNS];</div><div id="1293" class="line none"> 1293 #endif</div><div id="1294" class="line none"> 1294 </div><div id="1295" class="line none"> 1295 /**</div><div id="1296" class="line none"> 1296  * \addtogroup uiparch</div><div id="1297" class="line none"> 1297  * @{</div><div id="1298" class="line none"> 1298  */</div><div id="1299" class="line none"> 1299 </div><div id="1300" class="line none"> 1300 /**</div><div id="1301" class="line none"> 1301  * 4-byte array used for the 32-bit sequence number calculations.</div><div id="1302" class="line none"> 1302  */</div><div id="1303" class="line none"> 1303 extern uint8_t uip_acc32[4];</div><div id="1304" class="line none"> 1304 /** @} */</div><div id="1305" class="line none"> 1305 </div><div id="1306" class="line none"> 1306 /**</div><div id="1307" class="line none"> 1307  * Representation of a uIP UDP connection.</div><div id="1308" class="line none"> 1308  */</div><div id="1309" class="line none"> 1309 struct <a href="uip.h.html#1309">uip_udp_conn</a> {</div><div id="1310" class="line none"> 1310   <a href="uip.h.html#105">uip_ipaddr_t</a> <a href="uip.h.html#1259">ripaddr</a>;   /**&lt; The IP address of the remote peer. */</div><div id="1311" class="line none"> 1311   uint16_t <a href="uip.h.html#1261">lport</a>;        /**&lt; The local port number in network byte order. */</div><div id="1312" class="line none"> 1312   uint16_t <a href="uip.h.html#1262">rport</a>;        /**&lt; The remote port number in network byte order. */</div><div id="1313" class="line none"> 1313   uint8_t  <a href="uip.h.html#1313">ttl</a>;          /**&lt; Default time-to-live. */</div><div id="1314" class="line none"> 1314   /** The application state. */</div><div id="1315" class="line none"> 1315   uip_udp_appstate_t <a href="uip.h.html#1278">appstate</a>;</div><div id="1316" class="line none"> 1316 };</div><div id="1317" class="line none"> 1317 </div><div id="1318" class="line none"> 1318 /**</div><div id="1319" class="line none"> 1319  * The current UDP connection.</div><div id="1320" class="line none"> 1320  */</div><div id="1321" class="line none"> 1321 extern struct <a href="uip.h.html#1309">uip_udp_conn</a> *<a href="uip.h.html#1309">uip_udp_conn</a>;</div><div id="1322" class="line none"> 1322 extern struct <a href="uip.h.html#1309">uip_udp_conn</a> uip_udp_conns[UIP_UDP_CONNS];</div><div id="1323" class="line none"> 1323 </div><div id="1324" class="line none"> 1324 struct <a href="uip.h.html#1324">uip_fallback_interface</a> {</div><div id="1325" class="line none"> 1325   void (*<a href="uip.h.html#1325">init</a>)(void);</div><div id="1326" class="line none"> 1326   /**</div><div id="1327" class="line none"> 1327    * \retval &gt;=0</div><div id="1328" class="line none"> 1328    *         in case of success</div><div id="1329" class="line none"> 1329    * \retval &lt;0</div><div id="1330" class="line none"> 1330    *         in case of failure</div><div id="1331" class="line none"> 1331    */</div><div id="1332" class="line none"> 1332   int (*<a href="uip.h.html#1332">output</a>)(void);</div><div id="1333" class="line none"> 1333 };</div><div id="1334" class="line none"> 1334 </div><div id="1335" class="line none"> 1335 #if UIP_CONF_ICMP6</div><div id="1336" class="line none"> 1336 struct <a href="uip.h.html#1336">uip_icmp6_conn</a> {</div><div id="1337" class="line none"> 1337   uip_icmp6_appstate_t <a href="uip.h.html#1278">appstate</a>;</div><div id="1338" class="line none"> 1338 };</div><div id="1339" class="line none"> 1339 extern struct <a href="uip.h.html#1336">uip_icmp6_conn</a> uip_icmp6_conns;</div><div id="1340" class="line none"> 1340 #endif /*UIP_CONF_ICMP6*/</div><div id="1341" class="line none"> 1341 </div><div id="1342" class="line none"> 1342 /**</div><div id="1343" class="line none"> 1343  * The uIP TCP/IP statistics.</div><div id="1344" class="line none"> 1344  *</div><div id="1345" class="line none"> 1345  * This is the variable in which the uIP TCP/IP statistics are gathered.</div><div id="1346" class="line none"> 1346  */</div><div id="1347" class="line none"> 1347 #if UIP_STATISTICS == 1</div><div id="1348" class="line none"> 1348 extern struct <a href="uip.h.html#1359">uip_stats</a> uip_stat;</div><div id="1349" class="line none"> 1349 #define <a href="uip.h.html#1349">UIP_STAT</a>(s) s</div><div id="1350" class="line none"> 1350 #else</div><div id="1351" class="line none"> 1351 #define <a href="uip.h.html#1349">UIP_STAT</a>(s)</div><div id="1352" class="line none"> 1352 #endif /* UIP_STATISTICS == 1 */</div><div id="1353" class="line none"> 1353 </div><div id="1354" class="line none"> 1354 /**</div><div id="1355" class="line none"> 1355  * The structure holding the TCP/IP statistics that are gathered if</div><div id="1356" class="line none"> 1356  * UIP_STATISTICS is set to 1.</div><div id="1357" class="line none"> 1357  *</div><div id="1358" class="line none"> 1358  */</div><div id="1359" class="line none"> 1359 struct <a href="uip.h.html#1359">uip_stats</a> {</div><div id="1360" class="line none"> 1360   struct {</div><div id="1361" class="line none"> 1361     uip_stats_t <a href="uip.h.html#1361">recv</a>;     /**&lt; Number of received packets at the IP layer. */</div><div id="1362" class="line none"> 1362     uip_stats_t <a href="uip.h.html#1362">sent</a>;     /**&lt; Number of sent packets at the IP layer. */</div><div id="1363" class="line none"> 1363     uip_stats_t <a href="uip.h.html#1363">forwarded</a>;/**&lt; Number of forwarded packets at the IP layer. */</div><div id="1364" class="line none"> 1364     uip_stats_t <a href="uip.h.html#1364">drop</a>;     /**&lt; Number of dropped packets at the IP layer. */</div><div id="1365" class="line none"> 1365     uip_stats_t <a href="uip.h.html#1365">vhlerr</a>;   /**&lt; Number of packets dropped due to wrong</div><div id="1366" class="line none"> 1366                                IP version or header length. */</div><div id="1367" class="line none"> 1367     uip_stats_t <a href="uip.h.html#1367">hblenerr</a>; /**&lt; Number of packets dropped due to wrong</div><div id="1368" class="line none"> 1368                                IP length, high byte. */</div><div id="1369" class="line none"> 1369     uip_stats_t <a href="uip.h.html#1369">lblenerr</a>; /**&lt; Number of packets dropped due to wrong</div><div id="1370" class="line none"> 1370                                IP length, low byte. */</div><div id="1371" class="line none"> 1371     uip_stats_t <a href="uip.h.html#1371">fragerr</a>;  /**&lt; Number of packets dropped because they</div><div id="1372" class="line none"> 1372                                were IP fragments. */</div><div id="1373" class="line none"> 1373     uip_stats_t <a href="uip.h.html#1373">chkerr</a>;   /**&lt; Number of packets dropped due to IP</div><div id="1374" class="line none"> 1374                                checksum errors. */</div><div id="1375" class="line none"> 1375     uip_stats_t <a href="uip.h.html#1375">protoerr</a>; /**&lt; Number of packets dropped because they</div><div id="1376" class="line none"> 1376                                were neither ICMP, UDP nor TCP. */</div><div id="1377" class="line none"> 1377   } <a href="uip.h.html#1377">ip</a>;                   /**&lt; IP statistics. */</div><div id="1378" class="line none"> 1378   struct {</div><div id="1379" class="line none"> 1379     uip_stats_t <a href="uip.h.html#1361">recv</a>;     /**&lt; Number of received ICMP packets. */</div><div id="1380" class="line none"> 1380     uip_stats_t <a href="uip.h.html#1362">sent</a>;     /**&lt; Number of sent ICMP packets. */</div><div id="1381" class="line none"> 1381     uip_stats_t <a href="uip.h.html#1364">drop</a>;     /**&lt; Number of dropped ICMP packets. */</div><div id="1382" class="line none"> 1382     uip_stats_t <a href="uip.h.html#1382">typeerr</a>;  /**&lt; Number of ICMP packets with a wrong type. */</div><div id="1383" class="line none"> 1383     uip_stats_t <a href="uip.h.html#1373">chkerr</a>;   /**&lt; Number of ICMP packets with a bad checksum. */</div><div id="1384" class="line none"> 1384   } <a href="uip.h.html#1384">icmp</a>;                 /**&lt; ICMP statistics. */</div><div id="1385" class="line none"> 1385 #if UIP_TCP</div><div id="1386" class="line none"> 1386   struct {</div><div id="1387" class="line none"> 1387     uip_stats_t <a href="uip.h.html#1361">recv</a>;     /**&lt; Number of recived TCP segments. */</div><div id="1388" class="line none"> 1388     uip_stats_t <a href="uip.h.html#1362">sent</a>;     /**&lt; Number of sent TCP segments. */</div><div id="1389" class="line none"> 1389     uip_stats_t <a href="uip.h.html#1364">drop</a>;     /**&lt; Number of dropped TCP segments. */</div><div id="1390" class="line none"> 1390     uip_stats_t <a href="uip.h.html#1373">chkerr</a>;   /**&lt; Number of TCP segments with a bad checksum. */</div><div id="1391" class="line none"> 1391     uip_stats_t <a href="uip.h.html#1391">ackerr</a>;   /**&lt; Number of TCP segments with a bad ACK number. */</div><div id="1392" class="line none"> 1392     uip_stats_t <a href="uip.h.html#1392">rst</a>;      /**&lt; Number of received TCP RST (reset) segments. */</div><div id="1393" class="line none"> 1393     uip_stats_t <a href="uip.h.html#1393">rexmit</a>;   /**&lt; Number of retransmitted TCP segments. */</div><div id="1394" class="line none"> 1394     uip_stats_t <a href="uip.h.html#1394">syndrop</a>;  /**&lt; Number of dropped SYNs because too few</div><div id="1395" class="line none"> 1395                                connections were available. */</div><div id="1396" class="line none"> 1396     uip_stats_t <a href="uip.h.html#1396">synrst</a>;   /**&lt; Number of SYNs for closed ports,</div><div id="1397" class="line none"> 1397                                triggering a RST. */</div><div id="1398" class="line none"> 1398   } <a href="uip.h.html#1398">tcp</a>;                  /**&lt; TCP statistics. */</div><div id="1399" class="line none"> 1399 #endif</div><div id="1400" class="line none"> 1400 #if UIP_UDP</div><div id="1401" class="line none"> 1401   struct {</div><div id="1402" class="line none"> 1402     uip_stats_t <a href="uip.h.html#1364">drop</a>;     /**&lt; Number of dropped UDP segments. */</div><div id="1403" class="line none"> 1403     uip_stats_t <a href="uip.h.html#1361">recv</a>;     /**&lt; Number of recived UDP segments. */</div><div id="1404" class="line none"> 1404     uip_stats_t <a href="uip.h.html#1362">sent</a>;     /**&lt; Number of sent UDP segments. */</div><div id="1405" class="line none"> 1405     uip_stats_t <a href="uip.h.html#1373">chkerr</a>;   /**&lt; Number of UDP segments with a bad</div><div id="1406" class="line none"> 1406                                checksum. */</div><div id="1407" class="line none"> 1407   } <a href="uip.h.html#1407">udp</a>;                  /**&lt; UDP statistics. */</div><div id="1408" class="line none"> 1408 #endif /* UIP_UDP */</div><div id="1409" class="line none"> 1409   struct {</div><div id="1410" class="line none"> 1410     uip_stats_t <a href="uip.h.html#1364">drop</a>;     /**&lt; Number of dropped ND6 packets. */</div><div id="1411" class="line none"> 1411     uip_stats_t <a href="uip.h.html#1361">recv</a>;     /**&lt; Number of recived ND6 packets */</div><div id="1412" class="line none"> 1412     uip_stats_t <a href="uip.h.html#1362">sent</a>;     /**&lt; Number of sent ND6 packets */</div><div id="1413" class="line none"> 1413   } <a href="uip.h.html#1413">nd6</a>;</div><div id="1414" class="line none"> 1414 };</div><div id="1415" class="line none"> 1415 </div><div id="1416" class="line none"> 1416 </div><div id="1417" class="line none"> 1417 /*---------------------------------------------------------------------------*/</div><div id="1418" class="line none"> 1418 /* All the stuff below this point is internal to uIP and should not be</div><div id="1419" class="line none"> 1419  * used directly by an application or by a device driver.</div><div id="1420" class="line none"> 1420  */</div><div id="1421" class="line none"> 1421 /*---------------------------------------------------------------------------*/</div><div id="1422" class="line none"> 1422 </div><div id="1423" class="line none"> 1423 /**</div><div id="1424" class="line none"> 1424  * The Ethernet header.</div><div id="1425" class="line none"> 1425  */</div><div id="1426" class="line none"> 1426 struct <a href="uip.h.html#1426">uip_eth_hdr</a> {</div><div id="1427" class="line none"> 1427   struct <a href="uip.h.html#126">uip_eth_addr</a> <a href="uip.h.html#1427">dest</a>;</div><div id="1428" class="line none"> 1428   struct <a href="uip.h.html#126">uip_eth_addr</a> <a href="uip.h.html#1428">src</a>;</div><div id="1429" class="line none"> 1429   uint16_t <a href="uip-ds6.h.html#209">type</a>;</div><div id="1430" class="line none"> 1430 };</div><div id="1431" class="line none"> 1431 </div><div id="1432" class="line none"> 1432 #define <a href="uip.h.html#1432">UIP_ETHTYPE_ARP</a>  0x0806</div><div id="1433" class="line none"> 1433 #define <a href="uip.h.html#1433">UIP_ETHTYPE_IP</a>   0x0800</div><div id="1434" class="line none"> 1434 #define <a href="uip.h.html#1434">UIP_ETHTYPE_IPV6</a> 0x86dd</div><div id="1435" class="line none"> 1435 </div><div id="1436" class="line none"> 1436 /* uint8_t uip_flags:</div><div id="1437" class="line none"> 1437  *</div><div id="1438" class="line none"> 1438  * When the application is called, uip_flags will contain the flags</div><div id="1439" class="line none"> 1439  * that are defined in this file. Please read below for more</div><div id="1440" class="line none"> 1440  * information.</div><div id="1441" class="line none"> 1441  */</div><div id="1442" class="line none"> 1442 extern uint8_t uip_flags;</div><div id="1443" class="line none"> 1443 </div><div id="1444" class="line none"> 1444 /* The following flags may be set in the global variable uip_flags</div><div id="1445" class="line none"> 1445    before calling the application callback. The UIP_ACKDATA,</div><div id="1446" class="line none"> 1446    UIP_NEWDATA, and UIP_CLOSE flags may both be set at the same time,</div><div id="1447" class="line none"> 1447    whereas the others are mutually exclusive. Note that these flags</div><div id="1448" class="line none"> 1448    should *NOT* be accessed directly, but only through the uIP</div><div id="1449" class="line none"> 1449    functions/macros. */</div><div id="1450" class="line none"> 1450 </div><div id="1451" class="line none"> 1451 #define <a href="uip.h.html#1451">UIP_ACKDATA</a>   1     /* Signifies that the outstanding data was</div><div id="1452" class="line none"> 1452                                acked and the application should send</div><div id="1453" class="line none"> 1453                                out new data instead of retransmitting</div><div id="1454" class="line none"> 1454                                the last data. */</div><div id="1455" class="line none"> 1455 #define <a href="uip.h.html#1455">UIP_NEWDATA</a>   2     /* Flags the fact that the peer has sent</div><div id="1456" class="line none"> 1456                                us new data. */</div><div id="1457" class="line none"> 1457 #define <a href="uip.h.html#1457">UIP_REXMIT</a>    4     /* Tells the application to retransmit the</div><div id="1458" class="line none"> 1458                                data that was last sent. */</div><div id="1459" class="line none"> 1459 #define <a href="uip.h.html#1459">UIP_POLL</a>      8     /* Used for polling the application, to</div><div id="1460" class="line none"> 1460                                check if the application has data that</div><div id="1461" class="line none"> 1461                                it wants to send. */</div><div id="1462" class="line none"> 1462 #define <a href="uip.h.html#1462">UIP_CLOSE</a>     16    /* The remote host has closed the</div><div id="1463" class="line none"> 1463                                connection, thus the connection has</div><div id="1464" class="line none"> 1464                                gone away. Or the application signals</div><div id="1465" class="line none"> 1465                                that it wants to close the</div><div id="1466" class="line none"> 1466                                connection. */</div><div id="1467" class="line none"> 1467 #define <a href="uip.h.html#1467">UIP_ABORT</a>     32    /* The remote host has aborted the</div><div id="1468" class="line none"> 1468                                connection, thus the connection has</div><div id="1469" class="line none"> 1469                                gone away. Or the application signals</div><div id="1470" class="line none"> 1470                                that it wants to abort the</div><div id="1471" class="line none"> 1471                                connection. */</div><div id="1472" class="line none"> 1472 #define <a href="uip.h.html#1472">UIP_CONNECTED</a> 64    /* We have got a connection from a remote</div><div id="1473" class="line none"> 1473                                host and have set up a new connection</div><div id="1474" class="line none"> 1474                                for it, or an active connection has</div><div id="1475" class="line none"> 1475                                been successfully established. */</div><div id="1476" class="line none"> 1476 </div><div id="1477" class="line none"> 1477 #define <a href="uip.h.html#1477">UIP_TIMEDOUT</a>  128   /* The connection has been aborted due to</div><div id="1478" class="line none"> 1478                                too many retransmissions. */</div><div id="1479" class="line none"> 1479 </div><div id="1480" class="line none"> 1480 </div><div id="1481" class="line none"> 1481 /* uip_process(flag):</div><div id="1482" class="line none"> 1482  *</div><div id="1483" class="line none"> 1483  * The actual uIP function which does all the work.</div><div id="1484" class="line none"> 1484  */</div><div id="1485" class="line none"> 1485 void uip_process(uint8_t flag);</div><div id="1486" class="line none"> 1486 </div><div id="1487" class="line none"> 1487   /* The following flags are passed as an argument to the uip_process()</div><div id="1488" class="line none"> 1488    function. They are used to distinguish between the two cases where</div><div id="1489" class="line none"> 1489    uip_process() is called. It can be called either because we have</div><div id="1490" class="line none"> 1490    incoming data that should be processed, or because the periodic</div><div id="1491" class="line none"> 1491    timer has fired. These values are never used directly, but only in</div><div id="1492" class="line none"> 1492    the macros defined in this file. */</div><div id="1493" class="line none"> 1493 </div><div id="1494" class="line none"> 1494 #define <a href="uip.h.html#1494">UIP_DATA</a>          1     /* Tells uIP that there is incoming</div><div id="1495" class="line none"> 1495                                    data in the uip_buf buffer. The</div><div id="1496" class="line none"> 1496                                    length of the data is stored in the</div><div id="1497" class="line none"> 1497                                    global variable uip_len. */</div><div id="1498" class="line none"> 1498 #define <a href="uip.h.html#1498">UIP_TIMER</a>         2     /* Tells uIP that the periodic timer</div><div id="1499" class="line none"> 1499                                    has fired. */</div><div id="1500" class="line none"> 1500 #define <a href="uip.h.html#1500">UIP_POLL_REQUEST</a>  3     /* Tells uIP that a connection should</div><div id="1501" class="line none"> 1501                                    be polled. */</div><div id="1502" class="line none"> 1502 #define <a href="uip.h.html#1502">UIP_UDP_SEND_CONN</a> 4     /* Tells uIP that a UDP datagram</div><div id="1503" class="line none"> 1503                                    should be constructed in the</div><div id="1504" class="line none"> 1504                                    uip_buf buffer. */</div><div id="1505" class="line none"> 1505 #if UIP_UDP</div><div id="1506" class="line none"> 1506 #define <a href="uip.h.html#1506">UIP_UDP_TIMER</a>     5</div><div id="1507" class="line none"> 1507 #endif /* UIP_UDP */</div><div id="1508" class="line none"> 1508 </div><div id="1509" class="line none"> 1509 /* The TCP states used in the uip_conn-&gt;tcpstateflags. */</div><div id="1510" class="line none"> 1510 #define <a href="uip.h.html#1510">UIP_CLOSED</a>      0</div><div id="1511" class="line none"> 1511 #define <a href="uip.h.html#1511">UIP_SYN_RCVD</a>    1</div><div id="1512" class="line none"> 1512 #define <a href="uip.h.html#1512">UIP_SYN_SENT</a>    2</div><div id="1513" class="line none"> 1513 #define <a href="uip.h.html#1513">UIP_ESTABLISHED</a> 3</div><div id="1514" class="line none"> 1514 #define <a href="uip.h.html#1514">UIP_FIN_WAIT_1</a>  4</div><div id="1515" class="line none"> 1515 #define <a href="uip.h.html#1515">UIP_FIN_WAIT_2</a>  5</div><div id="1516" class="line none"> 1516 #define <a href="uip.h.html#1516">UIP_CLOSING</a>     6</div><div id="1517" class="line none"> 1517 #define <a href="uip.h.html#1517">UIP_TIME_WAIT</a>   7</div><div id="1518" class="line none"> 1518 #define <a href="uip.h.html#1518">UIP_LAST_ACK</a>    8</div><div id="1519" class="line none"> 1519 #define <a href="uip.h.html#1519">UIP_TS_MASK</a>     15</div><div id="1520" class="line none"> 1520 </div><div id="1521" class="line none"> 1521 #define <a href="uip.h.html#1521">UIP_STOPPED</a>      16</div><div id="1522" class="line none"> 1522 </div><div id="1523" class="line none"> 1523 /*</div><div id="1524" class="line none"> 1524  * In IPv6 the length of the L3 headers before the transport header is</div><div id="1525" class="line none"> 1525  * not fixed, due to the possibility to include extension option headers</div><div id="1526" class="line none"> 1526  * after the IP header. hence we split here L3 and L4 headers</div><div id="1527" class="line none"> 1527  */</div><div id="1528" class="line none"> 1528 /* The IP header */</div><div id="1529" class="line none"> 1529 </div><div id="1530" class="line none"> 1530 struct <a href="uipbuf.h.html#37">uip_ip_hdr</a> {</div><div id="1531" class="line none"> 1531   /* IPV6 header */</div><div id="1532" class="line none"> 1532   uint8_t <a href="uip.h.html#1532">vtc</a>;</div><div id="1533" class="line none"> 1533   uint8_t <a href="uip.h.html#1533">tcflow</a>;</div><div id="1534" class="line none"> 1534   uint16_t <a href="uip.h.html#1534">flow</a>;</div><div id="1535" class="line none"> 1535   uint8_t <a href="uip.h.html#1268">len</a>[2];</div><div id="1536" class="line none"> 1536   uint8_t <a href="uip.h.html#1536">proto</a>, <a href="uip.h.html#1313">ttl</a>;</div><div id="1537" class="line none"> 1537   <a href="uip.h.html#100">uip_ip6addr_t</a> <a href="uip.h.html#1537">srcipaddr</a>, <a href="uip.h.html#1537">destipaddr</a>;</div><div id="1538" class="line none"> 1538 };</div><div id="1539" class="line none"> 1539 </div><div id="1540" class="line none"> 1540 </div><div id="1541" class="line none"> 1541 /*</div><div id="1542" class="line none"> 1542  * IPv6 extension option headers: we are able to process</div><div id="1543" class="line none"> 1543  * the 4 extension headers defined in RFC2460 (IPv6):</div><div id="1544" class="line none"> 1544  * - Hop by hop option header, destination option header:</div><div id="1545" class="line none"> 1545  *   These two are not used by any core IPv6 protocol, hence</div><div id="1546" class="line none"> 1546  *   we just read them and go to the next. They convey options,</div><div id="1547" class="line none"> 1547  *   the options defined in RFC2460 are Pad1 and PadN, which do</div><div id="1548" class="line none"> 1548  *   some padding, and that we do not need to read (the length</div><div id="1549" class="line none"> 1549  *   field in the header is enough)</div><div id="1550" class="line none"> 1550  * - Routing header: this one is most notably used by MIPv6,</div><div id="1551" class="line none"> 1551  *   which we do not implement, hence we just read it and go</div><div id="1552" class="line none"> 1552  *   to the next</div><div id="1553" class="line none"> 1553  * - Fragmentation header: we read this header and are able to</div><div id="1554" class="line none"> 1554  *   reassemble packets</div><div id="1555" class="line none"> 1555  *</div><div id="1556" class="line none"> 1556  * We do not offer any means to send packets with extension headers</div><div id="1557" class="line none"> 1557  *</div><div id="1558" class="line none"> 1558  * We do not implement Authentication and ESP headers, which are</div><div id="1559" class="line none"> 1559  * used in IPSec and defined in RFC4302,4303,4305,4385</div><div id="1560" class="line none"> 1560  */</div><div id="1561" class="line none"> 1561 /* common header part */</div><div id="1562" class="line none"> 1562 typedef struct <a href="uip.h.html#1562">uip_ext_hdr</a> {</div><div id="1563" class="line none"> 1563   uint8_t <a href="../../lib/list.h.html#297">next</a>;</div><div id="1564" class="line none"> 1564   uint8_t <a href="uip.h.html#1268">len</a>;</div><div id="1565" class="line none"> 1565 } <a href="uip.h.html#1562">uip_ext_hdr</a>;</div><div id="1566" class="line none"> 1566 </div><div id="1567" class="line none"> 1567 /* Hop by Hop option header */</div><div id="1568" class="line none"> 1568 typedef struct <a href="uip.h.html#1568">uip_hbho_hdr</a> {</div><div id="1569" class="line none"> 1569   uint8_t <a href="../../lib/list.h.html#297">next</a>;</div><div id="1570" class="line none"> 1570   uint8_t <a href="uip.h.html#1268">len</a>;</div><div id="1571" class="line none"> 1571 } <a href="uip.h.html#1568">uip_hbho_hdr</a>;</div><div id="1572" class="line none"> 1572 </div><div id="1573" class="line none"> 1573 /* destination option header */</div><div id="1574" class="line none"> 1574 typedef struct <a href="uip.h.html#1574">uip_desto_hdr</a> {</div><div id="1575" class="line none"> 1575   uint8_t <a href="../../lib/list.h.html#297">next</a>;</div><div id="1576" class="line none"> 1576   uint8_t <a href="uip.h.html#1268">len</a>;</div><div id="1577" class="line none"> 1577 } <a href="uip.h.html#1574">uip_desto_hdr</a>;</div><div id="1578" class="line none"> 1578 </div><div id="1579" class="line none"> 1579 /* We do not define structures for PAD1 and PADN options */</div><div id="1580" class="line none"> 1580 </div><div id="1581" class="line none"> 1581 /*</div><div id="1582" class="line none"> 1582  * routing header</div><div id="1583" class="line none"> 1583  * the routing header as 4 common bytes, then routing header type</div><div id="1584" class="line none"> 1584  * specific data there are several types of routing header. Type 0 was</div><div id="1585" class="line none"> 1585  * deprecated as per RFC5095 most notable other type is 2, used in</div><div id="1586" class="line none"> 1586  * RFC3775 (MIPv6) here we do not implement MIPv6, so we just need to</div><div id="1587" class="line none"> 1587  * parse the 4 first bytes</div><div id="1588" class="line none"> 1588  */</div><div id="1589" class="line none"> 1589 typedef struct <a href="uip.h.html#1589">uip_routing_hdr</a> {</div><div id="1590" class="line none"> 1590   uint8_t <a href="../../lib/list.h.html#297">next</a>;</div><div id="1591" class="line none"> 1591   uint8_t <a href="uip.h.html#1268">len</a>;</div><div id="1592" class="line none"> 1592   uint8_t <a href="uip.h.html#1592">routing_type</a>;</div><div id="1593" class="line none"> 1593   uint8_t <a href="uip.h.html#1593">seg_left</a>;</div><div id="1594" class="line none"> 1594 } <a href="uip.h.html#1589">uip_routing_hdr</a>;</div><div id="1595" class="line none"> 1595 </div><div id="1596" class="line none"> 1596 /* RPL Source Routing Header */</div><div id="1597" class="line none"> 1597 typedef struct <a href="uip.h.html#1597">uip_rpl_srh_hdr</a> {</div><div id="1598" class="line none"> 1598   uint8_t <a href="uip.h.html#1598">cmpr</a>; /* CmprI and CmprE */</div><div id="1599" class="line none"> 1599   uint8_t <a href="uip.h.html#1599">pad</a>;</div><div id="1600" class="line none"> 1600   uint8_t <a href="uip.h.html#1600">reserved</a>[2];</div><div id="1601" class="line none"> 1601 } <a href="uip.h.html#1597">uip_rpl_srh_hdr</a>;</div><div id="1602" class="line none"> 1602 </div><div id="1603" class="line none"> 1603 /* fragmentation header */</div><div id="1604" class="line none"> 1604 typedef struct <a href="uip.h.html#1604">uip_frag_hdr</a> {</div><div id="1605" class="line none"> 1605   uint8_t <a href="../../lib/list.h.html#297">next</a>;</div><div id="1606" class="line none"> 1606   uint8_t <a href="uip.h.html#1606">res</a>;</div><div id="1607" class="line none"> 1607   uint16_t <a href="uip.h.html#1607">offsetresmore</a>;</div><div id="1608" class="line none"> 1608   uint32_t <a href="uip.h.html#1608">id</a>;</div><div id="1609" class="line none"> 1609 } <a href="uip.h.html#1604">uip_frag_hdr</a>;</div><div id="1610" class="line none"> 1610 </div><div id="1611" class="line none"> 1611 /*</div><div id="1612" class="line none"> 1612  * an option within the destination or hop by hop option headers</div><div id="1613" class="line none"> 1613  * it contains type an length, which is true for all options but PAD1</div><div id="1614" class="line none"> 1614  */</div><div id="1615" class="line none"> 1615 typedef struct <a href="uip.h.html#1615">uip_ext_hdr_opt</a> {</div><div id="1616" class="line none"> 1616   uint8_t <a href="uip-ds6.h.html#209">type</a>;</div><div id="1617" class="line none"> 1617   uint8_t <a href="uip.h.html#1268">len</a>;</div><div id="1618" class="line none"> 1618 } <a href="uip.h.html#1615">uip_ext_hdr_opt</a>;</div><div id="1619" class="line none"> 1619 </div><div id="1620" class="line none"> 1620 /* PADN option */</div><div id="1621" class="line none"> 1621 typedef struct <a href="uip.h.html#1621">uip_ext_hdr_opt_padn</a> {</div><div id="1622" class="line none"> 1622   uint8_t <a href="uip.h.html#1622">opt_type</a>;</div><div id="1623" class="line none"> 1623   uint8_t <a href="uip.h.html#1623">opt_len</a>;</div><div id="1624" class="line none"> 1624 } <a href="uip.h.html#1621">uip_ext_hdr_opt_padn</a>;</div><div id="1625" class="line none"> 1625 </div><div id="1626" class="line none"> 1626 /* RPL option */</div><div id="1627" class="line none"> 1627 typedef struct <a href="uip.h.html#1627">uip_ext_hdr_opt_rpl</a> {</div><div id="1628" class="line none"> 1628   uint8_t <a href="uip.h.html#1622">opt_type</a>;</div><div id="1629" class="line none"> 1629   uint8_t <a href="uip.h.html#1623">opt_len</a>;</div><div id="1630" class="line none"> 1630   uint8_t <a href="uip.h.html#1630">flags</a>;</div><div id="1631" class="line none"> 1631   uint8_t <a href="uip.h.html#1631">instance</a>;</div><div id="1632" class="line none"> 1632   uint16_t <a href="uip.h.html#1632">senderrank</a>;</div><div id="1633" class="line none"> 1633 } <a href="uip.h.html#1627">uip_ext_hdr_opt_rpl</a>;</div><div id="1634" class="line none"> 1634 </div><div id="1635" class="line none"> 1635 /* TCP header */</div><div id="1636" class="line none"> 1636 struct <a href="uip.h.html#1636">uip_tcp_hdr</a> {</div><div id="1637" class="line none"> 1637   uint16_t <a href="uip.h.html#1637">srcport</a>;</div><div id="1638" class="line none"> 1638   uint16_t <a href="uip.h.html#1638">destport</a>;</div><div id="1639" class="line none"> 1639   uint8_t <a href="uip.h.html#1639">seqno</a>[4];</div><div id="1640" class="line none"> 1640   uint8_t <a href="uip.h.html#1640">ackno</a>[4];</div><div id="1641" class="line none"> 1641   uint8_t <a href="uip.h.html#1641">tcpoffset</a>;</div><div id="1642" class="line none"> 1642   uint8_t <a href="uip.h.html#1630">flags</a>;</div><div id="1643" class="line none"> 1643   uint8_t  <a href="uip.h.html#1643">wnd</a>[2];</div><div id="1644" class="line none"> 1644   uint16_t <a href="uip.h.html#1644">tcpchksum</a>;</div><div id="1645" class="line none"> 1645   uint8_t <a href="uip.h.html#1645">urgp</a>[2];</div><div id="1646" class="line none"> 1646   uint8_t <a href="uip.h.html#1646">optdata</a>[4];</div><div id="1647" class="line none"> 1647 };</div><div id="1648" class="line none"> 1648 </div><div id="1649" class="line none"> 1649 /* The ICMP headers. */</div><div id="1650" class="line none"> 1650 struct <a href="uip.h.html#1650">uip_icmp_hdr</a> {</div><div id="1651" class="line none"> 1651   uint8_t <a href="uip-ds6.h.html#209">type</a>, <a href="uip-icmp6.h.html#183">icode</a>;</div><div id="1652" class="line none"> 1652   uint16_t <a href="uip.h.html#1652">icmpchksum</a>;</div><div id="1653" class="line none"> 1653 };</div><div id="1654" class="line none"> 1654 </div><div id="1655" class="line none"> 1655 </div><div id="1656" class="line none"> 1656 /* The UDP headers. */</div><div id="1657" class="line none"> 1657 struct <a href="uip.h.html#1657">uip_udp_hdr</a> {</div><div id="1658" class="line none"> 1658   uint16_t <a href="uip.h.html#1637">srcport</a>;</div><div id="1659" class="line none"> 1659   uint16_t <a href="uip.h.html#1638">destport</a>;</div><div id="1660" class="line none"> 1660   uint16_t <a href="uip.h.html#1660">udplen</a>;</div><div id="1661" class="line none"> 1661   uint16_t <a href="uip.h.html#1661">udpchksum</a>;</div><div id="1662" class="line none"> 1662 };</div><div id="1663" class="line none"> 1663 </div><div id="1664" class="line none"> 1664 </div><div id="1665" class="line none"> 1665 /**</div><div id="1666" class="line none"> 1666  * The buffer size available for user data in the \ref uip_buf buffer.</div><div id="1667" class="line none"> 1667  *</div><div id="1668" class="line none"> 1668  * This macro holds the available size for user data in the \ref</div><div id="1669" class="line none"> 1669  * uip_buf buffer. The macro is intended to be used for checking</div><div id="1670" class="line none"> 1670  * bounds of available user data.</div><div id="1671" class="line none"> 1671  *</div><div id="1672" class="line none"> 1672  * Example:</div><div id="1673" class="line none"> 1673  \code</div><div id="1674" class="line none"> 1674  snprintf(uip_appdata, UIP_APPDATA_SIZE, "%u\n", i);</div><div id="1675" class="line none"> 1675  \endcode</div><div id="1676" class="line none"> 1676  *</div><div id="1677" class="line none"> 1677  * \hideinitializer</div><div id="1678" class="line none"> 1678  */</div><div id="1679" class="line none"> 1679 #define <a href="uip.h.html#1679">UIP_APPDATA_SIZE</a> (UIP_BUFSIZE - <a href="uip.h.html#64">UIP_IPTCPH_LEN</a>)</div><div id="1680" class="line none"> 1680 </div><div id="1681" class="line none"> 1681 #define <a href="uip.h.html#1681">UIP_PROTO_ICMP</a>  1</div><div id="1682" class="line none"> 1682 #define <a href="uip.h.html#1682">UIP_PROTO_TCP</a>   6</div><div id="1683" class="line none"> 1683 #define <a href="uip.h.html#1683">UIP_PROTO_UDP</a>   17</div><div id="1684" class="line none"> 1684 #define <a href="uip.h.html#1684">UIP_PROTO_ICMP6</a> 58</div><div id="1685" class="line none"> 1685 </div><div id="1686" class="line none"> 1686 </div><div id="1687" class="line none"> 1687 /** @{ */</div><div id="1688" class="line none"> 1688 /** \brief  extension headers types */</div><div id="1689" class="line none"> 1689 #define <a href="uip.h.html#1689">UIP_PROTO_HBHO</a>        0</div><div id="1690" class="line none"> 1690 #define <a href="uip.h.html#1690">UIP_PROTO_DESTO</a>       60</div><div id="1691" class="line none"> 1691 #define <a href="uip.h.html#1691">UIP_PROTO_ROUTING</a>     43</div><div id="1692" class="line none"> 1692 #define <a href="uip.h.html#1692">UIP_PROTO_FRAG</a>        44</div><div id="1693" class="line none"> 1693 #define <a href="uip.h.html#1693">UIP_PROTO_NONE</a>        59</div><div id="1694" class="line none"> 1694 /** @} */</div><div id="1695" class="line none"> 1695 </div><div id="1696" class="line none"> 1696 #define <a href="uip.h.html#1696">uip_is_proto_ext_hdr</a>(<a href="uip.h.html#1536">proto</a>) ((<a href="uip.h.html#1536">proto</a>) != <a href="uip.h.html#1682">UIP_PROTO_TCP</a> &amp;&amp; (<a href="uip.h.html#1536">proto</a>) != <a href="uip.h.html#1683">UIP_PROTO_UDP</a> &amp;&amp; (<a href="uip.h.html#1536">proto</a>) != <a href="uip.h.html#1684">UIP_PROTO_ICMP6</a>)</div><div id="1697" class="line none"> 1697 </div><div id="1698" class="line none"> 1698 /** @{ */</div><div id="1699" class="line none"> 1699 /** \brief  Destination and Hop By Hop extension headers option types */</div><div id="1700" class="line none"> 1700 #define <a href="uip.h.html#1700">UIP_EXT_HDR_OPT_PAD1</a>  0</div><div id="1701" class="line none"> 1701 #define <a href="uip.h.html#1701">UIP_EXT_HDR_OPT_PADN</a>  1</div><div id="1702" class="line none"> 1702 #define <a href="uip.h.html#1702">UIP_EXT_HDR_OPT_RPL</a>   0x63</div><div id="1703" class="line none"> 1703 #define <a href="uip.h.html#1703">UIP_EXT_HDR_OPT_MPL</a>   0x6D</div><div id="1704" class="line none"> 1704 </div><div id="1705" class="line none"> 1705 /** @} */</div><div id="1706" class="line none"> 1706 </div><div id="1707" class="line none"> 1707 /** @{ */</div><div id="1708" class="line none"> 1708 /**</div><div id="1709" class="line none"> 1709  * \brief Bitmaps for extension header processing</div><div id="1710" class="line none"> 1710  *</div><div id="1711" class="line none"> 1711  * When processing extension headers, we should record somehow which one we</div><div id="1712" class="line none"> 1712  * see, because you cannot have twice the same header, except for destination</div><div id="1713" class="line none"> 1713  * We store all this in one uint8_t bitmap one bit for each header expected. The</div><div id="1714" class="line none"> 1714  * order in the bitmap is the order recommended in RFC2460</div><div id="1715" class="line none"> 1715  */</div><div id="1716" class="line none"> 1716 #define <a href="uip.h.html#1716">UIP_EXT_HDR_BITMAP_HBHO</a> 0x01</div><div id="1717" class="line none"> 1717 #define <a href="uip.h.html#1717">UIP_EXT_HDR_BITMAP_DESTO1</a> 0x02</div><div id="1718" class="line none"> 1718 #define <a href="uip.h.html#1718">UIP_EXT_HDR_BITMAP_ROUTING</a> 0x04</div><div id="1719" class="line none"> 1719 #define <a href="uip.h.html#1719">UIP_EXT_HDR_BITMAP_FRAG</a> 0x08</div><div id="1720" class="line none"> 1720 #define <a href="uip.h.html#1720">UIP_EXT_HDR_BITMAP_AH</a> 0x10</div><div id="1721" class="line none"> 1721 #define <a href="uip.h.html#1721">UIP_EXT_HDR_BITMAP_ESP</a> 0x20</div><div id="1722" class="line none"> 1722 #define <a href="uip.h.html#1722">UIP_EXT_HDR_BITMAP_DESTO2</a> 0x40</div><div id="1723" class="line none"> 1723 /** @} */</div><div id="1724" class="line none"> 1724 </div><div id="1725" class="line none"> 1725 </div><div id="1726" class="line none"> 1726 extern <a href="uip.h.html#105">uip_ipaddr_t</a> uip_hostaddr;</div><div id="1727" class="line none"> 1727 extern const <a href="uip.h.html#105">uip_ipaddr_t</a> uip_all_zeroes_addr;</div><div id="1728" class="line none"> 1728 extern <a href="uip.h.html#138">uip_lladdr_t</a> uip_lladdr;</div><div id="1729" class="line none"> 1729 </div><div id="1730" class="line none"> 1730 /** Length of the link local prefix */</div><div id="1731" class="line none"> 1731 #define <a href="uip.h.html#1731">UIP_LLPREF_LEN</a>     10</div><div id="1732" class="line none"> 1732 </div><div id="1733" class="line none"> 1733 /**</div><div id="1734" class="line none"> 1734  * \brief Is IPv6 address a the unspecified address</div><div id="1735" class="line none"> 1735  * a is of type uip_ipaddr_t</div><div id="1736" class="line none"> 1736  */</div><div id="1737" class="line none"> 1737 #define <a href="uip.h.html#1737">uip_is_addr_loopback</a>(a)                  \</div><div id="1738" class="line none"> 1738   ((((a)-&gt;<a href="uip.h.html#97">u16</a>[0]) == 0) &amp;&amp;                       \</div><div id="1739" class="line none"> 1739    (((a)-&gt;<a href="uip.h.html#97">u16</a>[1]) == 0) &amp;&amp;                       \</div><div id="1740" class="line none"> 1740    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2]) == 0) &amp;&amp;                       \</div><div id="1741" class="line none"> 1741    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3]) == 0) &amp;&amp;                       \</div><div id="1742" class="line none"> 1742    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4]) == 0) &amp;&amp;                       \</div><div id="1743" class="line none"> 1743    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5]) == 0) &amp;&amp;                       \</div><div id="1744" class="line none"> 1744    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6]) == 0) &amp;&amp;                       \</div><div id="1745" class="line none"> 1745    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14]) == 0) &amp;&amp;                       \</div><div id="1746" class="line none"> 1746    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15]) == 0x01))</div><div id="1747" class="line none"> 1747 /**</div><div id="1748" class="line none"> 1748  * \brief Is IPv6 address a the unspecified address</div><div id="1749" class="line none"> 1749  * a is of type uip_ipaddr_t</div><div id="1750" class="line none"> 1750  */</div><div id="1751" class="line none"> 1751 #define <a href="uip.h.html#1751">uip_is_addr_unspecified</a>(a)               \</div><div id="1752" class="line none"> 1752   ((((a)-&gt;<a href="uip.h.html#97">u16</a>[0]) == 0) &amp;&amp;                       \</div><div id="1753" class="line none"> 1753    (((a)-&gt;<a href="uip.h.html#97">u16</a>[1]) == 0) &amp;&amp;                       \</div><div id="1754" class="line none"> 1754    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2]) == 0) &amp;&amp;                       \</div><div id="1755" class="line none"> 1755    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3]) == 0) &amp;&amp;                       \</div><div id="1756" class="line none"> 1756    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4]) == 0) &amp;&amp;                       \</div><div id="1757" class="line none"> 1757    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5]) == 0) &amp;&amp;                       \</div><div id="1758" class="line none"> 1758    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6]) == 0) &amp;&amp;                       \</div><div id="1759" class="line none"> 1759    (((a)-&gt;<a href="uip.h.html#97">u16</a>[7]) == 0))</div><div id="1760" class="line none"> 1760 </div><div id="1761" class="line none"> 1761 /** \brief Is IPv6 address a the link local all-nodes multicast address */</div><div id="1762" class="line none"> 1762 #define <a href="uip.h.html#1762">uip_is_addr_linklocal_allnodes_mcast</a>(a)     \</div><div id="1763" class="line none"> 1763   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xff) &amp;&amp;                        \</div><div id="1764" class="line none"> 1764    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1]) == 0x02) &amp;&amp;                        \</div><div id="1765" class="line none"> 1765    (((a)-&gt;<a href="uip.h.html#97">u16</a>[1]) == 0) &amp;&amp;                          \</div><div id="1766" class="line none"> 1766    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2]) == 0) &amp;&amp;                          \</div><div id="1767" class="line none"> 1767    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3]) == 0) &amp;&amp;                          \</div><div id="1768" class="line none"> 1768    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4]) == 0) &amp;&amp;                          \</div><div id="1769" class="line none"> 1769    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5]) == 0) &amp;&amp;                          \</div><div id="1770" class="line none"> 1770    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6]) == 0) &amp;&amp;                          \</div><div id="1771" class="line none"> 1771    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14]) == 0) &amp;&amp;                          \</div><div id="1772" class="line none"> 1772    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15]) == 0x01))</div><div id="1773" class="line none"> 1773 </div><div id="1774" class="line none"> 1774 /** \brief Is IPv6 address a the link local all-routers multicast address */</div><div id="1775" class="line none"> 1775 #define <a href="uip.h.html#1775">uip_is_addr_linklocal_allrouters_mcast</a>(a)     \</div><div id="1776" class="line none"> 1776   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xff) &amp;&amp;                        \</div><div id="1777" class="line none"> 1777    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1]) == 0x02) &amp;&amp;                        \</div><div id="1778" class="line none"> 1778    (((a)-&gt;<a href="uip.h.html#97">u16</a>[1]) == 0) &amp;&amp;                          \</div><div id="1779" class="line none"> 1779    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2]) == 0) &amp;&amp;                          \</div><div id="1780" class="line none"> 1780    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3]) == 0) &amp;&amp;                          \</div><div id="1781" class="line none"> 1781    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4]) == 0) &amp;&amp;                          \</div><div id="1782" class="line none"> 1782    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5]) == 0) &amp;&amp;                          \</div><div id="1783" class="line none"> 1783    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6]) == 0) &amp;&amp;                          \</div><div id="1784" class="line none"> 1784    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14]) == 0) &amp;&amp;                          \</div><div id="1785" class="line none"> 1785    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15]) == 0x02))</div><div id="1786" class="line none"> 1786 </div><div id="1787" class="line none"> 1787 /**</div><div id="1788" class="line none"> 1788  * \brief is addr (a) a link local unicast address, see RFC 4291</div><div id="1789" class="line none"> 1789  *  i.e. is (a) on prefix FE80::/10</div><div id="1790" class="line none"> 1790  *  a is of type uip_ipaddr_t*</div><div id="1791" class="line none"> 1791  */</div><div id="1792" class="line none"> 1792 #define <a href="uip.h.html#1792">uip_is_addr_linklocal</a>(a)                 \</div><div id="1793" class="line none"> 1793   ((a)-&gt;<a href="uip.h.html#96">u8</a>[0] == 0xfe &amp;&amp;                         \</div><div id="1794" class="line none"> 1794    (a)-&gt;<a href="uip.h.html#96">u8</a>[1] == 0x80)</div><div id="1795" class="line none"> 1795 </div><div id="1796" class="line none"> 1796 /** \brief set IP address a to unspecified */</div><div id="1797" class="line none"> 1797 #define <a href="uip.h.html#1797">uip_create_unspecified</a>(a) <a href="uip.h.html#912">uip_ip6addr</a>(a, 0, 0, 0, 0, 0, 0, 0, 0)</div><div id="1798" class="line none"> 1798 </div><div id="1799" class="line none"> 1799 /** \brief set IP address a to the link local all-nodes multicast address */</div><div id="1800" class="line none"> 1800 #define <a href="uip.h.html#1800">uip_create_linklocal_allnodes_mcast</a>(a) <a href="uip.h.html#912">uip_ip6addr</a>(a, 0xff02, 0, 0, 0, 0, 0, 0, 0x0001)</div><div id="1801" class="line none"> 1801 </div><div id="1802" class="line none"> 1802 /** \brief set IP address a to the link local all-routers multicast address */</div><div id="1803" class="line none"> 1803 #define <a href="uip.h.html#1803">uip_create_linklocal_allrouters_mcast</a>(a) <a href="uip.h.html#912">uip_ip6addr</a>(a, 0xff02, 0, 0, 0, 0, 0, 0, 0x0002)</div><div id="1804" class="line none"> 1804 #define <a href="uip.h.html#1804">uip_create_linklocal_prefix</a>(<a href="uip.h.html#113">addr</a>) do { \</div><div id="1805" class="line none"> 1805     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[0] = <a href="uip.h.html#1157">UIP_HTONS</a>(0xfe80);            \</div><div id="1806" class="line none"> 1806     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[1] = 0;                        \</div><div id="1807" class="line none"> 1807     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[2] = 0;                        \</div><div id="1808" class="line none"> 1808     (<a href="uip.h.html#113">addr</a>)-&gt;<a href="uip.h.html#97">u16</a>[3] = 0;                        \</div><div id="1809" class="line none"> 1809   } while(0)</div><div id="1810" class="line none"> 1810 </div><div id="1811" class="line none"> 1811 /**</div><div id="1812" class="line none"> 1812  * \brief  is addr (a) a solicited node multicast address, see RFC 4291</div><div id="1813" class="line none"> 1813  *  a is of type uip_ipaddr_t*</div><div id="1814" class="line none"> 1814  */</div><div id="1815" class="line none"> 1815 #define <a href="uip.h.html#1815">uip_is_addr_solicited_node</a>(a)          \</div><div id="1816" class="line none"> 1816   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0])  == 0xFF) &amp;&amp;                  \</div><div id="1817" class="line none"> 1817    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1])  == 0x02) &amp;&amp;                  \</div><div id="1818" class="line none"> 1818    (((a)-&gt;<a href="uip.h.html#97">u16</a>[1]) == 0x00) &amp;&amp;                  \</div><div id="1819" class="line none"> 1819    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2]) == 0x00) &amp;&amp;                  \</div><div id="1820" class="line none"> 1820    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3]) == 0x00) &amp;&amp;                  \</div><div id="1821" class="line none"> 1821    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4]) == 0x00) &amp;&amp;                  \</div><div id="1822" class="line none"> 1822    (((a)-&gt;<a href="uip.h.html#96">u8</a>[10]) == 0x00) &amp;&amp;                  \</div><div id="1823" class="line none"> 1823    (((a)-&gt;<a href="uip.h.html#96">u8</a>[11]) == 0x01) &amp;&amp;                  \</div><div id="1824" class="line none"> 1824    (((a)-&gt;<a href="uip.h.html#96">u8</a>[12]) == 0xFF))</div><div id="1825" class="line none"> 1825 </div><div id="1826" class="line none"> 1826 /**</div><div id="1827" class="line none"> 1827  * \brief put in b the solicited node address corresponding to address a</div><div id="1828" class="line none"> 1828  * both a and b are of type uip_ipaddr_t*</div><div id="1829" class="line none"> 1829  * */</div><div id="1830" class="line none"> 1830 #define <a href="uip.h.html#1830">uip_create_solicited_node</a>(a, b)    \</div><div id="1831" class="line none"> 1831   (((b)-&gt;<a href="uip.h.html#96">u8</a>[0]) = 0xFF);                        \</div><div id="1832" class="line none"> 1832   (((b)-&gt;<a href="uip.h.html#96">u8</a>[1]) = 0x02);                        \</div><div id="1833" class="line none"> 1833   (((b)-&gt;<a href="uip.h.html#97">u16</a>[1]) = 0);                          \</div><div id="1834" class="line none"> 1834   (((b)-&gt;<a href="uip.h.html#97">u16</a>[2]) = 0);                          \</div><div id="1835" class="line none"> 1835   (((b)-&gt;<a href="uip.h.html#97">u16</a>[3]) = 0);                          \</div><div id="1836" class="line none"> 1836   (((b)-&gt;<a href="uip.h.html#97">u16</a>[4]) = 0);                          \</div><div id="1837" class="line none"> 1837   (((b)-&gt;<a href="uip.h.html#96">u8</a>[10]) = 0);                          \</div><div id="1838" class="line none"> 1838   (((b)-&gt;<a href="uip.h.html#96">u8</a>[11]) = 0x01);                       \</div><div id="1839" class="line none"> 1839   (((b)-&gt;<a href="uip.h.html#96">u8</a>[12]) = 0xFF);                       \</div><div id="1840" class="line none"> 1840   (((b)-&gt;<a href="uip.h.html#96">u8</a>[13]) = ((a)-&gt;<a href="uip.h.html#96">u8</a>[13]));              \</div><div id="1841" class="line none"> 1841   (((b)-&gt;<a href="uip.h.html#97">u16</a>[7]) = ((a)-&gt;<a href="uip.h.html#97">u16</a>[7]))</div><div id="1842" class="line none"> 1842 </div><div id="1843" class="line none"> 1843 /**</div><div id="1844" class="line none"> 1844  * \brief was addr (a) forged based on the mac address m</div><div id="1845" class="line none"> 1845  * a type is uip_ipaddr_t</div><div id="1846" class="line none"> 1846  * m type is uiplladdr_t</div><div id="1847" class="line none"> 1847  */</div><div id="1848" class="line none"> 1848 #if <a href="uip.h.html#132">UIP_CONF_LL_802154</a></div><div id="1849" class="line none"> 1849 #if <a href="uip.h.html#145">UIP_LLADDR_LEN</a> == <a href="uip.h.html#109">UIP_802154_LONGADDR_LEN</a></div><div id="1850" class="line none"> 1850 #define <a href="uip.h.html#1850">uip_is_addr_mac_addr_based</a>(a, m) \</div><div id="1851" class="line none"> 1851   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[8])  == (((m)-&gt;<a href="uip.h.html#113">addr</a>[0]) ^ 0x02)) &amp;&amp;   \</div><div id="1852" class="line none"> 1852    (((a)-&gt;<a href="uip.h.html#96">u8</a>[9])  == (m)-&gt;<a href="uip.h.html#113">addr</a>[1]) &amp;&amp;            \</div><div id="1853" class="line none"> 1853    (((a)-&gt;<a href="uip.h.html#96">u8</a>[10]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[2]) &amp;&amp;            \</div><div id="1854" class="line none"> 1854    (((a)-&gt;<a href="uip.h.html#96">u8</a>[11]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[3]) &amp;&amp;            \</div><div id="1855" class="line none"> 1855    (((a)-&gt;<a href="uip.h.html#96">u8</a>[12]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[4]) &amp;&amp;            \</div><div id="1856" class="line none"> 1856    (((a)-&gt;<a href="uip.h.html#96">u8</a>[13]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[5]) &amp;&amp;            \</div><div id="1857" class="line none"> 1857    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[6]) &amp;&amp;            \</div><div id="1858" class="line none"> 1858    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[7]))</div><div id="1859" class="line none"> 1859 #else /* UIP_LLADDR_LEN == UIP_802154_LONGADDR_LEN */</div><div id="1860" class="line none"> 1860 #define <a href="uip.h.html#1850">uip_is_addr_mac_addr_based</a>(a, m) (((a)-&gt;<a href="uip.h.html#97">u16</a>[4] == 0x0000) \</div><div id="1861" class="line none"> 1861    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[10] == 0x00) \</div><div id="1862" class="line none"> 1862    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[11] == 0xff) \</div><div id="1863" class="line none"> 1863    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[12] == 0xfe) \</div><div id="1864" class="line none"> 1864    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[13] == 0x00) \</div><div id="1865" class="line none"> 1865    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[14] == (m)-&gt;<a href="uip.h.html#113">addr</a>[0]) \</div><div id="1866" class="line none"> 1866    &amp;&amp; ((a)-&gt;<a href="uip.h.html#96">u8</a>[15] == (m)-&gt;<a href="uip.h.html#113">addr</a>[1]))</div><div id="1867" class="line none"> 1867 #endif /* UIP_LLADDR_LEN == UIP_802154_LONGADDR_LEN */</div><div id="1868" class="line none"> 1868 #else</div><div id="1869" class="line none"> 1869 </div><div id="1870" class="line none"> 1870 #define <a href="uip.h.html#1850">uip_is_addr_mac_addr_based</a>(a, m) \</div><div id="1871" class="line none"> 1871   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[8])  == (((m)-&gt;<a href="uip.h.html#113">addr</a>[0]) | 0x02)) &amp;&amp;   \</div><div id="1872" class="line none"> 1872    (((a)-&gt;<a href="uip.h.html#96">u8</a>[9])  == (m)-&gt;<a href="uip.h.html#113">addr</a>[1]) &amp;&amp;            \</div><div id="1873" class="line none"> 1873    (((a)-&gt;<a href="uip.h.html#96">u8</a>[10]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[2]) &amp;&amp;            \</div><div id="1874" class="line none"> 1874    (((a)-&gt;<a href="uip.h.html#96">u8</a>[11]) == 0xff) &amp;&amp;            \</div><div id="1875" class="line none"> 1875    (((a)-&gt;<a href="uip.h.html#96">u8</a>[12]) == 0xfe) &amp;&amp;            \</div><div id="1876" class="line none"> 1876    (((a)-&gt;<a href="uip.h.html#96">u8</a>[13]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[3]) &amp;&amp;            \</div><div id="1877" class="line none"> 1877    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[4]) &amp;&amp;            \</div><div id="1878" class="line none"> 1878    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15]) == (m)-&gt;<a href="uip.h.html#113">addr</a>[5]))</div><div id="1879" class="line none"> 1879 </div><div id="1880" class="line none"> 1880 #endif /*UIP_CONF_LL_802154*/</div><div id="1881" class="line none"> 1881 </div><div id="1882" class="line none"> 1882 /**</div><div id="1883" class="line none"> 1883  * \brief is address a multicast address, see RFC 4291</div><div id="1884" class="line none"> 1884  * a is of type uip_ipaddr_t*</div><div id="1885" class="line none"> 1885  * */</div><div id="1886" class="line none"> 1886 #define <a href="uip.h.html#1886">uip_is_addr_mcast</a>(a)                    \</div><div id="1887" class="line none"> 1887   (((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xFF)</div><div id="1888" class="line none"> 1888 </div><div id="1889" class="line none"> 1889 /**</div><div id="1890" class="line none"> 1890  * \brief is address a global multicast address (FFxE::/16),</div><div id="1891" class="line none"> 1891  * a is of type uip_ip6addr_t*</div><div id="1892" class="line none"> 1892  * */</div><div id="1893" class="line none"> 1893 #define <a href="uip.h.html#1893">uip_is_addr_mcast_global</a>(a) \</div><div id="1894" class="line none"> 1894   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xFF) &amp;&amp; \</div><div id="1895" class="line none"> 1895    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1] &amp; 0x0F) == 0x0E))</div><div id="1896" class="line none"> 1896 </div><div id="1897" class="line none"> 1897 /**</div><div id="1898" class="line none"> 1898  * \brief is address a non-routable multicast address.</div><div id="1899" class="line none"> 1899  * Scopes 1 (interface-local) and 2 (link-local) are non-routable</div><div id="1900" class="line none"> 1900  * See RFC4291 and draft-ietf-6man-multicast-scopes</div><div id="1901" class="line none"> 1901  * a is of type uip_ip6addr_t*</div><div id="1902" class="line none"> 1902  * */</div><div id="1903" class="line none"> 1903 #define <a href="uip.h.html#1903">uip_is_addr_mcast_non_routable</a>(a) \</div><div id="1904" class="line none"> 1904   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xFF) &amp;&amp; \</div><div id="1905" class="line none"> 1905    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1] &amp; 0x0F) &lt;= 0x02))</div><div id="1906" class="line none"> 1906 </div><div id="1907" class="line none"> 1907 /**</div><div id="1908" class="line none"> 1908  * \brief is address a routable multicast address.</div><div id="1909" class="line none"> 1909  * Scope 3 (Realm-Local) or higher are routable</div><div id="1910" class="line none"> 1910  * Realm-Local scope is defined in draft-ietf-6man-multicast-scopes</div><div id="1911" class="line none"> 1911  * See RFC4291 and draft-ietf-6man-multicast-scopes</div><div id="1912" class="line none"> 1912  * a is of type uip_ip6addr_t*</div><div id="1913" class="line none"> 1913  * */</div><div id="1914" class="line none"> 1914 #define <a href="uip.h.html#1914">uip_is_addr_mcast_routable</a>(a) \</div><div id="1915" class="line none"> 1915   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[0]) == 0xFF) &amp;&amp; \</div><div id="1916" class="line none"> 1916    (((a)-&gt;<a href="uip.h.html#96">u8</a>[1] &amp; 0x0F) &gt; 0x02))</div><div id="1917" class="line none"> 1917 </div><div id="1918" class="line none"> 1918 /**</div><div id="1919" class="line none"> 1919  * \brief is group-id of multicast address a</div><div id="1920" class="line none"> 1920  * the all nodes group-id</div><div id="1921" class="line none"> 1921  */</div><div id="1922" class="line none"> 1922 #define <a href="uip.h.html#1922">uip_is_mcast_group_id_all_nodes</a>(a) \</div><div id="1923" class="line none"> 1923   ((((a)-&gt;<a href="uip.h.html#97">u16</a>[1])  == 0) &amp;&amp;                 \</div><div id="1924" class="line none"> 1924    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2])  == 0) &amp;&amp;                 \</div><div id="1925" class="line none"> 1925    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3])  == 0) &amp;&amp;                 \</div><div id="1926" class="line none"> 1926    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4])  == 0) &amp;&amp;                 \</div><div id="1927" class="line none"> 1927    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5])  == 0) &amp;&amp;                 \</div><div id="1928" class="line none"> 1928    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6])  == 0) &amp;&amp;                 \</div><div id="1929" class="line none"> 1929    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14])  == 0) &amp;&amp;                 \</div><div id="1930" class="line none"> 1930    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15])  == 1))</div><div id="1931" class="line none"> 1931 </div><div id="1932" class="line none"> 1932 /**</div><div id="1933" class="line none"> 1933  * \brief is group-id of multicast address a</div><div id="1934" class="line none"> 1934  * the all routers group-id</div><div id="1935" class="line none"> 1935  */</div><div id="1936" class="line none"> 1936 #define <a href="uip.h.html#1936">uip_is_mcast_group_id_all_routers</a>(a) \</div><div id="1937" class="line none"> 1937   ((((a)-&gt;<a href="uip.h.html#97">u16</a>[1])  == 0) &amp;&amp;                 \</div><div id="1938" class="line none"> 1938    (((a)-&gt;<a href="uip.h.html#97">u16</a>[2])  == 0) &amp;&amp;                 \</div><div id="1939" class="line none"> 1939    (((a)-&gt;<a href="uip.h.html#97">u16</a>[3])  == 0) &amp;&amp;                 \</div><div id="1940" class="line none"> 1940    (((a)-&gt;<a href="uip.h.html#97">u16</a>[4])  == 0) &amp;&amp;                 \</div><div id="1941" class="line none"> 1941    (((a)-&gt;<a href="uip.h.html#97">u16</a>[5])  == 0) &amp;&amp;                 \</div><div id="1942" class="line none"> 1942    (((a)-&gt;<a href="uip.h.html#97">u16</a>[6])  == 0) &amp;&amp;                 \</div><div id="1943" class="line none"> 1943    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14])  == 0) &amp;&amp;                 \</div><div id="1944" class="line none"> 1944    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15])  == 2))</div><div id="1945" class="line none"> 1945 </div><div id="1946" class="line none"> 1946 </div><div id="1947" class="line none"> 1947 /**</div><div id="1948" class="line none"> 1948  * \brief are last three bytes of both addresses equal?</div><div id="1949" class="line none"> 1949  * This is used to compare solicited node multicast addresses</div><div id="1950" class="line none"> 1950  */</div><div id="1951" class="line none"> 1951 #define <a href="uip.h.html#1951">uip_are_solicited_bytes_equal</a>(a, b)             \</div><div id="1952" class="line none"> 1952   ((((a)-&gt;<a href="uip.h.html#96">u8</a>[13])  == ((b)-&gt;<a href="uip.h.html#96">u8</a>[13])) &amp;&amp;                 \</div><div id="1953" class="line none"> 1953    (((a)-&gt;<a href="uip.h.html#96">u8</a>[14])  == ((b)-&gt;<a href="uip.h.html#96">u8</a>[14])) &amp;&amp;                 \</div><div id="1954" class="line none"> 1954    (((a)-&gt;<a href="uip.h.html#96">u8</a>[15])  == ((b)-&gt;<a href="uip.h.html#96">u8</a>[15])))</div><div id="1955" class="line none"> 1955 </div><div id="1956" class="line none"> 1956 /**</div><div id="1957" class="line none"> 1957  * Calculate the Internet checksum over a buffer.</div><div id="1958" class="line none"> 1958  *</div><div id="1959" class="line none"> 1959  * The Internet checksum is the one's complement of the one's</div><div id="1960" class="line none"> 1960  * complement sum of all 16-bit words in the buffer.</div><div id="1961" class="line none"> 1961  *</div><div id="1962" class="line none"> 1962  * See RFC1071.</div><div id="1963" class="line none"> 1963  *</div><div id="1964" class="line none"> 1964  * \param data A pointer to the buffer over which the checksum is to be</div><div id="1965" class="line none"> 1965  * computed.</div><div id="1966" class="line none"> 1966  *</div><div id="1967" class="line none"> 1967  * \param len The length of the buffer over which the checksum is to</div><div id="1968" class="line none"> 1968  * be computed.</div><div id="1969" class="line none"> 1969  *</div><div id="1970" class="line none"> 1970  * \return The Internet checksum of the buffer.</div><div id="1971" class="line none"> 1971  */</div><div id="1972" class="line none"> 1972 uint16_t uip_chksum(uint16_t *<a href="../nbr-table.h.html#87">data</a>, uint16_t <a href="uip.h.html#1268">len</a>);</div><div id="1973" class="line none"> 1973 </div><div id="1974" class="line none"> 1974 /**</div><div id="1975" class="line none"> 1975  * Calculate the IP header checksum of the packet header in uip_buf.</div><div id="1976" class="line none"> 1976  *</div><div id="1977" class="line none"> 1977  * The IP header checksum is the Internet checksum of the 20 bytes of</div><div id="1978" class="line none"> 1978  * the IP header.</div><div id="1979" class="line none"> 1979  *</div><div id="1980" class="line none"> 1980  * \return The IP header checksum of the IP header in the uip_buf</div><div id="1981" class="line none"> 1981  * buffer.</div><div id="1982" class="line none"> 1982  */</div><div id="1983" class="line none"> 1983 uint16_t uip_ipchksum(void);</div><div id="1984" class="line none"> 1984 </div><div id="1985" class="line none"> 1985 /**</div><div id="1986" class="line none"> 1986  * Calculate the TCP checksum of the packet in uip_buf and uip_appdata.</div><div id="1987" class="line none"> 1987  *</div><div id="1988" class="line none"> 1988  * The TCP checksum is the Internet checksum of data contents of the</div><div id="1989" class="line none"> 1989  * TCP segment, and a pseudo-header as defined in RFC793.</div><div id="1990" class="line none"> 1990  *</div><div id="1991" class="line none"> 1991  * \return The TCP checksum of the TCP segment in uip_buf and pointed</div><div id="1992" class="line none"> 1992  * to by uip_appdata.</div><div id="1993" class="line none"> 1993  */</div><div id="1994" class="line none"> 1994 uint16_t uip_tcpchksum(void);</div><div id="1995" class="line none"> 1995 </div><div id="1996" class="line none"> 1996 /**</div><div id="1997" class="line none"> 1997  * Calculate the UDP checksum of the packet in uip_buf and uip_appdata.</div><div id="1998" class="line none"> 1998  *</div><div id="1999" class="line none"> 1999  * The UDP checksum is the Internet checksum of data contents of the</div><div id="2000" class="line none"> 2000  * UDP segment, and a pseudo-header as defined in RFC768.</div><div id="2001" class="line none"> 2001  *</div><div id="2002" class="line none"> 2002  * \return The UDP checksum of the UDP segment in uip_buf and pointed</div><div id="2003" class="line none"> 2003  * to by uip_appdata.</div><div id="2004" class="line none"> 2004  */</div><div id="2005" class="line none"> 2005 uint16_t uip_udpchksum(void);</div><div id="2006" class="line none"> 2006 </div><div id="2007" class="line none"> 2007 /**</div><div id="2008" class="line none"> 2008  * Calculate the ICMP checksum of the packet in uip_buf.</div><div id="2009" class="line none"> 2009  *</div><div id="2010" class="line none"> 2010  * \return The ICMP checksum of the ICMP packet in uip_buf</div><div id="2011" class="line none"> 2011  */</div><div id="2012" class="line none"> 2012 uint16_t uip_icmp6chksum(void);</div><div id="2013" class="line none"> 2013 </div><div id="2014" class="line none"> 2014 /**</div><div id="2015" class="line none"> 2015  * Removes all IPv6 extension headers from uip_buf, updates length fields</div><div id="2016" class="line none"> 2016  * (uip_len and uip_ext_len)</div><div id="2017" class="line none"> 2017  *</div><div id="2018" class="line none"> 2018  * \return true upon success, false otherwise.</div><div id="2019" class="line none"> 2019  */</div><div id="2020" class="line none"> 2020 bool uip_remove_ext_hdr(void);</div><div id="2021" class="line none"> 2021 </div><div id="2022" class="line none"> 2022 #endif /* UIP_H_ */</div><div id="2023" class="line none"> 2023 </div><div id="2024" class="line none"> 2024 </div><div id="2025" class="line none"> 2025 /** @} */</div>
</div>
</body>
</html>
