
<html>
<head>
<title>os/lib/list.h</title>
<link rel="stylesheet" type="text/css" href="../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /*</div><div id="2" class="line none">    2  * Copyright (c) 2004, Swedish Institute of Computer Science.</div><div id="3" class="line none">    3  * All rights reserved.</div><div id="4" class="line none">    4  *</div><div id="5" class="line none">    5  * Redistribution and use in source and binary forms, with or without</div><div id="6" class="line none">    6  * modification, are permitted provided that the following conditions</div><div id="7" class="line none">    7  * are met:</div><div id="8" class="line none">    8  * 1. Redistributions of source code must retain the above copyright</div><div id="9" class="line none">    9  *    notice, this list of conditions and the following disclaimer.</div><div id="10" class="line none">   10  * 2. Redistributions in binary form must reproduce the above copyright</div><div id="11" class="line none">   11  *    notice, this list of conditions and the following disclaimer in the</div><div id="12" class="line none">   12  *    documentation and/or other materials provided with the distribution.</div><div id="13" class="line none">   13  * 3. Neither the name of the Institute nor the names of its contributors</div><div id="14" class="line none">   14  *    may be used to endorse or promote products derived from this software</div><div id="15" class="line none">   15  *    without specific prior written permission.</div><div id="16" class="line none">   16  *</div><div id="17" class="line none">   17  * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND</div><div id="18" class="line none">   18  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</div><div id="19" class="line none">   19  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</div><div id="20" class="line none">   20  * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE</div><div id="21" class="line none">   21  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</div><div id="22" class="line none">   22  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</div><div id="23" class="line none">   23  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</div><div id="24" class="line none">   24  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</div><div id="25" class="line none">   25  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</div><div id="26" class="line none">   26  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</div><div id="27" class="line none">   27  * SUCH DAMAGE.</div><div id="28" class="line none">   28  *</div><div id="29" class="line none">   29  * This file is part of the Contiki operating system.</div><div id="30" class="line none">   30  *</div><div id="31" class="line none">   31  * Author: Adam Dunkels &lt;adam@sics.se&gt;</div><div id="32" class="line none">   32  *</div><div id="33" class="line none">   33  */</div><div id="34" class="line none">   34 </div><div id="35" class="line none">   35 /**</div><div id="36" class="line none">   36  * \file</div><div id="37" class="line none">   37  * Linked list manipulation routines.</div><div id="38" class="line none">   38  * \author Adam Dunkels &lt;adam@sics.se&gt;</div><div id="39" class="line none">   39  *</div><div id="40" class="line none">   40  */</div><div id="41" class="line none">   41 </div><div id="42" class="line none">   42 /** \addtogroup data</div><div id="43" class="line none">   43     @{ */</div><div id="44" class="line none">   44 /**</div><div id="45" class="line none">   45  * \defgroup list Linked list library</div><div id="46" class="line none">   46  *</div><div id="47" class="line none">   47  * The linked list library provides a set of functions for</div><div id="48" class="line none">   48  * manipulating linked lists.</div><div id="49" class="line none">   49  *</div><div id="50" class="line none">   50  * A linked list is made up of elements where the first element \b</div><div id="51" class="line none">   51  * must be a pointer. This pointer is used by the linked list library</div><div id="52" class="line none">   52  * to form lists of the elements.</div><div id="53" class="line none">   53  *</div><div id="54" class="line none">   54  * Lists are declared with the LIST() macro. The declaration specifies</div><div id="55" class="line none">   55  * the name of the list that later is used with all list functions.</div><div id="56" class="line none">   56  *</div><div id="57" class="line none">   57  * Lists can be manipulated by inserting or removing elements from</div><div id="58" class="line none">   58  * either sides of the list (list_push(), list_add(), list_pop(),</div><div id="59" class="line none">   59  * list_chop()). A specified element can also be removed from inside a</div><div id="60" class="line none">   60  * list with list_remove(). The head and tail of a list can be</div><div id="61" class="line none">   61  * extracted using list_head() and list_tail(), respectively.</div><div id="62" class="line none">   62  *</div><div id="63" class="line none">   63  * This library is not safe to be used within an interrupt context.</div><div id="64" class="line none">   64  * @{</div><div id="65" class="line none">   65  */</div><div id="66" class="line none">   66 </div><div id="67" class="line none">   67 #ifndef <a href="list.h.html#68">LIST_H_</a></div><div id="68" class="line none">   68 #define <a href="list.h.html#68">LIST_H_</a></div><div id="69" class="line none">   69 </div><div id="70" class="line none">   70 #include &lt;stdbool.h&gt;</div><div id="71" class="line none">   71 #include &lt;stddef.h&gt;</div><div id="72" class="line none">   72 </div><div id="73" class="line none">   73 #define <a href="list.h.html#73">LIST_CONCAT2</a>(s1, s2) s1##s2</div><div id="74" class="line none">   74 #define <a href="list.h.html#74">LIST_CONCAT</a>(s1, s2) <a href="list.h.html#73">LIST_CONCAT2</a>(s1, s2)</div><div id="75" class="line none">   75 </div><div id="76" class="line none">   76 /**</div><div id="77" class="line none">   77  * Declare a linked list.</div><div id="78" class="line none">   78  *</div><div id="79" class="line none">   79  * This macro declares a linked list with the specified \c type. The</div><div id="80" class="line none">   80  * type \b must be a structure (\c struct) with its first element</div><div id="81" class="line none">   81  * being a pointer. This pointer is used by the linked list library to</div><div id="82" class="line none">   82  * form the linked lists.</div><div id="83" class="line none">   83  *</div><div id="84" class="line none">   84  * The list variable is declared as static to make it easy to use in a</div><div id="85" class="line none">   85  * single C module without unnecessarily exporting the name to other</div><div id="86" class="line none">   86  * modules.</div><div id="87" class="line none">   87  *</div><div id="88" class="line none">   88  * \param name The name of the list.</div><div id="89" class="line none">   89  */</div><div id="90" class="line none">   90 #define <a href="list.h.html#90">LIST</a>(<a href="../sys/log.h.html#104">name</a>) \</div><div id="91" class="line none">   91          static void *<a href="list.h.html#74">LIST_CONCAT</a>(<a href="../sys/log.h.html#104">name</a>,_list) = NULL; \</div><div id="92" class="line none">   92          static <a href="list.h.html#136">list_t</a> <a href="../sys/log.h.html#104">name</a> = (<a href="list.h.html#136">list_t</a>)&amp;<a href="list.h.html#74">LIST_CONCAT</a>(<a href="../sys/log.h.html#104">name</a>,_list)</div><div id="93" class="line none">   93 </div><div id="94" class="line none">   94 /**</div><div id="95" class="line none">   95  * Declare a linked list inside a structure declaraction.</div><div id="96" class="line none">   96  *</div><div id="97" class="line none">   97  * This macro declares a linked list with the specified \c type. The</div><div id="98" class="line none">   98  * type \b must be a structure (\c struct) with its first element</div><div id="99" class="line none">   99  * being a pointer. This pointer is used by the linked list library to</div><div id="100" class="line none">  100  * form the linked lists.</div><div id="101" class="line none">  101  *</div><div id="102" class="line none">  102  * Internally, the list is defined as two items: the list itself and a</div><div id="103" class="line none">  103  * pointer to the list. The pointer has the name of the parameter to</div><div id="104" class="line none">  104  * the macro and the name of the list is a concatenation of the name</div><div id="105" class="line none">  105  * and the suffix "_list". The pointer must point to the list for the</div><div id="106" class="line none">  106  * list to work. Thus the list must be initialized before using.</div><div id="107" class="line none">  107  *</div><div id="108" class="line none">  108  * The list is initialized with the LIST_STRUCT_INIT() macro.</div><div id="109" class="line none">  109  *</div><div id="110" class="line none">  110  * \param name The name of the list.</div><div id="111" class="line none">  111  */</div><div id="112" class="line none">  112 #define <a href="list.h.html#112">LIST_STRUCT</a>(<a href="../sys/log.h.html#104">name</a>) \</div><div id="113" class="line none">  113          void *<a href="list.h.html#74">LIST_CONCAT</a>(<a href="../sys/log.h.html#104">name</a>,_list); \</div><div id="114" class="line none">  114          <a href="list.h.html#136">list_t</a> <a href="../sys/log.h.html#104">name</a></div><div id="115" class="line none">  115 </div><div id="116" class="line none">  116 /**</div><div id="117" class="line none">  117  * Initialize a linked list that is part of a structure.</div><div id="118" class="line none">  118  *</div><div id="119" class="line none">  119  * This macro sets up the internal pointers in a list that has been</div><div id="120" class="line none">  120  * defined as part of a struct. This macro must be called before using</div><div id="121" class="line none">  121  * the list.</div><div id="122" class="line none">  122  *</div><div id="123" class="line none">  123  * \param struct_ptr A pointer to the struct</div><div id="124" class="line none">  124  * \param name The name of the list.</div><div id="125" class="line none">  125  */</div><div id="126" class="line none">  126 #define <a href="list.h.html#126">LIST_STRUCT_INIT</a>(struct_ptr, <a href="../sys/log.h.html#104">name</a>)                              \</div><div id="127" class="line none">  127     do {                                                                \</div><div id="128" class="line none">  128        (struct_ptr)-&gt;<a href="../sys/log.h.html#104">name</a> = &amp;((struct_ptr)-&gt;<a href="list.h.html#74">LIST_CONCAT</a>(<a href="../sys/log.h.html#104">name</a>,_list));   \</div><div id="129" class="line none">  129        (struct_ptr)-&gt;<a href="list.h.html#74">LIST_CONCAT</a>(<a href="../sys/log.h.html#104">name</a>,_list) = NULL;                    \</div><div id="130" class="line none">  130        <a href="list.h.html#152">list_init</a>((struct_ptr)-&gt;<a href="../sys/log.h.html#104">name</a>);                                   \</div><div id="131" class="line none">  131     } while(0)</div><div id="132" class="line none">  132 </div><div id="133" class="line none">  133 /**</div><div id="134" class="line none">  134  * The linked list type.</div><div id="135" class="line none">  135  */</div><div id="136" class="line none">  136 typedef void ** <a href="list.h.html#136">list_t</a>;</div><div id="137" class="line none">  137 </div><div id="138" class="line none">  138 /**</div><div id="139" class="line none">  139  * The non-modifiable linked list type.</div><div id="140" class="line none">  140  */</div><div id="141" class="line none">  141 typedef void *const *<a href="list.h.html#141">const_list_t</a>;</div><div id="142" class="line none">  142 </div><div id="143" class="line none">  143 /**</div><div id="144" class="line none">  144  * Initialize a list.</div><div id="145" class="line none">  145  *</div><div id="146" class="line none">  146  * This function initalizes a list. The list will be empty after this</div><div id="147" class="line none">  147  * function has been called.</div><div id="148" class="line none">  148  *</div><div id="149" class="line none">  149  * \param list The list to be initialized.</div><div id="150" class="line none">  150  */</div><div id="151" class="line none">  151 static inline void</div><div id="152" class="line none">  152 <a href="list.h.html#152">list_init</a>(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>)</div><div id="153" class="line none">  153 {</div><div id="154" class="line none">  154   *<a href="list.h.html#296">list</a> = NULL;</div><div id="155" class="line none">  155 }</div><div id="156" class="line none">  156 </div><div id="157" class="line none">  157 /**</div><div id="158" class="line none">  158  * Get a pointer to the first element of a list.</div><div id="159" class="line none">  159  *</div><div id="160" class="line none">  160  * This function returns a pointer to the first element of the</div><div id="161" class="line none">  161  * list. The element will \b not be removed from the list.</div><div id="162" class="line none">  162  *</div><div id="163" class="line none">  163  * \param list The list.</div><div id="164" class="line none">  164  * \return A pointer to the first element on the list.</div><div id="165" class="line none">  165  *</div><div id="166" class="line none">  166  * \sa list_tail()</div><div id="167" class="line none">  167  */</div><div id="168" class="line none">  168 static inline void *</div><div id="169" class="line none">  169 <a href="list.h.html#169">list_head</a>(<a href="list.h.html#141">const_list_t</a> <a href="list.h.html#296">list</a>)</div><div id="170" class="line none">  170 {</div><div id="171" class="line none">  171   return *<a href="list.h.html#296">list</a>;</div><div id="172" class="line none">  172 }</div><div id="173" class="line none">  173 </div><div id="174" class="line none">  174 /**</div><div id="175" class="line none">  175  * Get the tail of a list.</div><div id="176" class="line none">  176  *</div><div id="177" class="line none">  177  * This function returns a pointer to the elements following the first</div><div id="178" class="line none">  178  * element of a list. No elements are removed by this function.</div><div id="179" class="line none">  179  *</div><div id="180" class="line none">  180  * \param list The list</div><div id="181" class="line none">  181  * \return A pointer to the element after the first element on the list.</div><div id="182" class="line none">  182  *</div><div id="183" class="line none">  183  * \sa list_head()</div><div id="184" class="line none">  184  */</div><div id="185" class="line none">  185 void * list_tail(<a href="list.h.html#141">const_list_t</a> <a href="list.h.html#296">list</a>);</div><div id="186" class="line none">  186 </div><div id="187" class="line none">  187 /**</div><div id="188" class="line none">  188  * Remove the first object on a list.</div><div id="189" class="line none">  189  *</div><div id="190" class="line none">  190  * This function removes the first object on the list and returns a</div><div id="191" class="line none">  191  * pointer to it.</div><div id="192" class="line none">  192  *</div><div id="193" class="line none">  193  * \param list The list.</div><div id="194" class="line none">  194  * \return Pointer to the removed element of list.</div><div id="195" class="line none">  195  */</div><div id="196" class="line none">  196 void * list_pop (<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>);</div><div id="197" class="line none">  197 </div><div id="198" class="line none">  198 /**</div><div id="199" class="line none">  199  * Add an item to the start of the list.</div><div id="200" class="line none">  200  */</div><div id="201" class="line none">  201 void   list_push(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>, void *item);</div><div id="202" class="line none">  202 </div><div id="203" class="line none">  203 /**</div><div id="204" class="line none">  204  * Remove the last object on the list.</div><div id="205" class="line none">  205  *</div><div id="206" class="line none">  206  * This function removes the last object on the list and returns it.</div><div id="207" class="line none">  207  *</div><div id="208" class="line none">  208  * \param list The list</div><div id="209" class="line none">  209  * \return The removed object</div><div id="210" class="line none">  210  *</div><div id="211" class="line none">  211  */</div><div id="212" class="line none">  212 void * list_chop(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>);</div><div id="213" class="line none">  213 </div><div id="214" class="line none">  214 /**</div><div id="215" class="line none">  215  * Add an item at the end of a list.</div><div id="216" class="line none">  216  *</div><div id="217" class="line none">  217  * This function adds an item to the end of the list.</div><div id="218" class="line none">  218  *</div><div id="219" class="line none">  219  * \param list The list.</div><div id="220" class="line none">  220  * \param item A pointer to the item to be added.</div><div id="221" class="line none">  221  *</div><div id="222" class="line none">  222  * \sa list_push()</div><div id="223" class="line none">  223  *</div><div id="224" class="line none">  224  */</div><div id="225" class="line none">  225 void   list_add(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>, void *item);</div><div id="226" class="line none">  226 </div><div id="227" class="line none">  227 /**</div><div id="228" class="line none">  228  * Remove a specific element from a list.</div><div id="229" class="line none">  229  *</div><div id="230" class="line none">  230  * This function removes a specified element from the list.</div><div id="231" class="line none">  231  *</div><div id="232" class="line none">  232  * \param list The list.</div><div id="233" class="line none">  233  * \param item The item that is to be removed from the list.</div><div id="234" class="line none">  234  *</div><div id="235" class="line none">  235  */</div><div id="236" class="line none">  236 void   list_remove(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>, const void *item);</div><div id="237" class="line none">  237 </div><div id="238" class="line none">  238 /**</div><div id="239" class="line none">  239  * Get the length of a list.</div><div id="240" class="line none">  240  *</div><div id="241" class="line none">  241  * This function counts the number of elements on a specified list.</div><div id="242" class="line none">  242  *</div><div id="243" class="line none">  243  * \param list The list.</div><div id="244" class="line none">  244  * \return The length of the list.</div><div id="245" class="line none">  245  */</div><div id="246" class="line none">  246 int    list_length(<a href="list.h.html#141">const_list_t</a> <a href="list.h.html#296">list</a>);</div><div id="247" class="line none">  247 </div><div id="248" class="line none">  248 /**</div><div id="249" class="line none">  249  * Duplicate a list.</div><div id="250" class="line none">  250  *</div><div id="251" class="line none">  251  * This function duplicates a list by copying the list reference, but</div><div id="252" class="line none">  252  * not the elements.</div><div id="253" class="line none">  253  *</div><div id="254" class="line none">  254  * \note This function does \b not copy the elements of the list, but</div><div id="255" class="line none">  255  * merely duplicates the pointer to the first element of the list.</div><div id="256" class="line none">  256  *</div><div id="257" class="line none">  257  * \param dest The destination list.</div><div id="258" class="line none">  258  * \param src The source list.</div><div id="259" class="line none">  259  */</div><div id="260" class="line none">  260 static inline void</div><div id="261" class="line none">  261 <a href="list.h.html#261">list_copy</a>(<a href="list.h.html#136">list_t</a> <a href="../net/ipv6/uip.h.html#1427">dest</a>, <a href="list.h.html#141">const_list_t</a> <a href="../net/ipv6/uip.h.html#1428">src</a>)</div><div id="262" class="line none">  262 {</div><div id="263" class="line none">  263   *<a href="../net/ipv6/uip.h.html#1427">dest</a> = *<a href="../net/ipv6/uip.h.html#1428">src</a>;</div><div id="264" class="line none">  264 }</div><div id="265" class="line none">  265 </div><div id="266" class="line none">  266 /**</div><div id="267" class="line none">  267  * \brief      Insert an item after a specified item on the list</div><div id="268" class="line none">  268  * \param list The list</div><div id="269" class="line none">  269  * \param previtem The item after which the new item should be inserted</div><div id="270" class="line none">  270  * \param newitem  The new item that is to be inserted</div><div id="271" class="line none">  271  * \author     Adam Dunkels</div><div id="272" class="line none">  272  *</div><div id="273" class="line none">  273  *             This function inserts an item right after a specified</div><div id="274" class="line none">  274  *             item on the list. This function is useful when using</div><div id="275" class="line none">  275  *             the list module to ordered lists.</div><div id="276" class="line none">  276  *</div><div id="277" class="line none">  277  *             If previtem is NULL, the new item is placed at the</div><div id="278" class="line none">  278  *             start of the list.</div><div id="279" class="line none">  279  *</div><div id="280" class="line none">  280  */</div><div id="281" class="line none">  281 void   list_insert(<a href="list.h.html#136">list_t</a> <a href="list.h.html#296">list</a>, void *previtem, void *newitem);</div><div id="282" class="line none">  282 </div><div id="283" class="line none">  283 /**</div><div id="284" class="line none">  284  * \brief      Get the next item following this item</div><div id="285" class="line none">  285  * \param item A list item</div><div id="286" class="line none">  286  * \returns    A next item on the list</div><div id="287" class="line none">  287  *</div><div id="288" class="line none">  288  *             This function takes a list item and returns the next</div><div id="289" class="line none">  289  *             item on the list, or NULL if there are no more items on</div><div id="290" class="line none">  290  *             the list. This function is used when iterating through</div><div id="291" class="line none">  291  *             lists.</div><div id="292" class="line none">  292  */</div><div id="293" class="line none">  293 static inline void *</div><div id="294" class="line none">  294 <a href="list.h.html#294">list_item_next</a>(const void *item)</div><div id="295" class="line none">  295 {</div><div id="296" class="line none">  296   struct <a href="list.h.html#296">list</a> {</div><div id="297" class="line none">  297     struct <a href="list.h.html#296">list</a> *<a href="list.h.html#297">next</a>;</div><div id="298" class="line none">  298   };</div><div id="299" class="line none">  299   return item == NULL ? NULL : ((struct <a href="list.h.html#296">list</a> *)item)-&gt;<a href="list.h.html#297">next</a>;</div><div id="300" class="line none">  300 }</div><div id="301" class="line none">  301 </div><div id="302" class="line none">  302 /**</div><div id="303" class="line none">  303  * \brief      Check if the list contains an item</div><div id="304" class="line none">  304  * \param list The list that is checked</div><div id="305" class="line none">  305  * \param item An item to look for in the list</div><div id="306" class="line none">  306  * \returns    0 if the list does not contains the item, and 1 otherwise</div><div id="307" class="line none">  307  *</div><div id="308" class="line none">  308  *             This function searches for an item in the list and returns</div><div id="309" class="line none">  309  *         0 if the list does not contain the item, and 1 if the item</div><div id="310" class="line none">  310  *         is present in the list.</div><div id="311" class="line none">  311  */</div><div id="312" class="line none">  312 bool list_contains(<a href="list.h.html#141">const_list_t</a> <a href="list.h.html#296">list</a>, const void *item);</div><div id="313" class="line none">  313 </div><div id="314" class="line none">  314 #endif /* LIST_H_ */</div><div id="315" class="line none">  315 </div><div id="316" class="line none">  316 /** @} */</div><div id="317" class="line none">  317 /** @} */</div>
</div>
</body>
</html>
